var xo=Object.defineProperty;var Po=Object.getPrototypeOf;var ko=Reflect.get;var wl=u=>{throw TypeError(u)};var Ao=(u,t,e)=>t in u?xo(u,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[t]=e;var o=(u,t,e)=>Ao(u,typeof t!="symbol"?t+"":t,e),Jn=(u,t,e)=>t.has(u)||wl("Cannot "+e);var a=(u,t,e)=>(Jn(u,t,"read from private field"),e?e.call(u):t.get(u)),p=(u,t,e)=>t.has(u)?wl("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(u):t.set(u,e),m=(u,t,e,i)=>(Jn(u,t,"write to private field"),i?i.call(u,e):t.set(u,e),e),R=(u,t,e)=>(Jn(u,t,"access private method"),e);var F=(u,t,e)=>ko(Po(u),e,t);import{_ as Mo}from"./index-D8H9eBkN.js";const _r=window,Ha=_r.ShadowRoot&&(_r.ShadyCSS===void 0||_r.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Fa=Symbol(),Sl=new WeakMap;class Yl{constructor(t,e,i){if(this._$cssResult$=!0,i!==Fa)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(Ha&&t===void 0){const i=e!==void 0&&e.length===1;i&&(t=Sl.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&Sl.set(e,t))}return t}toString(){return this.cssText}}const Lo=u=>new Yl(typeof u=="string"?u:u+"",void 0,Fa),E=(u,...t)=>{const e=u.length===1?u[0]:t.reduce((i,s,r)=>i+(n=>{if(n._$cssResult$===!0)return n.cssText;if(typeof n=="number")return n;throw Error("Value passed to 'css' function must be a 'css' function result: "+n+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+u[r+1],u[0]);return new Yl(e,u,Fa)},To=(u,t)=>{Ha?u.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):t.forEach(e=>{const i=document.createElement("style"),s=_r.litNonce;s!==void 0&&i.setAttribute("nonce",s),i.textContent=e.cssText,u.appendChild(i)})},Cl=Ha?u=>u:u=>u instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return Lo(e)})(u):u;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var _n;const tn=window,yl=tn.trustedTypes,$o=yl?yl.emptyScript:"",El=tn.reactiveElementPolyfillSupport,aa={toAttribute(u,t){switch(t){case Boolean:u=u?$o:null;break;case Object:case Array:u=u==null?u:JSON.stringify(u)}return u},fromAttribute(u,t){let e=u;switch(t){case Boolean:e=u!==null;break;case Number:e=u===null?null:Number(u);break;case Object:case Array:try{e=JSON.parse(u)}catch{e=null}}return e}},Ul=(u,t)=>t!==u&&(t==t||u==u),ea={attribute:!0,type:String,converter:aa,reflect:!1,hasChanged:Ul},la="finalized";class Vt extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(t){var e;this.finalize(),((e=this.h)!==null&&e!==void 0?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach((e,i)=>{const s=this._$Ep(i,e);s!==void 0&&(this._$Ev.set(s,i),t.push(s))}),t}static createProperty(t,e=ea){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i=typeof t=="symbol"?Symbol():"__"+t,s=this.getPropertyDescriptor(t,i,e);s!==void 0&&Object.defineProperty(this.prototype,t,s)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(s){const r=this[t];this[e]=s,this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||ea}static finalize(){if(this.hasOwnProperty(la))return!1;this[la]=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),t.h!==void 0&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,i=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const s of i)this.createProperty(s,e[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const s of i)e.unshift(Cl(s))}else t!==void 0&&e.push(Cl(t));return e}static _$Ep(t,e){const i=e.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}_$Eu(){var t;this._$E_=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(t=this.constructor.h)===null||t===void 0||t.forEach(e=>e(this))}addController(t){var e,i;((e=this._$ES)!==null&&e!==void 0?e:this._$ES=[]).push(t),this.renderRoot!==void 0&&this.isConnected&&((i=t.hostConnected)===null||i===void 0||i.call(t))}removeController(t){var e;(e=this._$ES)===null||e===void 0||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])})}createRenderRoot(){var t;const e=(t=this.shadowRoot)!==null&&t!==void 0?t:this.attachShadow(this.constructor.shadowRootOptions);return To(e,this.constructor.elementStyles),e}connectedCallback(){var t;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$ES)===null||t===void 0||t.forEach(e=>{var i;return(i=e.hostConnected)===null||i===void 0?void 0:i.call(e)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$ES)===null||t===void 0||t.forEach(e=>{var i;return(i=e.hostDisconnected)===null||i===void 0?void 0:i.call(e)})}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EO(t,e,i=ea){var s;const r=this.constructor._$Ep(t,i);if(r!==void 0&&i.reflect===!0){const n=(((s=i.converter)===null||s===void 0?void 0:s.toAttribute)!==void 0?i.converter:aa).toAttribute(e,i.type);this._$El=t,n==null?this.removeAttribute(r):this.setAttribute(r,n),this._$El=null}}_$AK(t,e){var i;const s=this.constructor,r=s._$Ev.get(t);if(r!==void 0&&this._$El!==r){const n=s.getPropertyOptions(r),c=typeof n.converter=="function"?{fromAttribute:n.converter}:((i=n.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?n.converter:aa;this._$El=r,this[r]=c.fromAttribute(e,n.type),this._$El=null}}requestUpdate(t,e,i){let s=!0;t!==void 0&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||Ul)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),i.reflect===!0&&this._$El!==t&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(t,i))):s=!1),!this.isUpdatePending&&s&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((s,r)=>this[r]=s),this._$Ei=void 0);let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(t=this._$ES)===null||t===void 0||t.forEach(s=>{var r;return(r=s.hostUpdate)===null||r===void 0?void 0:r.call(s)}),this.update(i)):this._$Ek()}catch(s){throw e=!1,this._$Ek(),s}e&&this._$AE(i)}willUpdate(t){}_$AE(t){var e;(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdated)===null||s===void 0?void 0:s.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){this._$EC!==void 0&&(this._$EC.forEach((e,i)=>this._$EO(i,this[i],e)),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}Vt[la]=!0,Vt.elementProperties=new Map,Vt.elementStyles=[],Vt.shadowRootOptions={mode:"open"},El==null||El({ReactiveElement:Vt}),((_n=tn.reactiveElementVersions)!==null&&_n!==void 0?_n:tn.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ta;const sn=window,Fi=sn.trustedTypes,Nl=Fi?Fi.createPolicy("lit-html",{createHTML:u=>u}):void 0,oa="$lit$",Re=`lit$${(Math.random()+"").slice(9)}$`,Xl="?"+Re,Oo=`<${Xl}>`,Bt=document,gs=()=>Bt.createComment(""),fs=u=>u===null||typeof u!="object"&&typeof u!="function",ql=Array.isArray,Bo=u=>ql(u)||typeof(u==null?void 0:u[Symbol.iterator])=="function",ia=`[ 	
\f\r]`,Zi=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,xl=/-->/g,Pl=/>/g,Je=RegExp(`>|${ia}(?:([^\\s"'>=/]+)(${ia}*=${ia}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),kl=/'/g,Al=/"/g,Zl=/^(?:script|style|textarea|title)$/i,Io=u=>(t,...e)=>({_$litType$:u,strings:t,values:e}),b=Io(1),It=Symbol.for("lit-noChange"),A=Symbol.for("lit-nothing"),Ml=new WeakMap,ft=Bt.createTreeWalker(Bt,129,null,!1);function Kl(u,t){if(!Array.isArray(u)||!u.hasOwnProperty("raw"))throw Error("invalid template strings array");return Nl!==void 0?Nl.createHTML(t):t}const Do=(u,t)=>{const e=u.length-1,i=[];let s,r=t===2?"<svg>":"",n=Zi;for(let c=0;c<e;c++){const h=u[c];let d,f,v=-1,C=0;for(;C<h.length&&(n.lastIndex=C,f=n.exec(h),f!==null);)C=n.lastIndex,n===Zi?f[1]==="!--"?n=xl:f[1]!==void 0?n=Pl:f[2]!==void 0?(Zl.test(f[2])&&(s=RegExp("</"+f[2],"g")),n=Je):f[3]!==void 0&&(n=Je):n===Je?f[0]===">"?(n=s??Zi,v=-1):f[1]===void 0?v=-2:(v=n.lastIndex-f[2].length,d=f[1],n=f[3]===void 0?Je:f[3]==='"'?Al:kl):n===Al||n===kl?n=Je:n===xl||n===Pl?n=Zi:(n=Je,s=void 0);const P=n===Je&&u[c+1].startsWith("/>")?" ":"";r+=n===Zi?h+Oo:v>=0?(i.push(d),h.slice(0,v)+oa+h.slice(v)+Re+P):h+Re+(v===-2?(i.push(void 0),c):P)}return[Kl(u,r+(u[e]||"<?>")+(t===2?"</svg>":"")),i]};class bs{constructor({strings:t,_$litType$:e},i){let s;this.parts=[];let r=0,n=0;const c=t.length-1,h=this.parts,[d,f]=Do(t,e);if(this.el=bs.createElement(d,i),ft.currentNode=this.el.content,e===2){const v=this.el.content,C=v.firstChild;C.remove(),v.append(...C.childNodes)}for(;(s=ft.nextNode())!==null&&h.length<c;){if(s.nodeType===1){if(s.hasAttributes()){const v=[];for(const C of s.getAttributeNames())if(C.endsWith(oa)||C.startsWith(Re)){const P=f[n++];if(v.push(C),P!==void 0){const I=s.getAttribute(P.toLowerCase()+oa).split(Re),B=/([.?@])?(.*)/.exec(P);h.push({type:1,index:r,name:B[2],strings:I,ctor:B[1]==="."?Vo:B[1]==="?"?Ho:B[1]==="@"?Fo:Qn})}else h.push({type:6,index:r})}for(const C of v)s.removeAttribute(C)}if(Zl.test(s.tagName)){const v=s.textContent.split(Re),C=v.length-1;if(C>0){s.textContent=Fi?Fi.emptyScript:"";for(let P=0;P<C;P++)s.append(v[P],gs()),ft.nextNode(),h.push({type:2,index:++r});s.append(v[C],gs())}}}else if(s.nodeType===8)if(s.data===Xl)h.push({type:2,index:r});else{let v=-1;for(;(v=s.data.indexOf(Re,v+1))!==-1;)h.push({type:7,index:r}),v+=Re.length-1}r++}}static createElement(t,e){const i=Bt.createElement("template");return i.innerHTML=t,i}}function zi(u,t,e=u,i){var s,r,n,c;if(t===It)return t;let h=i!==void 0?(s=e._$Co)===null||s===void 0?void 0:s[i]:e._$Cl;const d=fs(t)?void 0:t._$litDirective$;return(h==null?void 0:h.constructor)!==d&&((r=h==null?void 0:h._$AO)===null||r===void 0||r.call(h,!1),d===void 0?h=void 0:(h=new d(u),h._$AT(u,e,i)),i!==void 0?((n=(c=e)._$Co)!==null&&n!==void 0?n:c._$Co=[])[i]=h:e._$Cl=h),h!==void 0&&(t=zi(u,h._$AS(u,t.values),h,i)),t}class Go{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;const{el:{content:i},parts:s}=this._$AD,r=((e=t==null?void 0:t.creationScope)!==null&&e!==void 0?e:Bt).importNode(i,!0);ft.currentNode=r;let n=ft.nextNode(),c=0,h=0,d=s[0];for(;d!==void 0;){if(c===d.index){let f;d.type===2?f=new Ur(n,n.nextSibling,this,t):d.type===1?f=new d.ctor(n,d.name,d.strings,this,t):d.type===6&&(f=new zo(n,this,t)),this._$AV.push(f),d=s[++h]}c!==(d==null?void 0:d.index)&&(n=ft.nextNode(),c++)}return ft.currentNode=Bt,r}v(t){let e=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class Ur{constructor(t,e,i,s){var r;this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=s,this._$Cp=(r=s==null?void 0:s.isConnected)===null||r===void 0||r}get _$AU(){var t,e;return(e=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&e!==void 0?e:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return e!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=zi(this,t,e),fs(t)?t===A||t==null||t===""?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==It&&this._(t):t._$litType$!==void 0?this.g(t):t.nodeType!==void 0?this.$(t):Bo(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==A&&fs(this._$AH)?this._$AA.nextSibling.data=t:this.$(Bt.createTextNode(t)),this._$AH=t}g(t){var e;const{values:i,_$litType$:s}=t,r=typeof s=="number"?this._$AC(t):(s.el===void 0&&(s.el=bs.createElement(Kl(s.h,s.h[0]),this.options)),s);if(((e=this._$AH)===null||e===void 0?void 0:e._$AD)===r)this._$AH.v(i);else{const n=new Go(r,this),c=n.u(this.options);n.v(i),this.$(c),this._$AH=n}}_$AC(t){let e=Ml.get(t.strings);return e===void 0&&Ml.set(t.strings,e=new bs(t)),e}T(t){ql(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,s=0;for(const r of t)s===e.length?e.push(i=new Ur(this.k(gs()),this.k(gs()),this,this.options)):i=e[s],i._$AI(r),s++;s<e.length&&(this._$AR(i&&i._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,e);t&&t!==this._$AB;){const s=t.nextSibling;t.remove(),t=s}}setConnected(t){var e;this._$AM===void 0&&(this._$Cp=t,(e=this._$AP)===null||e===void 0||e.call(this,t))}}class Qn{constructor(t,e,i,s,r){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=A}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,s){const r=this.strings;let n=!1;if(r===void 0)t=zi(this,t,e,0),n=!fs(t)||t!==this._$AH&&t!==It,n&&(this._$AH=t);else{const c=t;let h,d;for(t=r[0],h=0;h<r.length-1;h++)d=zi(this,c[i+h],e,h),d===It&&(d=this._$AH[h]),n||(n=!fs(d)||d!==this._$AH[h]),d===A?t=A:t!==A&&(t+=(d??"")+r[h+1]),this._$AH[h]=d}n&&!s&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Vo extends Qn{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}const Ro=Fi?Fi.emptyScript:"";class Ho extends Qn{constructor(){super(...arguments),this.type=4}j(t){t&&t!==A?this.element.setAttribute(this.name,Ro):this.element.removeAttribute(this.name)}}class Fo extends Qn{constructor(t,e,i,s,r){super(t,e,i,s,r),this.type=5}_$AI(t,e=this){var i;if((t=(i=zi(this,t,e,0))!==null&&i!==void 0?i:A)===It)return;const s=this._$AH,r=t===A&&s!==A||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,n=t!==A&&(s===A||r);r&&this.element.removeEventListener(this.name,this,s),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;typeof this._$AH=="function"?this._$AH.call((i=(e=this.options)===null||e===void 0?void 0:e.host)!==null&&i!==void 0?i:this.element,t):this._$AH.handleEvent(t)}}class zo{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){zi(this,t)}}const Ll=sn.litHtmlPolyfillSupport;Ll==null||Ll(bs,Ur),((ta=sn.litHtmlVersions)!==null&&ta!==void 0?ta:sn.litHtmlVersions=[]).push("2.8.0");const jo=(u,t,e)=>{var i,s;const r=(i=e==null?void 0:e.renderBefore)!==null&&i!==void 0?i:t;let n=r._$litPart$;if(n===void 0){const c=(s=e==null?void 0:e.renderBefore)!==null&&s!==void 0?s:null;r._$litPart$=n=new Ur(t.insertBefore(gs(),c),c,void 0,e??{})}return n._$AI(u),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var sa,ra;class Qi extends Vt{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return(t=(e=this.renderOptions).renderBefore)!==null&&t!==void 0||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=jo(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!1)}render(){return It}}Qi.finalized=!0,Qi._$litElement$=!0,(sa=globalThis.litElementHydrateSupport)===null||sa===void 0||sa.call(globalThis,{LitElement:Qi});const Tl=globalThis.litElementPolyfillSupport;Tl==null||Tl({LitElement:Qi});((ra=globalThis.litElementVersions)!==null&&ra!==void 0?ra:globalThis.litElementVersions=[]).push("3.3.3");const S=class S{};o(S,"nodeColors",{black:E`20, 20, 20`,blue:E`84, 122, 156`,darkBlue:E`32, 80, 128`,darkerBlue:E`18, 18, 130`,darkTurquoise:E`19, 100, 137`,gray:E`150,150,150`,green:E`95, 129, 90`,intenseGreen:E`42, 140, 42`,lime:E`150, 160, 30`,red:E`151, 33, 32`,turquoise:E`46, 104, 106`,violet:E`126, 28, 150`,yellow:E`148, 116, 24`}),o(S,"alphaPattern","repeating-conic-gradient(#7c8184 0% 25%, #c2c3c4 0% 50%) 50% / 10px 10px"),o(S,"colorDragEventName","ueb-color-drag"),o(S,"colorPickEventName","ueb-color-pick"),o(S,"colorWindowEventName","ueb-color-window"),o(S,"colorWindowName","Color Picker"),o(S,"defaultCommentHeight",96),o(S,"defaultCommentWidth",400),o(S,"distanceThreshold",5),o(S,"dragEventName","ueb-drag"),o(S,"dragGeneralEventName","ueb-drag-general"),o(S,"edgeScrollThreshold",50),o(S,"editTextEventName",{begin:"ueb-edit-text-begin",end:"ueb-edit-text-end"}),o(S,"expandGridSize",400),o(S,"focusEventName",{begin:"blueprint-focus",end:"blueprint-unfocus"}),o(S,"fontSize",E`13px`),o(S,"gridAxisLineColor",E`black`),o(S,"gridExpandThreshold",.25),o(S,"gridLineColor",E`#353535`),o(S,"gridLineWidth",1),o(S,"gridSet",8),o(S,"gridSetLineColor",E`#161616`),o(S,"gridShrinkThreshold",4),o(S,"gridSize",16),o(S,"hexColorRegex",/^\s*#(?<r>[0-9a-fA-F]{2})(?<g>[0-9a-fA-F]{2})(?<b>[0-9a-fA-F]{2})([0-9a-fA-F]{2})?|#(?<rs>[0-9a-fA-F])(?<gs>[0-9a-fA-F])(?<bs>[0-9a-fA-F])\s*$/),o(S,"indentation","   "),o(S,"keysSeparator",/[\.\(\)]/),o(S,"knotOffset",[-S.gridSize,-.5*S.gridSize]),o(S,"lineTracePattern",/LineTrace(Single|Multi)(\w*)/),o(S,"linkCurveHeight",15),o(S,"linkCurveWidth",80),o(S,"linkMinWidth",100),o(S,"nameRegexSpaceReplacement",new RegExp("^K2(?:[Nn]ode)?_|(?<=[a-z])(?=[A-Z0-9])|(?<=[A-Z])(?<!U(?=Vs(?![a-z])))(?<!V(?=[23](?![0-9])))(?<!T(?=2d(?![a-z])))(?<!BT)(?=[A-Z][a-z]|[0-9])|(?<=[0-9])(?<![23](?=[dD](?![a-z])))(?=[a-zA-Z])|\\s*_+\\s*|\\s{2,}","g")),o(S,"linkRightSVGPath",(t,e,i)=>{let s=100-t;return`M ${t} 0 C ${e.toFixed(3)} 0, ${i.toFixed(3)} 0, 50 50 S ${(s-e+t).toFixed(3)} 100, ${s.toFixed(3)} 100`}),o(S,"maxZoom",7),o(S,"minZoom",-12),o(S,"mouseClickButton",0),o(S,"mouseRightClickButton",2),o(S,"mouseWheelZoomThreshold",80),o(S,"nodeDragEventName","ueb-node-drag"),o(S,"nodeDragGeneralEventName","ueb-node-drag-general"),o(S,"nodeTitle",(t,e)=>`${t}_${e}`),o(S,"nodeRadius",8),o(S,"nodeReflowEventName","ueb-node-reflow"),o(S,"paths",{actorBoundEvent:"/Script/BlueprintGraph.K2Node_ActorBoundEvent",addDelegate:"/Script/BlueprintGraph.K2Node_AddDelegate",ambientSound:"/Script/Engine.AmbientSound",asyncAction:"/Script/BlueprintGraph.K2Node_AsyncAction",blueprint:"/Script/Engine.Blueprint",blueprintGameplayTagLibrary:"/Script/GameplayTags.BlueprintGameplayTagLibrary",blueprintMapLibrary:"/Script/Engine.BlueprintMapLibrary",blueprintSetLibrary:"/Script/Engine.BlueprintSetLibrary",callArrayFunction:"/Script/BlueprintGraph.K2Node_CallArrayFunction",callDelegate:"/Script/BlueprintGraph.K2Node_CallDelegate",callFunction:"/Script/BlueprintGraph.K2Node_CallFunction",comment:"/Script/UnrealEd.EdGraphNode_Comment",commutativeAssociativeBinaryOperator:"/Script/BlueprintGraph.K2Node_CommutativeAssociativeBinaryOperator",componentBoundEvent:"/Script/BlueprintGraph.K2Node_ComponentBoundEvent",createDelegate:"/Script/BlueprintGraph.K2Node_CreateDelegate",customEvent:"/Script/BlueprintGraph.K2Node_CustomEvent",doN:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:Do N",doOnce:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:DoOnce",dynamicCast:"/Script/BlueprintGraph.K2Node_DynamicCast",eAttachmentRule:"/Script/Engine.EAttachmentRule",edGraph:"/Script/Engine.EdGraph",eDrawDebugTrace:"/Script/Engine.EDrawDebugTrace",eMaterialSamplerType:"/Script/Engine.EMaterialSamplerType",eNiagara_Float4Channel:"/Niagara/Enums/ENiagara_Float4Channel.ENiagara_Float4Channel",enum:"/Script/CoreUObject.Enum",enumLiteral:"/Script/BlueprintGraph.K2Node_EnumLiteral",eSamplerSourceMode:"/Script/Engine.ESamplerSourceMode",eSearchCase:"/Script/CoreUObject.ESearchCase",eSearchDir:"/Script/CoreUObject.ESearchDir",eSpawnActorCollisionHandlingMethod:"/Script/Engine.ESpawnActorCollisionHandlingMethod",eTextureMipValueMode:"/Script/Engine.ETextureMipValueMode",eTraceTypeQuery:"/Script/Engine.ETraceTypeQuery",event:"/Script/BlueprintGraph.K2Node_Event",eWorldPositionIncludedOffsets:"/Script/Engine.EWorldPositionIncludedOffsets",executionSequence:"/Script/BlueprintGraph.K2Node_ExecutionSequence",flipflop:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:FlipFlop",forEachElementInEnum:"/Script/BlueprintGraph.K2Node_ForEachElementInEnum",forEachLoop:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:ForEachLoop",forEachLoopWithBreak:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:ForEachLoopWithBreak",forLoop:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:ForLoop",forLoopWithBreak:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:ForLoopWithBreak",functionEntry:"/Script/BlueprintGraph.K2Node_FunctionEntry",functionResult:"/Script/BlueprintGraph.K2Node_FunctionResult",gameplayTag:"/Script/GameplayTags.GameplayTag",getInputAxisKeyValue:"/Script/BlueprintGraph.K2Node_GetInputAxisKeyValue",ifThenElse:"/Script/BlueprintGraph.K2Node_IfThenElse",inputAxisKeyEvent:"/Script/BlueprintGraph.K2Node_InputAxisKeyEvent",inputDebugKey:"/Script/InputBlueprintNodes.K2Node_InputDebugKey",inputKey:"/Script/BlueprintGraph.K2Node_InputKey",inputVectorAxisEvent:"/Script/BlueprintGraph.K2Node_InputVectorAxisEvent",isValid:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:IsValid",kismetArrayLibrary:"/Script/Engine.KismetArrayLibrary",kismetMathLibrary:"/Script/Engine.KismetMathLibrary",knot:"/Script/BlueprintGraph.K2Node_Knot",linearColor:"/Script/CoreUObject.LinearColor",literal:"/Script/BlueprintGraph.K2Node_Literal",macro:"/Script/BlueprintGraph.K2Node_MacroInstance",makeArray:"/Script/BlueprintGraph.K2Node_MakeArray",makeMap:"/Script/BlueprintGraph.K2Node_MakeMap",makeSet:"/Script/BlueprintGraph.K2Node_MakeSet",makeStruct:"/Script/BlueprintGraph.K2Node_MakeStruct",materialExpressionComponentMask:"/Script/Engine.MaterialExpressionComponentMask",materialExpressionConstant:"/Script/Engine.MaterialExpressionConstant",materialExpressionConstant2Vector:"/Script/Engine.MaterialExpressionConstant2Vector",materialExpressionConstant3Vector:"/Script/Engine.MaterialExpressionConstant3Vector",materialExpressionConstant4Vector:"/Script/Engine.MaterialExpressionConstant4Vector",materialExpressionFunctionInput:"/Script/Engine.MaterialExpressionFunctionInput",materialExpressionLogarithm:"/Script/InterchangeImport.MaterialExpressionLogarithm",materialExpressionLogarithm10:"/Script/Engine.MaterialExpressionLogarithm10",materialExpressionLogarithm2:"/Script/Engine.MaterialExpressionLogarithm2",materialExpressionMaterialFunctionCall:"/Script/Engine.MaterialExpressionMaterialFunctionCall",materialExpressionSquareRoot:"/Script/Engine.MaterialExpressionSquareRoot",materialExpressionSubtract:"/Script/Engine.MaterialExpressionSubtract",materialExpressionTextureCoordinate:"/Script/Engine.MaterialExpressionTextureCoordinate",materialExpressionTextureSample:"/Script/Engine.MaterialExpressionTextureSample",materialExpressionWorldPosition:"/Script/Engine.MaterialExpressionWorldPosition",materialGraphNode:"/Script/UnrealEd.MaterialGraphNode",materialGraphNodeComment:"/Script/UnrealEd.MaterialGraphNode_Comment",metasoundEditorGraphExternalNode:"/Script/MetasoundEditor.MetasoundEditorGraphExternalNode",multiGate:"/Script/BlueprintGraph.K2Node_MultiGate",niagaraBool:"/Script/Niagara.NiagaraBool",niagaraClipboardContent:"/Script/NiagaraEditor.NiagaraClipboardContent",niagaraDataInterfaceVolumeTexture:"/Script/Niagara.NiagaraDataInterfaceVolumeTexture",niagaraFloat:"/Script/Niagara.NiagaraFloat",niagaraMatrix:"/Script/Niagara.NiagaraMatrix",niagaraNodeFunctionCall:"/Script/NiagaraEditor.NiagaraNodeFunctionCall",niagaraNodeOp:"/Script/NiagaraEditor.NiagaraNodeOp",niagaraNumeric:"/Script/Niagara.NiagaraNumeric",niagaraPosition:"/Script/Niagara.NiagaraPosition",pawn:"/Script/Engine.Pawn",pcgEditorGraphNode:"/Script/PCGEditor.PCGEditorGraphNode",pcgEditorGraphNodeInput:"/Script/PCGEditor.PCGEditorGraphNodeInput",pcgEditorGraphNodeOutput:"/Script/PCGEditor.PCGEditorGraphNodeOutput",pcgHiGenGridSizeSettings:"/Script/PCG.PCGHiGenGridSizeSettings",pcgSubgraphSettings:"/Script/PCG.PCGSubgraphSettings",promotableOperator:"/Script/BlueprintGraph.K2Node_PromotableOperator",quat4f:"/Script/CoreUObject.Quat4f",reverseForEachLoop:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:ReverseForEachLoop",rotator:"/Script/CoreUObject.Rotator",select:"/Script/BlueprintGraph.K2Node_Select",self:"/Script/BlueprintGraph.K2Node_Self",slateBlueprintLibrary:"/Script/UMG.SlateBlueprintLibrary",spawnActorFromClass:"/Script/BlueprintGraph.K2Node_SpawnActorFromClass",switchEnum:"/Script/BlueprintGraph.K2Node_SwitchEnum",switchGameplayTag:"/Script/GameplayTagsEditor.GameplayTagsK2Node_SwitchGameplayTag",switchInteger:"/Script/BlueprintGraph.K2Node_SwitchInteger",switchName:"/Script/BlueprintGraph.K2Node_SwitchName",switchString:"/Script/BlueprintGraph.K2Node_SwitchString",timeline:"/Script/BlueprintGraph.K2Node_Timeline",timeManagementBlueprintLibrary:"/Script/TimeManagement.TimeManagementBlueprintLibrary",transform:"/Script/CoreUObject.Transform",userDefinedEnum:"/Script/Engine.UserDefinedEnum",variableGet:"/Script/BlueprintGraph.K2Node_VariableGet",variableSet:"/Script/BlueprintGraph.K2Node_VariableSet",vector:"/Script/CoreUObject.Vector",vector2D:"/Script/CoreUObject.Vector2D",vector3f:"/Script/CoreUObject.Vector3f",vector4f:"/Script/CoreUObject.Vector4f",whileLoop:"/Engine/EditorBlueprintResources/StandardMacros.StandardMacros:WhileLoop"}),o(S,"pinInputWrapWidth",145),o(S,"removeEventName","ueb-element-delete"),o(S,"scale",{[-12]:.133333,[-11]:.166666,[-10]:.2,[-9]:.233333,[-8]:.266666,[-7]:.3,[-6]:.333333,[-5]:.375,[-4]:.5,[-3]:.675,[-2]:.75,[-1]:.875,0:1,1:1.25,2:1.375,3:1.5,4:1.675,5:1.75,6:1.875,7:2}),o(S,"smoothScrollTime",1e3),o(S,"stringEscapedCharacters",/["\\]/g),o(S,"subObjectAttributeNamePrefix","#SubObject"),o(S,"subObjectAttributeNameFromEntity",(t,e=!1)=>S.subObjectAttributeNamePrefix+(!e&&t.Class?`_${t.Class.type}`:"")+"_"+t.Name),o(S,"subObjectAttributeNameFromReference",(t,e=!1)=>S.subObjectAttributeNamePrefix+(e?"":"_"+t.type)+"_"+t.path),o(S,"subObjectAttributeNameFromName",t=>S.subObjectAttributeNamePrefix+"_"+t),o(S,"switchTargetPattern",/\/Script\/[\w\.\/\:]+K2Node_Switch([A-Z]\w+)+/),o(S,"trackingMouseEventName",{begin:"ueb-tracking-mouse-begin",end:"ueb-tracking-mouse-end"}),o(S,"unescapedBackslash",new RegExp("(?<=(?:[^\\\\]|^)(?:\\\\\\\\)*)\\\\(?!\\\\)")),o(S,"windowApplyEventName","ueb-window-apply"),o(S,"windowApplyButtonText","OK"),o(S,"windowCancelEventName","ueb-window-cancel"),o(S,"windowCancelButtonText","Cancel"),o(S,"windowCloseEventName","ueb-window-close"),o(S,"CommonEnums",{[S.paths.eAttachmentRule]:["KeepRelative","KeepWorld","SnapToTarget"],[S.paths.eDrawDebugTrace]:["None","ForOneFrame","ForDuration","Persistent"],[S.paths.eMaterialSamplerType]:["Color","Grayscale","Alpha","Normal","Masks","Distance Field Font","Linear Color","Linear Grayscale","Data","External","Virtual Color","Virtual Grayscale","Virtual Alpha","Virtual Normal","Virtual Mask","Virtual Linear Color","Virtual Linear Grayscal"],[S.paths.eNiagara_Float4Channel]:[["NewEnumerator0","R"],["NewEnumerator1","G"],["NewEnumerator2","B"],["NewEnumerator3","A"]],[S.paths.eSamplerSourceMode]:["From texture asset","Shared: Wrap","Shared: Clamp","Hidden"],[S.paths.eSearchCase]:["CaseSensitive","IgnoreCase"],[S.paths.eWorldPositionIncludedOffsets]:["Absolute World Position (Including Material Shader Offsets)","Absolute World Position (Excluding Material Shader Offsets)","Camera Relative World Position (Including Material Shader Offsets)","Camera Relative World Position (Excluding Material Shader Offsets)"],[S.paths.eSearchDir]:["FromStart","FromEnd"],[S.paths.eSpawnActorCollisionHandlingMethod]:[["Undefined","Default"],["AlwaysSpawn","Always Spawn, Ignore Collisions"],["AdjustIfPossibleButAlwaysSpawn","Try To Adjust Location, But Always Spawn"],["AdjustIfPossibleButDontSpawnIfColliding","Try To Adjust Location, Don't Spawn If Still Colliding"],["DontSpawnIfColliding","Do Not Spawn"]],[S.paths.eTextureMipValueMode]:["None (use computed mip level)","MipLevel (absolute, 0 is full resolution)","MipBias (relative to the computed mip level)","Derivative (explicit derivative to compute mip level)"],[S.paths.eTraceTypeQuery]:[["TraceTypeQuery1","Visibility"],["TraceTypeQuery2","Camera"]]}),o(S,"ModifierKeys",["Ctrl","Shift","Alt","Meta"]),o(S,"rgba",["R","G","B","A"]),o(S,"Keys",{Backspace:"Backspace",Tab:"Tab",LeftControl:"ControlLeft",RightControl:"ControlRight",LeftShift:"ShiftLeft",RightShift:"ShiftRight",LeftAlt:"AltLeft",RightAlt:"AltRight",Enter:"Enter",Pause:"Pause",CapsLock:"CapsLock",Escape:"Escape",Space:"Space",PageUp:"PageUp",PageDown:"PageDown",End:"End",Home:"Home",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",PrintScreen:"PrintScreen",Insert:"Insert",Delete:"Delete",Zero:"Digit0",One:"Digit1",Two:"Digit2",Three:"Digit3",Four:"Digit4",Five:"Digit5",Six:"Digit6",Seven:"Digit7",Eight:"Digit8",Nine:"Digit9",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",NumPadZero:"Numpad0",NumPadOne:"Numpad1",NumPadTwo:"Numpad2",NumPadThree:"Numpad3",NumPadFour:"Numpad4",NumPadFive:"Numpad5",NumPadSix:"Numpad6",NumPadSeven:"Numpad7",NumPadEight:"Numpad8",NumPadNine:"Numpad9",Multiply:"NumpadMultiply",Add:"NumpadAdd",Subtract:"NumpadSubtract",Decimal:"NumpadDecimal",Divide:"NumpadDivide",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",NumLock:"NumLock",ScrollLock:"ScrollLock"});let l=S;class y{static clamp(t,e=-1/0,i=1/0){return Math.min(Math.max(t,e),i)}static getScale(t){var i;const e=((i=t.blueprint)==null?void 0:i.getScale())??getComputedStyle(t).getPropertyValue("--ueb-scale");return e!=""?parseFloat(e):1}static minDecimals(t,e=1,i=1e-8){const s=t*10**e;return Math.abs(s%1)>i?t.toString():t.toFixed(e)}static roundDecimals(t,e=1){const i=10**e;return Math.round(t*i)/i}static printExponential(t){if(t==Number.POSITIVE_INFINITY)return"inf";if(t==Number.NEGATIVE_INFINITY)return"-inf";const e=Math.round(t);if(e>=1e3){const s=Math.floor(Math.log10(e));return`${Math.round(t/10**(s-2))/100}e+${s<10?"0":""}${s}`}return Math.floor(t)==0?t.toString():this.roundDecimals(t,Math.max(0,3-Math.floor(t).toString().length)).toString()}static approximatelyEqual(t,e,i=1e-8){return!(Math.abs(t-e)>i)}static convertLocation(t,e,i=!1){const s=i?1:1/y.getScale(e),r=e.getBoundingClientRect();return[Math.round((t[0]-r.x)*s),Math.round((t[1]-r.y)*s)]}static isSerialized(t,e){var i,s,r,n;return((s=(i=t.attributes)==null?void 0:i[e])==null?void 0:s.serialized)??((n=(r=t.constructor.attributes)==null?void 0:r[e])==null?void 0:n.serialized)??!1}static objectGet(t,e,i=void 0){if(t!==void 0){if(!(e instanceof Array))throw new TypeError("UEBlueprint: Expected keys to be an array");return e.length==0||!(e[0]in t)||t[e[0]]===void 0?i:e.length==1?t[e[0]]:y.objectGet(t[e[0]],e.slice(1),i)}}static objectSet(t,e,i,s=Object){if(!(e instanceof Array))throw new TypeError("Expected keys to be an array.");if(e.length==1){if(e[0]in t||t[e[0]]===void 0)return t[e[0]]=i,!0}else if(e.length>0)return t[e[0]]instanceof Object||(t[e[0]]=new s),y.objectSet(t[e[0]],e.slice(1),i,s);return!1}static snapToGrid(t,e,i){return i===1?[t,e]:[i*Math.floor(t/i),i*Math.floor(e/i)]}static mergeArrays(t=[],e=[],i=(s,r)=>s==r){let s=[];t=[...t],e=[...e];e:for(;;){for(let r=0;r<e.length;++r)for(let n=0;n<t.length;++n)if(i(t[n],e[r])){s.push(...t.splice(0,n),...e.splice(0,r),...t.splice(0,1)),e.shift();continue e}break e}return[...new Set(s.concat(...t,...e))]}static escapeNewlines(t){return t.replaceAll(`
`,"\\n").replaceAll("	","\\t")}static escapeString(t,e=!0){let i=t.replaceAll(new RegExp(`(${l.stringEscapedCharacters.source})`,"g"),"\\$1");return e&&(i=i.replaceAll(`
`,"\\n").replaceAll("	","\\t")),i}static unescapeString(t){return t.replaceAll(new RegExp(l.unescapedBackslash.source+"t","g"),"	").replaceAll(new RegExp(l.unescapedBackslash.source+"n","g"),`
`).replaceAll(new RegExp(`\\\\(${l.stringEscapedCharacters.source})`,"g"),"$1")}static clearHTMLWhitespace(t){return t.replaceAll("&nbsp;"," ").replaceAll(/<br\s*\/>|<br>/g,`
`).replaceAll(/(\<!--.*?\-->)/g,"")}static encodeHTMLWhitespace(t){return t.replaceAll(" "," ")}static capitalFirstLetter(t){return t.length===0?t:t.charAt(0).toUpperCase()+t.slice(1)}static formatStringName(t=""){return t.replace(/^\s*b(?=[A-Z])/,"").replaceAll(l.nameRegexSpaceReplacement," ").trim().split(" ").map(e=>y.capitalFirstLetter(e)).join(" ")}static getIdFromReference(t){return t.replace(/(?:.+\.)?([^\.]+)$/,"$1").replaceAll(new RegExp("(?<=[a-z\\d])(?=[A-Z])|(?<=[a-zA-Z])(?=\\d)|(?<=[A-Z]{2})(?=[A-Z][a-z])","g"),"-").toLowerCase()}static getNameFromPath(t,e=!1){var s;const i=e?/([^\.\/]+?)(?:_\d+)$/:/([^\.\/]+)$/;return((s=t.match(i))==null?void 0:s[1])??""}static getPolarCoordinates(t,e,i=!1){let s=Math.atan2(e,t);return i&&s<0&&(s=2*Math.PI+s),[Math.sqrt(t*t+e*e),s]}static getCartesianCoordinates(t,e){return[t*Math.cos(e),t*Math.sin(e)]}static range(t=0,e=0,i=e>=t?1:-1){return Array.from({length:Math.ceil((e-t)/i)},(s,r)=>t+r*i)}static getFirstWordOrder(t){return new RegExp(/\s*/.source+t.join(/[^\n]+\n\s*/.source)+/\s*/.source)}static paste(t,e){const i=new ClipboardEvent("paste",{bubbles:!0,cancelable:!0,clipboardData:new DataTransfer});i.clipboardData.setData("text",e),t.dispatchEvent(i)}static async copy(t){const e=new ClipboardEvent("copy",{bubbles:!0,cancelable:!0,clipboardData:new DataTransfer});t.dispatchEvent(e)}static animate(t,e,i,s,r=c=>{},n=c=>{const h=c**3.5;return h/(h+(1-c)**3.5)}){let c;const h=d=>{c===void 0&&(c=d);let f=(d-c)/i;y.approximatelyEqual(f,1)||f>1?f=1:r(requestAnimationFrame(h));const v=t+(e-t)*n(f);s(v)};r(requestAnimationFrame(h))}}var Es,Zt,Kt;class Ui extends Qi{constructor(){super(...arguments);p(this,Es);p(this,Zt);p(this,Kt);o(this,"isInitialized",!1);o(this,"isSetup",!1);o(this,"inputObjects",[])}get blueprint(){return a(this,Es)}set blueprint(e){m(this,Es,e)}get entity(){return a(this,Zt)}set entity(e){m(this,Zt,e)}get template(){return a(this,Kt)}initialize(e,i){this.requestUpdate(),m(this,Zt,e),m(this,Kt,i),a(this,Kt).initialize(this),this.isConnected&&this.updateComplete.then(()=>this.setup()),this.isInitialized=!0}connectedCallback(){super.connectedCallback(),this.blueprint=this.closest("ueb-blueprint"),this.isInitialized&&(this.requestUpdate(),this.updateComplete.then(()=>this.setup()))}disconnectedCallback(){super.disconnectedCallback(),this.isSetup&&this.updateComplete.then(()=>this.cleanup()),this.acknowledgeDelete()}createRenderRoot(){return this}setup(){this.template.setup(),this.isSetup=!0}cleanup(){this.template.cleanup(),this.isSetup=!1}willUpdate(e){super.willUpdate(e),this.template.willUpdate(e)}update(e){super.update(e),this.template.update(e)}render(){return this.template.render()}firstUpdated(e){super.firstUpdated(e),this.template.firstUpdated(e),this.template.inputSetup()}updated(e){super.updated(e),this.template.updated(e)}acknowledgeDelete(){let e=new CustomEvent(l.removeEventName);this.dispatchEvent(e)}isSameGraph(e){return this.blueprint&&this.blueprint==(e==null?void 0:e.blueprint)}}Es=new WeakMap,Zt=new WeakMap,Kt=new WeakMap;class w{}o(w,"arrayPin",b`
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 0H0V4H4V0Z" fill="currentColor" />
            <path d="M10 0H6V4H10V0Z" fill="currentColor" />
            <path d="M16 0H12V4H16V0Z" fill="currentColor" />
            <path d="M4 6H0V10H4V6Z" fill="currentColor" />
            <path class="ueb-pin-tofill" d="M10 6H6V10H10V6Z" fill="black" />
            <path d="M16 6H12V10H16V6Z" fill="currentColor" />
            <path d="M4 12H0V16H4V12Z" fill="currentColor" />
            <path d="M10 12H6V16H10V12Z" fill="currentColor" />
            <path d="M16 12H12V16H16V12Z" fill="currentColor" />
        </svg>
    `),o(w,"branchNode",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M11 2H6C5.44772 2 5 2.44772 5 3V13C5 13.5523 5.44772 14 6 14H11V12H7V4H11V2Z" fill="white" />
            <rect x="1" y="7" width="4" height="2" fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M11 6L15 3L11 0V6Z" fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M11 16L15 13L11 10V16Z" fill="white" />
        </svg>
    `),o(w,"breakStruct",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 14L10 12L11 11L13 13L14 12L14 15L11 15L12 14Z" fill="white" />
            <path d="M13 3L11 5L10 4L12 2L11 1L14 1L14 4L13 3Z" fill="white" />
            <path d="M7.975 6H3.025C1.90662 6 1 6.90662 1 8.025V8.475C1 9.59338 1.90662 10.5 3.025 10.5H7.975C9.09338 10.5 10 9.59338 10 8.475V8.025C10 6.90662 9.09338 6 7.975 6Z" fill="white" />
        </svg>
    `),o(w,"cast",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 12L16 7.5L12 3V12Z" fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M0 11L4 7.5L0 4V11Z" fill="white" />
            <rect opacity="0.5" x="5" y="6" width="1" height="3" fill="white" />
            <rect opacity="0.5" x="7" y="6" width="1" height="3" fill="white" />
            <rect opacity="0.5" x="9" y="6" width="1" height="3" fill="white" />
            <rect x="9" y="6" width="3" height="3" fill="white" />
        </svg>
    `),o(w,"close",b`
        <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
            <line x1="2" y1="2" x2="30" y2="30" stroke="currentColor" stroke-width="4" />
            <line x1="30" y1="2" x2="2" y2="30" stroke="currentColor" stroke-width="4" />
        </svg>
    `),o(w,"convert",b`
        <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
            <path fill="#3e7fbc" d="M 4 0 H 16 V 32 H 4 L 0 28 V 4 Z" />
            <path fill="#bdd6ef" d="M 2 8 H 14 V 30 H 4 L 2 28 Z" />
            <path fill="#bc3e4a" d="M 16 0 H 28 L 32 4 V 28 L 28 32 H 16 Z" />
            <path fill="#efbdc1" d="M 18 8 H 30 V 27 L 27 30 H 18 Z" />
        </svg>
    `),o(w,"correct",b`
        <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
            <path fill="#2da800" d="M 2 16 L 14 30 L 30 2 L 13 22 Z" />
        </svg>
    `),o(w,"delegate",b`
        <svg viewBox="-2 -2 32 32" xmlns="http://www.w3.org/2000/svg">
            <rect class="ueb-pin-tofill" fill="black" width="28" height="28" rx="4" stroke="currentColor" stroke-width="5" />
        </svg>
    `),o(w,"doN",b`
        <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <path fill="white" d="M1 12V8H9V4L16 10L9 16V12H1Z" />
            <path fill="white" d="M7 6L6 6L4 2.66667V6H3V1H4L6 4.33333V1H7V6Z" />
        </svg>
    `),o(w,"doOnce",b`
        <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 12V8H9V4L16 10L9 16V12H1Z" fill="white" />
            <path d="M6 6H5L4.98752 2.42387L4 2.8642V1.893L5.89305 1H6V6Z" fill="white" />
            <rect x="4" y="5" width="3" height="1" fill="white" />
        </svg>
    `),o(w,"enum",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill="white" d="M9 5V0H2V16H14V5H9ZM3.2 4.4L4.5 4H4.6V7H4V4.7L3.2 4.9V4.4ZM4.7 14.8C4.6 14.9 4.3 15 4 15C3.7 15 3.5 14.9 3.3 14.8C3.1 14.6 3 14.4 3 14.2H3.6C3.6 14.3 3.6 14.4 3.7 14.5C3.8 14.6 3.9 14.6 4 14.6C4.1 14.6 4.2 14.6 4.3 14.5C4.4 14.4 4.4 14.3 4.4 14.2C4.4 13.9 4.2 13.8 3.9 13.8H3.7V13.3H4C4.1 13.3 4.3 13.3 4.3 13.2C4.4 13.1 4.4 13 4.4 12.9C4.4 12.8 4.4 12.7 4.3 12.6C4.2 12.5 4.1 12.5 4 12.5C3.9 12.5 3.8 12.5 3.7 12.6C3.6 12.7 3.6 12.7 3.6 12.8H3C3 12.6 3 12.5 3.1 12.4C3.2 12.3 3.3 12.2 3.4 12.1C3.7 12 3.8 12 4 12C4.3 12 4.6 12.1 4.7 12.2C4.9 12.4 5 12.6 5 12.8C5 12.9 5 13.1 4.9 13.2C4.8 13.3 4.7 13.4 4.6 13.5C4.8 13.6 4.9 13.6 5 13.8C5 13.8 5 14 5 14.1C5 14.4 4.9 14.6 4.7 14.8ZM5.1 11H3.1V10.6L4.1 9.6C4.2 9.5 4.3 9.3 4.4 9.2C4.4 9.1 4.4 9 4.4 8.9C4.4 8.8 4.4 8.7 4.3 8.6C4.2 8.5 4.1 8.5 4 8.5C3.9 8.5 3.8 8.5 3.7 8.6C3.6 8.7 3.6 8.8 3.6 9H3C3 8.8 3 8.7 3.1 8.5C3.2 8.4 3.3 8.2 3.5 8.1C3.7 8 3.8 8 4 8C4.3 8 4.5 8.1 4.7 8.2C4.9 8.4 5 8.6 5 8.8C5 9 5 9.1 4.9 9.3C4.8 9.4 4.7 9.6 4.5 9.8L3.8 10.5H5.1V11ZM12 15H6V14H12V15ZM12 11H6V10H12V11ZM12 7H6V6H12V7Z" />
            <path d="M9 0H8L14 6V5L9 0Z" fill="white" />
        </svg>
    `),o(w,"event",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="0.929031" y="8" width="10" height="10" rx="0.5" transform="rotate(-45 0.929031 8)" stroke="white" />
            <path d="M5 4.00024L8 1.00024V6.00024H3L5 4.00024Z" fill="white" />
            <path d="M6 13.0002L3 10.0002L8 10.0002L8 15.0002L6 13.0002Z" fill="white" />
            <path d="M4.53551 6.82854L4.53551 11.0712L0.999977 7.53564L4.53551 4.00011L4.53551 6.82854Z" fill="white" />
        </svg>
    `),o(w,"execPin",b`
        <svg width="15" height="15" viewBox="-2 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <path class="ueb-pin-tofill" stroke-width="1.25" stroke="white" fill="none"
                d="M 2 1 a 2 2 0 0 0 -2 2 v 10 a 2 2 0 0 0 2 2 h 4 a 2 2 0 0 0 1.519 -0.698 l 4.843 -5.651 a 1 1 0 0 0 0 -1.302 L 7.52 1.7 a 2 2 0 0 0 -1.519 -0.698 z" />
        </svg>
    `),o(w,"expandIcon",b`
        <svg fill="currentColor" viewBox="4 4 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M 16.003 18.626 l 7.081 -7.081 L 25 13.46 l -8.997 8.998 -9.003 -9 1.917 -1.916 z" />
        </svg>
    `),o(w,"flipflop",b`
        <svg  viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 2L10 14" stroke="white" stroke-width="2" stroke-linecap="round" />
            <path d="M6 2L2 14" stroke="white" stroke-width="2" stroke-linecap="round" />
            <path d="M6 2L10 14" stroke="white" stroke-opacity="0.5" stroke-width="2" stroke-linecap="round" />
        </svg>
    `),o(w,"forEachLoop",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M4 2C1.8 2 0 3.8 0 6V9C0 11.2 2 13 4 13H10V11H5C3.2 11 2 9.7 2 8V7C2 5.63882 2.76933 4.53408 4 4.14779V2ZM12 4C13.8 4 14 5.3 14 7V8C14 8.8 13.7 9.5 13.3 10L15.2 11.4C15.7 10.7 16 9.9 16 9V6C16 3.8 14.2 2 12 2V4Z" fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M8 16L13 12L8 8V16Z" fill="white" />
            <rect x="5" y="1" width="1" height="4" fill="white" />
            <rect x="7" y="1" width="1" height="4" fill="white" />
            <rect x="9" y="1" width="1" height="4" fill="white" />
            <rect x="11" y="2" width="1" height="2" fill="white" />
        </svg>
    `),o(w,"functionSymbol",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M9.72002 6.0699C9.88111 4.96527 10.299 3.9138 10.94 2.99991C10.94 2.99991 10.94 3.05991 10.94 3.08991C10.94 3.36573 11.0496 3.63026 11.2446 3.8253C11.4397 4.02033 11.7042 4.12991 11.98 4.12991C12.2558 4.12991 12.5204 4.02033 12.7154 3.8253C12.9105 3.63026 13.02 3.36573 13.02 3.08991C13.0204 2.90249 12.9681 2.71873 12.8691 2.5596C12.7701 2.40047 12.6283 2.27237 12.46 2.18991H12.37C11.8725 2.00961 11.3275 2.00961 10.83 2.18991C9.21002 2.63991 8.58002 4.99991 8.58002 4.99991L8.40002 5.1199H5.40002L5.15002 6.1199H8.27002L7.27002 11.4199C7.11348 12.0161 6.79062 12.5555 6.33911 12.9751C5.8876 13.3948 5.32607 13.6773 4.72002 13.7899C4.78153 13.655 4.81227 13.5081 4.81002 13.3599C4.81002 13.0735 4.69624 12.7988 4.4937 12.5962C4.29116 12.3937 4.01646 12.2799 3.73002 12.2799C3.44359 12.2799 3.16889 12.3937 2.96635 12.5962C2.76381 12.7988 2.65002 13.0735 2.65002 13.3599C2.66114 13.605 2.75692 13.8386 2.92104 14.021C3.08517 14.2033 3.30746 14.3231 3.55002 14.3599C7.91002 15.1999 8.55002 11.4499 8.55002 11.4499L9.55002 7.05991H12.55L12.8 6.05991H9.64002L9.72002 6.0699Z"
                fill="currentColor"
            />
        </svg>
    `),o(w,"gamepad",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill="white" d="m 15.2107 8.525 c -0.6619 -1.7207 -1.9856 -4.8978 -3.3094 -4.8978 c -1.9856 0 -1.9856 1.8532 -2.7799 1.8532 c -0.3971 0 -1.8532 0 -2.3827 0 c -0.7943 0 -0.7943 -1.8532 -2.6475 -1.8532 c -1.3238 0 -2.6475 3.0446 -3.3094 4.8978 c -1.059 3.3094 -1.1914 4.8979 1.1914 4.8979 c 2.6475 0 2.6475 -3.0445 5.9569 -3.0445 c 3.3094 0 3.4418 3.0445 5.9569 3.0445 c 2.5151 0 2.5151 -1.5885 1.3238 -4.8979 z m -8.472 0 h -1.3238 v 1.3238 h -1.3238 v -1.3238 h -1.3238 v -1.3238 h 1.3238 v -1.3238 h 1.3238 v 1.3238 h 1.3238 v 1.3238 z m 4.6331 1.5887 c -1.1914 0 -2.2504 -0.9268 -2.2504 -2.2505 c 0 -1.1913 0.9267 -2.2503 2.2504 -2.2503 c 1.3238 0 2.2504 0.9266 2.2504 2.2503 c 0 1.1915 -1.059 2.2505 -2.2504 2.2505 z m -0.0001 -2.9124 c -0.3971 0 -0.6619 0.2648 -0.6619 0.6619 c 0 0.3971 0.2648 0.6619 0.6619 0.6619 c 0.3971 0 0.6619 -0.2648 0.6619 -0.6619 c 0 -0.3971 -0.2648 -0.6619 -0.6619 -0.6619 z" />
        </svg>
    `),o(w,"genericPin",b`
        <svg width="16" height="12" viewBox="0 0 42 32" xmlns="http://www.w3.org/2000/svg">
            <circle class="ueb-pin-tofill" cx="16" cy="16" r="13" fill="black" stroke="currentColor" stroke-width="5" />
            <path fill="currentColor" d="M 34 6 L 34 26 L 42 16 Z" />
        </svg>
    `),o(w,"keyboard",b`
        <svg viewBox="0 -3 16 16" xmlns="http://www.w3.org/2000/svg">
            <path fill="white" d="M 1 10 H 15 c 0.2652 0 0.5195 -0.1054 0.707 -0.293 c 0.1875 -0.1875 0.293 -0.4418 0.293 -0.707 v -8 c 0 -0.2652 -0.1054 -0.5195 -0.293 -0.707 c -0.1875 -0.1875 -0.4418 -0.293 -0.707 -0.293 H 1 c -0.2652 0 -0.5195 0.1054 -0.707 0.293 c -0.1875 0.1875 -0.293 0.4418 -0.293 0.707 V 9 c 0 0.2652 0.1054 0.5195 0.293 0.707 c 0.1875 0.1875 0.4418 0.293 0.707 0.293 Z M 14 6 h -3 v -2 h 3 v 2 Z M 13 1 h 2 v 2 h -2 v -2 Z M 10 1 h 2 v 2 h -2 v -2 Z M 10 6 h -2 v -2 h 2 v 2 Z M 7 1 h 2 v 2 h -2 v -2 Z M 7 6 h -2 v -2 h 2 v 2 Z M 4 1 h 2 v 2 h -2 v -2 Z M 4 6 h -2 v -2 h 2 v 2 Z M 1 1 h 2 v 2 h -2 v -2 Z M 1 7 h 2 v 2 h -2 v -2 M 4 7 h 8 v 2 h -8 v -2 M 13 7 h 2 v 2 h -2 v -2 Z" />
        </svg>
    `),o(w,"loop",b`
        <svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <style>
                    .cls-1 {
                        fill: #fff;
                        fill-rule: evenodd;
                    }
                    .cls-2 {
                        fill: none;
                    }
                </style>
            </defs>
            <g id="Layer_2" data-name="Layer 2">
                <g id="Layer_4" data-name="Layer 4">
                    <path class="cls-1" d="M16,2H4A4,4,0,0,0,0,6v4a4.14,4.14,0,0,0,4,4H9v5l8-6L9,7v5H4.5A2.36,2.36,0,0,1,2,9.5v-3A2.36,2.36,0,0,1,4.5,4h11A2.36,2.36,0,0,1,18,6.5V9a3,3,0,0,1-.69,2l1.88,1.41A4,4,0,0,0,20,10V6A4,4,0,0,0,16,2Z" />
                    <rect class="cls-2" width="20" height="20" />
                </g>
            </g>
        </svg>
    `),o(w,"macro",b`
        <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 2.92L10 12.29L14.55 2.61C14.662 2.4259 14.8189 2.27332 15.0061 2.16661C15.1933 2.05989 15.4045 2.00256 15.62 2H19L18.66 2.89C18.66 2.89 17.17 3.04 17.11 3.63C17.05 4.22 16 15.34 15.93 16.13C15.86 16.92 17.33 17.13 17.33 17.13L17.17 17.99H13.84C13.7241 17.9764 13.612 17.9399 13.5103 17.8826C13.4086 17.8253 13.3194 17.7484 13.2477 17.6562C13.176 17.5641 13.1234 17.4586 13.0929 17.346C13.0624 17.2333 13.0546 17.1157 13.07 17L14.43 5.52L10 14.57C9.8 15.03 9.07 15.72 8.63 15.71H7.75L6.05 4.86L3.54 17.39C3.51941 17.5514 3.44327 17.7005 3.32465 17.8118C3.20603 17.9232 3.05235 17.9897 2.89 18H1L1.11 17.09C1.11 17.09 2.21 17.09 2.3 16.69C2.39 16.29 5.3 3.76 5.41 3.32C5.52 2.88 4.19 2.81 4.19 2.81L4.46 2H6.62C7.09 2 7.92 2.38 8 2.92Z" fill="white" />
        </svg>
    `),o(w,"mapPin",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 0H0V4H4V0Z" fill="currentColor" />
            <path d="M4 6H0V10H4V6Z" fill="currentColor" />
            <path d="M4 12H0V16H4V12Z" fill="currentColor" />
            <path d="M16 0H6V4H16V0Z" fill="white" />
            <path d="M16 6H6V10H16V6Z" fill="white" />
            <path d="M16 12H6V16H16V12Z" fill="white" />
        </svg>
    `),o(w,"makeArray",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 4H13V6H15V4Z" fill="white" />
            <path d="M15 7H13V9H15V7Z" fill="white" />
            <path d="M15 10H13V12H15V10Z" fill="white" />
            <path d="M12 4H10V6H12V4Z" fill="white" />
            <path d="M12 7H10V9H12V7Z" fill="white" />
            <path d="M12 10H10V12H12V10Z" fill="white" />
            <path d="M9 4H7V6H9V4Z" fill="white" />
            <path d="M9 7H7V9H9V7Z" fill="white" />
            <path d="M9 10H7V12H9V10Z" fill="white" />
            <path d="M3 4L1 1.99995L2 1L4 3L5 1.99995L5 5L2 5L3 4Z" fill="white" />
            <path d="M4 13L1.99995 15L1 14L3 12L1.99995 11L5 11L5 14L4 13Z" fill="white" />
        </svg>
    `),o(w,"makeMap",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 4H10V6H15V4Z" fill="white" />
            <path d="M15 7H10V9H15V7Z" fill="white" />
            <path d="M15 10H10V12H15V10Z" fill="white" />
            <path d="M9 4H7V6H9V4Z" fill="white" />
            <path d="M9 7H7V9H9V7Z" fill="white" />
            <path d="M9 10H7V12H9V10Z" fill="white" />
            <path d="M3 4L1 1.99995L2 1L4 3L5 1.99995L5 5L2 5L3 4Z" fill="white" />
            <path d="M4 13L1.99995 15L1 14L3 12L1.99995 11L5 11L5 14L4 13Z" fill="white" />
        </svg>
    `),o(w,"makeSet",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 4L1 1.99995L2 1L4 3L5 1.99995L5 5L2 5L3 4Z" fill="white" />
            <path d="M4 13L1.99995 15L1 14L3 12L1.99995 11L5 11L5 14L4 13Z" fill="white" />
            <path d="M6 8.00205V7.43062C6.40147 7.37088 6.79699 7.28299 7.18286 7.16777C7.30414 7.11578 7.40659 7.03462 7.47858 6.93348C7.57165 6.81021 7.63108 6.66933 7.65215 6.52205C7.6832 6.31181 7.69609 6.09976 7.69072 5.88777C7.67539 5.53753 7.70341 5.18685 7.77429 4.84205C7.81918 4.66059 7.92446 4.49533 8.07643 4.36777C8.26269 4.22923 8.48285 4.13138 8.71929 4.08205C9.01252 4.02392 9.31249 3.99706 9.61287 4.00205H9.85715V4.57348C9.66398 4.58307 9.47806 4.64211 9.32179 4.7435C9.16552 4.84489 9.04559 4.9843 8.97644 5.14491C8.92057 5.24999 8.89621 5.36613 8.90572 5.48205C8.90572 5.64205 8.90572 5.95062 8.86715 6.40205C8.85805 6.6136 8.81697 6.8231 8.74501 7.02491C8.69216 7.17345 8.60697 7.3113 8.49429 7.43062C8.33135 7.64 8.1415 7.83177 7.92858 8.00205" fill="white" />
            <path d="M7.92858 8.00195C8.14537 8.18165 8.33547 8.3852 8.49429 8.60767C8.60419 8.72229 8.6892 8.85404 8.74501 8.99624C8.81697 9.19805 8.85805 9.40755 8.86715 9.6191C8.89286 10.0724 8.90572 10.381 8.90572 10.5448C8.89679 10.6607 8.92112 10.7767 8.97644 10.882C9.05077 11.0375 9.17272 11.1714 9.32842 11.2683C9.48411 11.3653 9.66731 11.4215 9.85715 11.4305V12.002H9.61287C9.31086 12.0112 9.0087 11.9881 8.71286 11.9334C8.47744 11.8816 8.25788 11.784 8.07001 11.6477C7.91926 11.5193 7.81421 11.3543 7.76786 11.1734C7.69764 10.8285 7.66962 10.4779 7.68429 10.1277C7.69081 9.91186 7.67791 9.69593 7.64572 9.48195C7.62465 9.33468 7.56522 9.1938 7.47215 9.07052C7.40016 8.96939 7.29771 8.88822 7.17643 8.83624C6.79266 8.72131 6.3993 8.63342 6 8.57338V8.00195" fill="white" />
            <path d="M13.0712 8.00197C12.8582 7.83169 12.6684 7.63992 12.5054 7.43054C12.3942 7.31461 12.3091 7.18076 12.2547 7.03626C12.1828 6.83445 12.1417 6.62495 12.1326 6.4134C12.1326 5.96197 12.094 5.6534 12.094 5.4934C12.1058 5.37369 12.0814 5.25334 12.0233 5.14483C11.9541 4.98422 11.8342 4.84481 11.6779 4.74342C11.5217 4.64203 11.3357 4.58299 11.1426 4.5734V4.00197H11.3869C11.6889 3.99277 11.991 4.01579 12.2869 4.07054C12.5233 4.11987 12.7435 4.21772 12.9297 4.35626C13.0817 4.48382 13.187 4.64908 13.2319 4.83054C13.3027 5.17534 13.3308 5.52602 13.3154 5.87626C13.3094 6.09206 13.3223 6.30795 13.354 6.52197C13.3751 6.66925 13.4345 6.81013 13.5276 6.9334C13.5996 7.03454 13.702 7.1157 13.8233 7.16769C14.2071 7.28262 14.6004 7.37051 14.9997 7.43054V8.00197" fill="white" />
            <path d="M14.9997 8.00195V8.57338C14.5983 8.63312 14.2027 8.72102 13.8169 8.83624C13.6956 8.88822 13.5931 8.96939 13.5212 9.07052C13.4281 9.1938 13.3686 9.33468 13.3476 9.48195C13.3154 9.69593 13.3025 9.91186 13.309 10.1277C13.3237 10.4779 13.2957 10.8285 13.2254 11.1734C13.1791 11.3543 13.074 11.5193 12.9233 11.6477C12.7354 11.784 12.5159 11.8816 12.2804 11.9334C11.9846 11.9881 11.6824 12.0112 11.3804 12.002H11.1426V11.4305C11.3353 11.4196 11.5205 11.36 11.6765 11.2588C11.8325 11.1576 11.9528 11.0189 12.0233 10.8591C12.0786 10.7539 12.1029 10.6378 12.094 10.522C12.094 10.3543 12.1069 10.0458 12.1326 9.59624C12.1417 9.38469 12.1828 9.17519 12.2547 8.97338C12.3105 8.83119 12.3955 8.69943 12.5054 8.58481C12.666 8.37037 12.856 8.17457 13.0712 8.00195" fill="white" />
        </svg>
    `),o(w,"makeStruct",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 4L1 1.99995L2 1L4 3L5 1.99995L5 5L2 5L3 4Z" fill="white" />
            <path d="M4 13L1.99995 15L1 14L3 12L1.99995 11L5 11L5 14L4 13Z" fill="white" />
            <path d="M12.975 6H8.025C6.90662 6 6 6.90662 6 8.025V8.475C6 9.59338 6.90662 10.5 8.025 10.5H12.975C14.0934 10.5 15 9.59338 15 8.475V8.025C15 6.90662 14.0934 6 12.975 6Z" fill="white" />
        </svg>
    `),o(w,"metasoundFunction",b`
        <svg viewBox="-8 1 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill="currentColor" d="M7.14453 3.32422C7.14453 3.53255 7.07292 3.70833 6.92969 3.85156C6.78646 3.98828 6.61068 4.05664 6.40234 4.05664C6.19401 4.05664 6.00846 3.98828 5.8457 3.85156C5.68945 3.71484 5.61133 3.53581 5.61133 3.31445C5.61133 3.0931 5.69922 2.91081 5.875 2.76758C5.82943 2.61784 5.7513 2.49414 5.64063 2.39648C5.52995 2.29232 5.39323 2.24023 5.23047 2.24023C5.02214 2.24023 4.85612 2.31185 4.73242 2.45508C4.61523 2.5918 4.52734 2.76107 4.46875 2.96289C4.41016 3.1582 4.37435 3.36328 4.36133 3.57812C4.34831 3.79297 4.3418 3.972 4.3418 4.11523C4.3418 4.42773 4.35482 4.74023 4.38086 5.05273C4.4069 5.35872 4.4362 5.66797 4.46875 5.98047H6.38281V6.86914H4.61523L5.13281 11.3418C5.14583 11.4915 5.15885 11.6413 5.17188 11.791C5.19141 11.9473 5.20117 12.1003 5.20117 12.25C5.20117 12.5885 5.1556 12.9206 5.06445 13.2461C4.97331 13.5781 4.83333 13.8711 4.64453 14.125C4.46224 14.3854 4.22786 14.5937 3.94141 14.75C3.66146 14.9128 3.33268 14.9941 2.95508 14.9941C2.69466 14.9941 2.44401 14.9453 2.20313 14.8477C1.96875 14.7565 1.75716 14.6263 1.56836 14.457C1.38607 14.2878 1.23958 14.0859 1.12891 13.8516C1.01823 13.6237 0.962891 13.3763 0.962891 13.1094C0.962891 12.8945 1.03451 12.7187 1.17773 12.582C1.32096 12.4453 1.49675 12.377 1.70508 12.377C1.80273 12.377 1.89714 12.3932 1.98828 12.4258C2.08594 12.4648 2.17057 12.5169 2.24219 12.582C2.32031 12.6471 2.37891 12.722 2.41797 12.8066C2.46354 12.8978 2.48633 12.9954 2.48633 13.0996C2.48633 13.3079 2.4082 13.4902 2.25195 13.6465C2.29753 13.7897 2.37565 13.9102 2.48633 14.0078C2.59701 14.112 2.72721 14.1641 2.87695 14.1641C3.05273 14.1641 3.19596 14.1087 3.30664 13.998C3.42383 13.8939 3.51497 13.7637 3.58008 13.6074C3.64518 13.4577 3.6875 13.2949 3.70703 13.1191C3.73307 12.9499 3.74609 12.8001 3.74609 12.6699C3.74609 12.4225 3.72982 12.1751 3.69727 11.9277C3.67122 11.6803 3.63867 11.4329 3.59961 11.1855L3.58984 11.1758L3.0625 6.86914H1.60742V5.98047H2.96484C2.93229 5.73307 2.90625 5.48893 2.88672 5.24805C2.8737 5.00716 2.86719 4.76302 2.86719 4.51562C2.86719 4.15104 2.903 3.7832 2.97461 3.41211C3.04622 3.04102 3.16992 2.70898 3.3457 2.41602C3.52148 2.11654 3.7526 1.8724 4.03906 1.68359C4.33203 1.49479 4.69661 1.40039 5.13281 1.40039C5.39974 1.40039 5.65365 1.44922 5.89453 1.54687C6.13542 1.64453 6.34701 1.78125 6.5293 1.95703C6.7181 2.1263 6.86784 2.32812 6.97852 2.5625C7.08919 2.79687 7.14453 3.05078 7.14453 3.32422Z" />
        </svg>
    `),o(w,"mouse",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd" d="M8.85714 8.34043H14L13.9143 6.6383H8.85714V0H7.14286V6.6383H2.08571L2 8.34043H7.14286H8.85714Z" fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.85714 0C11 0.595745 13.4 3.31915 13.9143 6.6383H8.85714V0ZM7.14286 0C5 0.595745 2.6 3.31915 2.08571 6.6383H7.14286V0ZM8.85714 8.34043H7.14286H2C2 12.5957 3.02857 16 8 16C12.9714 16 14 12.5957 14 8.34043H8.85714Z" fill="white" />
        </svg>
    `),o(w,"node",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="16" height="15" rx="1" fill="white" fill-opacity="0.5" />
            <rect x="0.5" y="0.5" width="15" height="14" rx="0.5" stroke="white" />
            <rect x="1" width="14" height="5" fill="white" />
        </svg>
    `),o(w,"operationPin",b`
        <svg width="14" height="14" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
            <circle class="ueb-pin-tostroke" cx="16" cy="16" r="14" stroke="currentColor" stroke-width="4" />
            <circle cx="16" cy="16" r="9.5" fill="#817a7a" />
        </svg>
    `),o(w,"pcgStackPin",b`
        <svg width="18" height="22" viewBox="4 0 28 36" xmlns="http://www.w3.org/2000/svg">
            <path stroke="black" stroke-width="1" fill="rgba(var(--ueb-pin-color-rgb), 0.5)"  d="M25.8,32.2V17.5c0-1.7,1.3-3.1,3-3.1s3,1.3,3,3.1v14.7c0,1.8-1.3,3.2-3,3.2C27,35.5,25.8,34,25.8,32.2z" />
            <path stroke="black" stroke-width="1" fill="rgba(var(--ueb-pin-color-rgb), 0.75)" d="M18.8,30.1V11.8c0-2.4,1.8-4.3,4-4.3s4,1.9,4,4.3v18.4c0,2.4-1.8,4.3-4,4.3C20.5,34.5,18.8,32.5,18.8,30.1z" />
            <path stroke="black" stroke-width="1" fill="currentColor" d="M21.3,6.4v21.3c0,3.2-2.4,5.8-5.5,5.8s-5.5-2.5-5.5-5.8V6.3c0-3.2,2.4-5.8,5.5-5.8C18.8,0.5,21.2,3,21.3,6.4z" />
            <circle class="ueb-pin-tofill ueb-pin-tostroke" stroke="currentColor" stroke-width="1" cx="10.2" cy="9" r="6" />
            <circle class="ueb-pin-tofill ueb-pin-tostroke" stroke="currentColor" stroke-width="1" cx="10.2" cy="17" r="6" />
            <circle class="ueb-pin-tofill ueb-pin-tostroke" stroke="currentColor" stroke-width="1" cx="10.2" cy="25" r="6" />
        </svg>
    `),o(w,"pcgPin",b`
        <svg class="ueb-pin-reflect-output" width="12" height="20" viewBox="8 0 20 36" xmlns="http://www.w3.org/2000/svg">
            <path stroke="black" stroke-width="1" fill="currentColor" d="M21.2,34.5c-3.1,0-5.5-2.6-5.5-5.8V7.3c0-3.3,2.4-5.8,5.5-5.8s5.5,2.6,5.5,5.8v21.3C26.8,31.9,24.3,34.5,21.2,34.5z" />
            <circle class="ueb-pin-tofill ueb-pin-tostroke" stroke="currentColor" stroke-width="1" cx="15.8" cy="10" r="6" />
            <circle class="ueb-pin-tofill ueb-pin-tostroke" stroke="currentColor" stroke-width="1" cx="15.8" cy="18" r="6" />
            <circle class="ueb-pin-tofill ueb-pin-tostroke" stroke="currentColor" stroke-width="1" cx="15.8" cy="26" r="6" />
        </svg>
    `),o(w,"pcgParamPin",b`
        <svg class="ueb-pin-reflect-output" width="18" height="12" viewBox="8 8 19 21" xmlns="http://www.w3.org/2000/svg">
            <path class="ueb-pin-tofill" stroke="currentcolor" stroke-width="1" d="M8,18c-2.5,0-4.5-2-4.5-4.5S5.5,9,8,9h20c2.5,0,4.5,2,4.5,4.5S30.5,18,28,18H8z" />
            <path fill="currentColor" d="M31,27.5H13c-0.5,0-1-0.4-1-1v-4c0-0.5,0.4-1,1-1h18c0.5,0,1,0.4,1,1v4C32,27.1,31.6,27.5,31,27.5z" />
        </svg>
    `),o(w,"pcgSpatialPin",b`
        <svg width="14" height="16" viewBox="5 4 28 28" xmlns="http://www.w3.org/2000/svg">
            <path stroke="#ffffff" stroke-width="1" fill="#808080" d="M20.5,33h-10c-2.8,0-5-2.2-5-5V8c0-2.8,2.2-5,5-5h10c2.8,0,5,2.2,5,5v20C25.5,30.8,23.3,33,20.5,33z" />
            <circle class="ueb-pin-tofill" stroke="#ffffff" stroke-width="1" fill="#202020" cx="23.7" cy="18" r="10" />
        </svg>
    `),o(w,"plusCircle",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M8.00016 10.6667V5.33334M5.3335 8H10.6668M8.00016 1.33334C4.31826 1.33334 1.3335 4.3181 1.3335 8C1.3335 11.6819 4.31826 14.6667 8.00016 14.6667C11.6821 14.6667 14.6668 11.6819 14.6668 8C14.6668 4.3181 11.6821 1.33334 8.00016 1.33334Z" />
        </svg>
    `),o(w,"questionMark",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 15C9.10456 15 10 14.1046 10 13C10 11.8954 9.10456 11 8 11C6.89544 11 6 11.8954 6 13C6 14.1046 6.89544 15 8 15Z" fill="white" />
            <path d="M5 4.86697C5.15 3.33619 6.5 2.26465 8 2.26465C9.65 2.26465 11 3.64235 11 5.3262C11 7.01005 8 7.92852 8 9.00006" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
    `),o(w,"referencePin",b`
        <svg width="12" height="12" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
            <polygon class="ueb-pin-tofill" points="4 16 16 4 28 16 16 28" stroke="currentColor" stroke-width="5" />
        </svg>
    `),o(w,"reject",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path stroke="red" stroke-width="2" stroke-miterlimit="10" d="M12.5 3.5L3.5 12.5" />
            <path fill="red" d="M8 2C11.3 2 14 4.7 14 8C14 11.3 11.3 14 8 14C4.7 14 2 11.3 2 8C2 4.7 4.7 2 8 2ZM8 0.5C3.9 0.5 0.5 3.9 0.5 8C0.5 12.1 3.9 15.5 8 15.5C12.1 15.5 15.5 12.1 15.5 8C15.5 3.9 12.1 0.5 8 0.5Z" />
        </svg>
    `),o(w,"setPin",b`
        <svg width="16" height="16" viewBox="2 2 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 7.99956V6.99956C1.62451 6.89501 2.23976 6.7412 2.84 6.53956C3.02865 6.44859 3.18802 6.30655 3.3 6.12956C3.44478 5.91383 3.53723 5.6673 3.57 5.40956C3.6183 5.04164 3.63836 4.67055 3.63 4.29956C3.60615 3.68664 3.64974 3.07296 3.76 2.46956C3.82982 2.152 3.99359 1.86279 4.23 1.63956C4.51974 1.39713 4.86221 1.22589 5.23 1.13956C5.68612 1.03782 6.15275 0.990826 6.62 0.999563H7V1.99956C6.69952 2.01634 6.4103 2.11967 6.16722 2.2971C5.92414 2.47453 5.73757 2.71849 5.63 2.99956C5.5431 3.18346 5.5052 3.3867 5.52 3.58956C5.52 3.86956 5.52 4.40956 5.46 5.19956C5.44584 5.56977 5.38194 5.9364 5.27 6.28956C5.18779 6.5495 5.05527 6.79074 4.88 6.99956C4.62654 7.36597 4.33121 7.70157 4 7.99956" fill="currentColor" />
            <path d="M4 7.99951C4.33723 8.31397 4.63295 8.67019 4.88 9.05951C5.05095 9.2601 5.18319 9.49067 5.27 9.73951C5.38194 10.0927 5.44584 10.4593 5.46 10.8295C5.5 11.6228 5.52 12.1628 5.52 12.4495C5.5061 12.6523 5.54395 12.8553 5.63 13.0395C5.74563 13.3117 5.93533 13.546 6.17752 13.7157C6.41972 13.8854 6.70468 13.9837 7 13.9995V14.9995H6.62C6.15021 15.0156 5.68019 14.9753 5.22 14.8795C4.85378 14.7889 4.51224 14.6181 4.22 14.3795C3.98551 14.1548 3.8221 13.8662 3.75 13.5495C3.64077 12.946 3.59718 12.3324 3.62 11.7195C3.63014 11.3418 3.61007 10.964 3.56 10.5895C3.52723 10.3318 3.43478 10.0852 3.29 9.86951C3.17802 9.69252 3.01865 9.55048 2.83 9.45951C2.23302 9.25838 1.62113 9.10457 1 8.99951V7.99951" fill="currentColor" />
            <path d="M12 7.99955C11.6688 7.70156 11.3735 7.36596 11.12 6.99955C10.947 6.79667 10.8146 6.56242 10.73 6.30955C10.6181 5.95638 10.5542 5.58976 10.54 5.21954C10.54 4.42954 10.48 3.88955 10.48 3.60955C10.4983 3.40004 10.4604 3.18944 10.37 2.99955C10.2624 2.71847 10.0759 2.47452 9.83278 2.29708C9.5897 2.11965 9.30048 2.01632 9 1.99955V0.999545H9.38C9.84979 0.983442 10.3198 1.02373 10.78 1.11955C11.1478 1.20587 11.4903 1.37711 11.78 1.61955C12.0164 1.84278 12.1802 2.13198 12.25 2.44955C12.3603 3.05294 12.4039 3.66662 12.38 4.27955C12.3706 4.6572 12.3907 5.03501 12.44 5.40954C12.4728 5.66728 12.5652 5.91382 12.71 6.12955C12.822 6.30653 12.9813 6.44858 13.17 6.53955C13.767 6.74067 14.3789 6.89448 15 6.99955V7.99955" fill="currentColor" />
            <path d="M15 7.99951V8.99951C14.3755 9.10406 13.7602 9.25787 13.16 9.45951C12.9713 9.55048 12.812 9.69252 12.7 9.86951C12.5552 10.0852 12.4628 10.3318 12.43 10.5895C12.3799 10.964 12.3599 11.3418 12.37 11.7195C12.3928 12.3324 12.3492 12.946 12.24 13.5495C12.1679 13.8662 12.0045 14.1548 11.77 14.3795C11.4778 14.6181 11.1362 14.7889 10.77 14.8795C10.3098 14.9753 9.83979 15.0156 9.37 14.9995H9V13.9995C9.2998 13.9803 9.58791 13.876 9.83056 13.6989C10.0732 13.5218 10.2603 13.2792 10.37 12.9995C10.456 12.8153 10.4939 12.6123 10.48 12.4095C10.48 12.1162 10.5 11.5762 10.54 10.7895C10.5542 10.4193 10.6181 10.0527 10.73 9.69951C10.8168 9.45067 10.9491 9.2201 11.12 9.01951C11.3698 8.64424 11.6654 8.30159 12 7.99951" fill="currentColor" />
        </svg>
    `),o(w,"select",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="1" y="2" width="6" height="2" fill="white" />
            <rect x="10" y="7" width="3" height="2" fill="white" />
            <path d="M12 5L15 8L12 11V5Z" fill="white" />
            <rect x="1" y="7" width="8" height="2" fill="white" />
            <rect x="5" y="4" width="2" height="9" fill="white" />
            <rect x="1" y="12" width="6" height="2" fill="white" />
        </svg>
    `),o(w,"sequence",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="2" width="5" height="2" fill="white" />
            <rect y="7" width="8" height="2" fill="white" />
            <rect x="3" y="4" width="2" height="9" fill="white" />
            <rect x="3" y="12" width="5" height="2" fill="white" />
            <rect x="10" y="2" width="6" height="2" fill="white" />
            <rect x="10" y="7" width="4" height="2" fill="white" />
            <rect x="10" y="12" width="2" height="2" fill="white" />
        </svg>
    `),o(w,"sound",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 5H3L7 1V15L3 11H0V5Z" fill="white" />
            <path opacity="0.5" d="M9 1C13 2.7 15 5.4 15 8C15 10.6 13 13.3 9 15C11.5 12.8 12.7 10.4 12.7 8C12.7 5.6 11.5 3.2 9 1Z" fill="white" />
            <path opacity="0.5" d="M9 5C10.3 5.7 11 6.9 11 8C11 9.1 10.3 10.3 9 11C9.8 10 9.8 6 9 5Z" fill="white" />
        </svg>
    `),o(w,"spawnActor",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10.38 12.62L7 11.5L10.38 10.38L11.5 7L12.63 10.38L16 11.5L12.63 12.62L11.5 16L10.38 12.62Z" fill="white" />
            <path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd" d="M4 14H2L3 10L0 14V16H10L9 14H4Z" fill="white" />
            <path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd" d="M2 6C1.9996 7.10384 2.30372 8.1864 2.87889 9.12854C3.45406 10.0707 4.27798 10.8359 5.26 11.34L9 9L11.5 5L13.78 7.6C13.9251 7.07902 13.9991 6.54081 14 6C14 4.4087 13.3679 2.88258 12.2426 1.75736C11.1174 0.63214 9.5913 0 8 0C6.4087 0 4.88258 0.63214 3.75736 1.75736C2.63214 2.88258 2 4.4087 2 6V6Z" fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.22005 0.810059H8.00005C6.62265 0.810056 5.30153 1.35654 4.32663 2.32957C3.35172 3.30259 2.8027 4.62266 2.80005 6.00006C2.79984 7.03987 3.11257 8.05567 3.69756 8.91532C4.28255 9.77497 5.11271 10.4387 6.08005 10.8201L7.17005 10.1401C6.16687 9.86642 5.28119 9.27116 4.64894 8.44562C4.01669 7.62008 3.6728 6.60989 3.67005 5.57006C3.66886 4.34318 4.14143 3.16323 4.98917 2.27635C5.83692 1.38948 6.99437 0.864185 8.22005 0.810059V0.810059Z" fill="white" />
            <path d="M10.0401 5.16001C10.7028 5.16001 11.2401 4.62275 11.2401 3.96001C11.2401 3.29727 10.7028 2.76001 10.0401 2.76001C9.37735 2.76001 8.84009 3.29727 8.84009 3.96001C8.84009 4.62275 9.37735 5.16001 10.0401 5.16001Z" fill="white" />
        </svg>
    `),o(w,"switch",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="2" width="6" height="2" fill="white" />
            <rect y="7" width="9" height="2" fill="white" />
            <rect x="3" y="4" width="2" height="9" fill="white" />
            <rect x="3" y="12" width="6" height="2" fill="white" />
            <rect x="10" y="2" width="3" height="2" fill="white" />
            <path d="M12 0L15 3L12 6V0Z" fill="white" />
        </svg>
    `),o(w,"timer",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M8 0.5C3.9 0.5 0.5 3.9 0.5 8C0.5 12.1 3.9 15.5 8 15.5C12.1 15.5 15.5 12.1 15.5 8C15.5 3.9 12.1 0.5 8 0.5ZM8 14.1C4.6 14.1 1.9 11.4 1.9 8C1.9 4.6 4.6 1.90002 8 1.90002C11.4 1.90002 14.1 4.6 14.1 8C14.1 11.4 11.4 14.1 8 14.1Z" fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.60003 3.19995H7.40002V8.49994L10.5 11.4999L11.4 10.5999L8.60003 7.99994V3.19995Z" fill="white" />
        </svg>
    `),o(w,"touchpad",b`
        <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path  fill="white" fill-rule="evenodd" clip-rule="evenodd" d="M13 0H3C2.4 0 2 0.4 2 1V15C2 15.6 2.4 16 3 16H13C13.6 16 14 15.6 14 15V1C14 0.4 13.6 0 13 0ZM8 15.5C7.2 15.5 6.5 14.8 6.5 14C6.5 13.2 7.2 12.5 8 12.5C8.8 12.5 9.5 13.2 9.5 14C9.5 14.8 8.8 15.5 8 15.5ZM13 12H3V1H13V12Z" />
            <path opacity="0.5" d="M13 1H3V12H13V1Z" fill="white" />
        </svg>
    `);class te{static makeSuccess(t,e,i=null,s=0){return{status:!0,value:e,position:t,bestParser:i,bestPosition:s}}static makeFailure(t=0,e=null,i=0){return{status:!1,value:null,position:t,bestParser:e,bestPosition:i}}static makeContext(t=null,e=""){return{parsernostrum:t,input:e,highlighted:null}}static makePathNode(t,e=0,i=null){return{parent:i,current:t,index:e}}}const _e=class _e{constructor(){o(this,"Self")}static frame(t,e="",i=""){e=t?"[ "+e+" ]":"";let s=t.split(`
`);const r=Math.max(...s.map(d=>d.length)),n=r<e.length?" ".repeat(e.length-r):"";for(let d=0;d<s.length;++d)s[d]=i+"| "+s[d]+" ".repeat(r-s[d].length)+n+" |";e.length<r&&(e=e+"─".repeat(r-e.length));const c="┌─"+e+"─┐",h=i+"└─"+"─".repeat(e.length)+"─┘";return s=[c,...s,h],s.join(`
`)}makePath(t,e){return{current:this,parent:t,index:e}}isHighlighted(t,e){if(t.highlighted instanceof _e)return t.highlighted===this;if(!t.highlighted||!(e!=null&&e.current))return!1;let i,s;for(i=e,s=t.highlighted;i.current&&s.current;i=i.parent,s=s.parent)if(i.current!==s.current||i.index!==s.index)return!1;return!i.current&&!s.current}isVisited(t){if(!t)return!1;for(t=t.parent;t!=null;t=t.parent)if(t.current===this)return!0;return!1}parse(t,e,i,s){return null}toString(t=te.makeContext(null,""),e="",i=null,s=0){if(i=this.makePath(i,s),this.isVisited(i))return"<...>";const r=this.isVisited(i),n=this.isHighlighted(t,i);let c=r?"<...>":this.doToString(t,n?"":e,i,s);return n&&(c=_e.frame(c,_e.highlight,e)),c}doToString(t,e,i,s){return`${this.constructor.name} does not implement toString()`}};o(_e,"indentation","    "),o(_e,"highlight","Last valid parser");let q=_e;var He;class Wl extends q{constructor(e){super();p(this,He);m(this,He,e)}get value(){return a(this,He)}parse(e,i,s,r){s=this.makePath(s,r);const n=i+a(this,He).length,c=e.input.substring(i,n);return a(this,He)===c?te.makeSuccess(n,a(this,He),s,n):te.makeFailure()}doToString(e,i,s,r){return`"${this.value.replaceAll(`
`,"\\n").replaceAll('"','\\"')}"`}}He=new WeakMap;const gn=class gn extends q{parse(t,e,i,s){return i=this.makePath(i,s),te.makeSuccess(e,"",i,0)}doToString(t,e,i,s){return"<SUCCESS>"}};o(gn,"instance",new gn);let rn=gn;var ue;class Yo extends q{constructor(...e){super();p(this,ue);m(this,ue,e)}get parsers(){return a(this,ue)}parse(e,i,s,r){s=this.makePath(s,r);const n=te.makeSuccess(0,"");for(let c=0;c<a(this,ue).length;++c){const h=a(this,ue)[c].parse(e,i,s,c);if(h.bestPosition>n.bestPosition&&(n.bestParser=h.bestParser,n.bestPosition=h.bestPosition),h.status)return n.value=h.value,n.position=h.position,n}return n.status=!1,n.value=null,n}doToString(e,i,s,r){if(a(this,ue).length===2&&a(this,ue)[1]instanceof rn){let h=a(this,ue)[0].toString(e,i,s,0);return a(this,ue)[0]instanceof Wl||(h="<"+h+">"),h+="?",h}const n=i+q.indentation;return`ALT<
`+n+a(this,ue).map((h,d)=>h.toString(e,n+" ".repeat(d===0?0:q.indentation.length-2),s,d)).join(`
`+n+"| ")+`
`+i+">"}}ue=new WeakMap;var vt,Ns;class Uo extends q{constructor(e,i){super();p(this,vt);p(this,Ns);m(this,vt,e),m(this,Ns,i)}get parser(){return a(this,vt)}parse(e,i,s,r){s=this.makePath(s,r);const n=a(this,vt).parse(e,i,s,0);if(!n.status)return n;const c=a(this,Ns).call(this,n.value,e.input,n.position).getParser().parse(e,n.position,s,0);return n.bestPosition>c.bestPosition&&(c.bestParser=n.bestParser,c.bestPosition=n.bestPosition),c}doToString(e,i,s,r){return a(this,vt).toString(e,i,s,0)+" => chained<f()>"}}vt=new WeakMap,Ns=new WeakMap;const fn=class fn extends q{parse(t,e,i,s){return te.makeFailure()}doToString(t,e,i,s){return"<FAILURE>"}};o(fn,"instance",new fn);let ua=fn;var Fe,xs;class Xo extends q{constructor(e,i){super();p(this,Fe);p(this,xs,"");m(this,Fe,e),m(this,xs,i)}get parser(){return a(this,Fe)}makePath(e,i){return e}parse(e,i,s,r){return this.parse=a(this,Fe).parse.bind(a(this,Fe)),this.parse(e,i,s,r)}doToString(e,i,s,r){let n=a(this,Fe).toString(e,"",s,r);return n=q.frame(n,a(this,xs),i),n}}Fe=new WeakMap,xs=new WeakMap;var Ps,ce;class qo extends q{constructor(e){super();p(this,Ps);p(this,ce);m(this,Ps,e)}makePath(e,i){return e}isHighlighted(e,i){if(super.isHighlighted(e,i)){const s={parent:i,parser:a(this,ce),index:0};e.highlighted=e.highlighted instanceof q?a(this,ce):s}return!1}resolve(){return a(this,ce)||m(this,ce,a(this,Ps).call(this).getParser()),a(this,ce)}parse(e,i,s,r){return this.resolve(),this.parse=a(this,ce).parse.bind(a(this,ce)),this.parse(e,i,s,r)}doToString(e,i,s,r){return this.resolve(),this.doToString=a(this,ce).toString.bind(a(this,ce)),this.doToString(e,i,s,r)}}Ps=new WeakMap,ce=new WeakMap;var wt,St;const bn=class bn extends q{constructor(e,i){super();p(this,wt);p(this,St);m(this,wt,e),m(this,St,i)}get parser(){return a(this,wt)}get type(){return a(this,St)}parse(e,i,s,r){s=this.makePath(s,r);let n=a(this,wt).parse(e,i,s,0);return n=n.status==(a(this,St)===bn.Type.POSITIVE_AHEAD)?te.makeSuccess(i,"",s,i):te.makeFailure(),n}doToString(e,i,s,r){return"("+a(this,St)+a(this,wt).toString(e,i,s,0)+")"}};wt=new WeakMap,St=new WeakMap,o(bn,"Type",{NEGATIVE_AHEAD:"?!",NEGATIVE_BEHIND:"?<!",POSITIVE_AHEAD:"?=",POSITIVE_BEHIND:"?<="});let nn=bn;var Fl,zl,jl,Ct,ks,As,Wt,Ms;const me=class me extends q{constructor(e,i){super();p(this,Ct);p(this,ks);p(this,As);m(this,Ct,e),m(this,ks,new RegExp(`^(?:${e.source})`,e.flags)),m(this,As,i)}get regexp(){return a(this,Ct)}parse(e,i,s,r){s=this.makePath(s,r);const n=a(this,ks).exec(e.input.substring(i));return n&&(i+=n[0].length),n?te.makeSuccess(i,a(this,As).call(this,n),s,i):te.makeFailure()}doToString(e,i,s,r){var h;let n="/"+a(this,Ct).source+"/";const c=(h=Object.entries(me.common).find(([d,f])=>f.source===a(this,Ct).source))==null?void 0:h[0];return c&&(n="P."+c),n}};Ct=new WeakMap,ks=new WeakMap,As=new WeakMap,Wt=new WeakMap,Ms=new WeakMap,p(me,Wt,e=>String.raw`[^${e}\\]*(?:\\.[^${e}\\]*)*`),p(me,Ms,/[-\+]?(?:\d*\.)?\d+/),o(me,"common",{number:new RegExp(a(me,Ms).source+String.raw`(?!\.)`),numberInteger:/[\-\+]?\d+(?!\.\d)/,numberNatural:/\d+/,numberExponential:new RegExp(a(me,Ms).source+String.raw`(?:[eE][\+\-]?\d+)?(?!\.)`),numberUnit:/\+?(?:0(?:\.\d+)?|1(?:\.0+)?)(?![\.\d])/,numberByte:/0*(?:25[0-5]|2[0-4]\d|1?\d?\d)(?!\d|\.)/,whitespace:/\s+/,whitespaceOpt:/\s*/,whitespaceInline:/[^\S\n]+/,whitespaceInlineOpt:/[^\S\n]*/,whitespaceMultiline:/\s*?\n\s*/,doubleQuotedString:new RegExp(`"(${a(Fl=me,Wt).call(Fl,'"')})"`),singleQuotedString:new RegExp(`'(${a(zl=me,Wt).call(zl,"'")})'`),backtickQuotedString:new RegExp("`("+a(jl=me,Wt).call(jl,"`")+")`")});let X=me;var he,ze;class Zo extends q{constructor(e,i){super();p(this,he);p(this,ze);m(this,he,e),m(this,ze,i)}get parser(){return a(this,he)}get mapper(){return a(this,ze)}isHighlighted(e,i){if(super.isHighlighted(e,i)){const s={parent:i,parser:a(this,he),index:0};e.highlighted=e.highlighted instanceof q?a(this,he):s}return!1}parse(e,i,s,r){s=this.makePath(s,r);const n=a(this,he).parse(e,i,s,0);return n.status&&(n.value=a(this,ze).call(this,n.value)),n}doToString(e,i,s,r){let n=a(this,he).toString(e,i,s,0);if(a(this,he)instanceof X&&Object.values(X.common).includes(a(this,he).regexp))return a(this,he).regexp===X.common.numberInteger&&a(this,ze)===BigInt?"P.numberBigInteger":n;let c=a(this,ze).toString();return(c.length>60||c.includes(`
`))&&(c="(...) => { ... }"),n+=` -> map<${c}>`,n}}he=new WeakMap,ze=new WeakMap;var vn;const wn=class wn extends X{constructor(t){super(t,a(wn,vn))}};vn=new WeakMap,p(wn,vn,t=>t);let ca=wn;class Ko extends X{constructor(t,e=0){super(t,i=>i[e])}}var Ie;class Wo extends q{constructor(...e){super();p(this,Ie);m(this,Ie,e)}get parsers(){return a(this,Ie)}parse(e,i,s,r){s=this.makePath(s,r);const n=new Array(a(this,Ie).length),c=te.makeSuccess(i,n);for(let h=0;h<a(this,Ie).length;++h){const d=a(this,Ie)[h].parse(e,c.position,s,h);if(d.bestPosition>c.bestPosition&&(c.bestParser=d.bestParser,c.bestPosition=d.bestPosition),!d.status){c.status=!1,c.value=null;break}c.value[h]=d.value,c.position=d.position}return c}doToString(e,i,s,r){const n=i+q.indentation;return`SEQ<
`+n+a(this,Ie).map((h,d)=>h.toString(e,n,s,d)).join(`
`+n)+`
`+i+">"}}Ie=new WeakMap;var Qt,be,ve;class Qo extends q{constructor(e,i=0,s=Number.POSITIVE_INFINITY){super();p(this,Qt);p(this,be);p(this,ve);if(i>s)throw new Error("Min is greater than max");m(this,Qt,e),m(this,be,i),m(this,ve,s)}get parser(){return a(this,Qt)}get min(){return a(this,be)}get max(){return a(this,ve)}parse(e,i,s,r){s=this.makePath(s,r);const n=[],c=te.makeSuccess(i,n,s);for(let h=0;h<a(this,ve);++h){const d=a(this,Qt).parse(e,c.position,s,0);if(d.bestPosition>c.bestPosition&&(c.bestParser=d.bestParser,c.bestPosition=d.bestPosition),!d.status){h<a(this,be)&&(c.status=!1,c.value=null);break}c.value.push(d.value),c.position=d.position}return c}doToString(e,i,s,r){let n=this.parser.toString(e,i,s,0);const c=a(this,be)===0&&a(this,ve)===1?"?":a(this,be)===0&&a(this,ve)===Number.POSITIVE_INFINITY?"*":a(this,be)===1&&a(this,ve)===Number.POSITIVE_INFINITY?"+":"{"+a(this,be)+(a(this,be)!==a(this,ve)?","+a(this,ve):"")+"}";return n+=c,n}}Qt=new WeakMap,be=new WeakMap,ve=new WeakMap;var we,Sn,Cn,yn,En,Nn,Ql;const x=class x{constructor(t,e=!1){p(this,we);o(this,"Self");m(this,we,t)}static lineColumnFromOffset(t,e){const i=t.substring(0,e).split(`
`),s=i.length,r=i[i.length-1].length+1;return{line:s,column:r}}getParser(){return a(this,we)}run(t){const e=a(this,we).parse(te.makeContext(this,t),0,te.makePathNode(),0);return e.position!==t.length&&(e.status=!1),e}parse(t,e=!0){var I;const i=this.run(t);if(i.status)return i.value;const s=60,r=[Math.ceil(s/2),Math.floor(s/2)],n=x.lineColumnFromOffset(t,i.bestPosition);let c=i.bestPosition;const h=t.replaceAll(/^(\s)+|\s{6,}|\s*?\n\s*/g,(B,$,Z)=>{let ne=$?"...":" ... ";return Z<=i.bestPosition&&(i.bestPosition<Z+B.length?c-=i.bestPosition-Z:c-=B.length-ne.length),ne}),d=h.substring(0,s).trimEnd(),f=Math.min(t.substring(i.bestPosition-r[0]).match(/^\s*/)[0].length,r[0]-1);let v=Math.min(c,r[0]-f);r[0]=Math.max(0,c-r[0])+f,r[1]=Math.min(t.length,r[0]+s);let C=h.substring(...r);r[0]>0&&(C="..."+C,v+=3),r[1]<h.length-1&&(C=C+"...");const P=this.toString(q.indentation,!0,R(I=x,Nn,Ql).call(I,i.bestParser));throw new Error(`Could not parse: ${d}

Input: ${C}
       `+" ".repeat(v)+`^ From here (line: ${n.line}, column: ${n.column}, offset: ${i.bestPosition})${i.bestPosition===t.length?", end of string":""}
`+(e?`
`+(i.bestParser?"Last valid parser matched:":"No parser matched:")+P+`
`:""))}static str(t){return new this(new Wl(t))}static reg(t,e=0){return new this(new Ko(t,e))}static regArray(t){return new this(new ca(t))}static success(){return new this(rn.instance)}static failure(){return new this(ua.instance)}static seq(...t){return new this(new Wo(...t.map(e=>e.getParser())))}static alt(...t){return new this(new Yo(...t.map(e=>e.getParser())))}static lookahead(t){return new this(new nn(t.getParser(),nn.Type.POSITIVE_AHEAD))}static lazy(t){return new this(new qo(t))}times(t,e=t){return new x(new Qo(a(this,we),t,e))}many(){return this.times(0,Number.POSITIVE_INFINITY)}atLeast(t){return this.times(t,Number.POSITIVE_INFINITY)}atMost(t){return this.times(0,t)}opt(t=""){let e=x.success();return t!==""&&(e=e.map(()=>t)),x.alt(this,e)}sepBy(t,e=1,i=!1){let s=x.seq(this,x.seq(t,this).map(a(x,Cn)).atLeast(e-1),...i?[t.opt([])]:[]).map(a(x,yn));return e===0&&(s=s.opt([])),s}skipSpace(){return x.seq(this,x.whitespaceOpt).map(a(x,Sn))}map(t){return new x(new Zo(a(this,we),t))}chain(t){return new x(new Uo(a(this,we),t))}assert(t){return this.chain((e,i,s)=>t(e,i,s)?x.success().map(()=>e):x.failure())}join(t=""){return this.map(a(x,En))}label(t=""){return new x(new Xo(a(this,we),t))}toString(t="",e=!1,i=null){i instanceof x&&(i=i.getParser());const s=te.makeContext(this,"");s.highlighted=i;const r=te.makePathNode();return(e?`
`+t:"")+a(this,we).toString(s,t,r)}};we=new WeakMap,Sn=new WeakMap,Cn=new WeakMap,yn=new WeakMap,En=new WeakMap,Nn=new WeakSet,Ql=function(t){const e=[];for(;t;)e.push(t),t=t.parent;e.reverse();let i=new Map;for(let s=1;s<e.length;++s){const r=i.get(e[s].current);r!==void 0?(e[s+1]&&(e[s+1].parent=e[r]),i=new Map([...i.entries()].filter(([n,c])=>c<=r||c>s)),i.set(e[s].current,r),e.splice(r+1,s-r),s=r):i.set(e[s].current,s)}return e[e.length-1]},p(x,Nn),p(x,Sn,([t,e])=>t),p(x,Cn,([t,e])=>e),p(x,yn,([t,e])=>[t,...e]),p(x,En,t=>t instanceof Array?t.join(""):t),o(x,"number",x.reg(X.common.number).map(Number)),o(x,"numberInteger",x.reg(X.common.numberInteger).map(Number)),o(x,"numberBigInteger",x.reg(x.numberInteger.getParser().parser.regexp).map(BigInt)),o(x,"numberNatural",x.reg(X.common.numberNatural).map(Number)),o(x,"numberExponential",x.reg(X.common.numberExponential).map(Number)),o(x,"numberUnit",x.reg(X.common.numberUnit).map(Number)),o(x,"numberByte",x.reg(X.common.numberByte).map(Number)),o(x,"whitespace",x.reg(X.common.whitespace)),o(x,"whitespaceOpt",x.reg(X.common.whitespaceOpt)),o(x,"whitespaceInline",x.reg(X.common.whitespaceInline)),o(x,"whitespaceInlineOpt",x.reg(X.common.whitespaceInlineOpt)),o(x,"whitespaceMultiline",x.reg(X.common.whitespaceMultiline)),o(x,"doubleQuotedString",x.reg(X.common.doubleQuotedString,1)),o(x,"singleQuotedString",x.reg(X.common.singleQuotedString,1)),o(x,"backtickQuotedString",x.reg(X.common.backtickQuotedString,1));let g=x;var Ls,Jt,Ts,$s,Os;const V=class V{constructor(t={}){p(this,Ls);p(this,Jt,this.constructor.lookbehind);p(this,Ts,this.constructor.ignored);p(this,$s);p(this,Os);const e=this.constructor.attributes,i=y.mergeArrays(Object.keys(t),Object.entries(e).filter(([s,r])=>r.default!==void 0).map(([s,r])=>s));for(const s of i){if(t[s]!==void 0){t[s].constructor===Object&&(t[s]=new(e[s]!==void 0?e[s]:V.unknownEntity)(t[s]));const n=e[s];if(this[s]=t[s],n!=null&&n.compute){const h=n.compute(this).grammar.run(t[s].toString());h.status&&(this[s]=h.value)}continue}const r=e[s];if(r.default!==void 0){this[s]=r.default(r);continue}}}get keys(){return a(this,Ls)??Object.keys(this)}set keys(t){m(this,Ls,[...new Set(t)])}get lookbehind(){return a(this,Jt).trim()}set lookbehind(t){m(this,Jt,t)}get ignored(){return a(this,Ts)}set ignored(t){m(this,Ts,t)}get quoted(){return a(this,$s)??this.constructor.quoted??!1}set quoted(t){m(this,$s,t)}get trailing(){return a(this,Os)??this.constructor.trailing??!1}set trailing(t){m(this,Os,t)}static createGrammar(){return this.unknownEntityGrammar}static actualClass(){let t=this;for(;!t.name;)t=Object.getPrototypeOf(t);return t}static className(){return this.actualClass().name}static asUniqueClass(){let t=this;return this.name.length&&(t=class extends this{},t.grammar=t.createGrammar()),t}static withLookbehind(t){const e=this.asUniqueClass();return e.lookbehind=t,e}static withDefault(t=e=>new e){const e=this.asUniqueClass();return e.default=t,e}static flagNullable(t=!0){const e=this.asUniqueClass();return e.nullable=t,e}static flagIgnored(t=!0){const e=this.asUniqueClass();return e.ignored=t,e}static flagSerialized(t=!0){const e=this.asUniqueClass();return e.serialized=t,e}static flagInlined(t=!0){const e=this.asUniqueClass();return e.inlined=t,e}static flagQuoted(t=!0){const e=this.asUniqueClass();return e.quoted=t,e}static flagSilent(t=!0){const e=this.asUniqueClass();return e.silent=t,e}static flagTrailing(t=!0){const e=this.asUniqueClass();return e.trailing=t,e}static asSerializedString(t){return`"${t.replaceAll(new RegExp('(?<=(?:[^\\\\]|^)(?:\\\\\\\\)*?)"',"g"),'\\"')}"`}showProperty(t){let e=this[t];const i=e.constructor;if(i.silent&&i.default!==void 0){i["#default"]===void 0&&(i["#default"]=i.default(i));const s=i["#default"];return!e.equals(s)}return!0}listenAttribute(t,e){const i=Object.getOwnPropertyDescriptor(this,t),s=i.set;s?(i.set=r=>{s(r),e(r)},Object.defineProperties(this,{[t]:i})):i.value&&Object.defineProperties(this,{["#"+t]:{value:i.value,writable:!0,enumerable:!1},[t]:{enumerable:!0,get(){return this["#"+t]},set(r){e(r),this["#"+t]=r}}})}doSerialize(t=!1,e="",i=this.constructor,s=i.printKey,r=i.keySeparator,n=i.attributeSeparator,c=i.wrap){var C;const h=i!==this.constructor;let d="",f=!0;const v=this instanceof V?this.keys:Object.keys(this);for(const P of v){const I=this[P],B=I==null?void 0:I.constructor;if(I===void 0||this instanceof V&&!this.showProperty(P))continue;f?f=!1:d+=n;let $=this instanceof Array?`(${P})`:P;if($.length&&((C=i.attributes[P])!=null&&C.quoted||I.quoted)&&($=`"${$}"`),B.inlined){const ne=B.className()==="ArrayEntity"?Gt=>s(`${$}${Gt}`):Gt=>s(`${$}.${Gt}`);d+=I.serialize(t,e,void 0,ne,r,n,i.notWrapped);continue}$=s($),$.length&&(d+=(n.includes(`
`)?e:"")+$+r);let Z=I==null?void 0:I.serialize(t,e);d+=Z}return this instanceof V&&(h&&i.trailing||this.trailing)&&d.length&&(d+=n),c(this,d)}serialize(t=!1,e="",i=this.constructor,s=i.printKey,r=i.keySeparator,n=i.attributeSeparator,c=i.wrap){this.constructor;let h=this instanceof Array?V.prototype.doSerialize.bind(this)(t,e,i,s,r,n,c):this.doSerialize(t,e,i,s,r,n,c);return i.serialized&&(h=V.asSerializedString(h)),h}equals(t){if(!(t instanceof V))return!1;const e=Object.keys(this),i=Object.keys(t),s=this.constructor.actualClass(),r=t.constructor.actualClass();if(e.length!==i.length||this.lookbehind!=t.lookbehind||!(t instanceof s)&&!(this instanceof r))return!1;for(let n=0;n<e.length;++n){const c=e[n];if(!i.includes(c))return!1;const h=this[c],d=t[c];if(h instanceof V){if(!h.equals(d))return!1}else if(h instanceof Array&&d instanceof Array){if(h.length!==d.length)return!1;for(let f=0;f<h.length;++f)if(!(h[f]instanceof V&&h[f].equals(d[f]))&&h[f]!==d[f])return!1}else if(h!==d)return!1}return!0}};Ls=new WeakMap,Jt=new WeakMap,Ts=new WeakMap,$s=new WeakMap,Os=new WeakMap,o(V,"same",t=>t),o(V,"notWrapped",(t,e)=>e),o(V,"defaultWrapped",(t,e)=>`${a(t,Jt)}(${e})`),o(V,"wrap",V.defaultWrapped),o(V,"attributeSeparator",","),o(V,"keySeparator","="),o(V,"printKey",t=>t),o(V,"grammar",g.lazy(()=>V.createGrammar())),o(V,"unknownEntityGrammar"),o(V,"unknownEntity"),o(V,"attributes",{}),o(V,"lookbehind",""),o(V,"default"),o(V,"nullable",!1),o(V,"ignored",!1),o(V,"serialized",!1),o(V,"expected",!1),o(V,"inlined",!1),o(V,"quoted"),o(V,"silent",!1),o(V,"trailing",!1);let O=V;var yt;const _i=class _i extends O{constructor(e=!1){super();p(this,yt,!0);this.value=e}get uppercase(){return a(this,yt)}set uppercase(e){m(this,yt,e)}static createGrammar(){return g.regArray(/(true)|(True)|(false)|(False)/).map(e=>{const i=e[1]??e[2]?new this(!0):new this(!1);return i.uppercase=(e[2]??e[4])!==void 0,i}).label("BooleanEntity")}serialize(e=!1,i="",s=this.constructor){let r=this.value?a(this,yt)?"True":"true":a(this,yt)?"False":"false";return s.serialized&&(r=`"${r}"`),r}valueOf(){return this.value}};yt=new WeakMap,o(_i,"grammar",_i.createGrammar()),o(_i,"booleanConverter",{fromAttribute:(e,i)=>{},toAttribute:(e,i)=>e===!0?"true":e===!1?"false":""});let k=_i;var Bs;const es=class es{static registerElement(t,e){a(es,Bs).set(t,e)}static getConstructor(t){return a(es,Bs).get(t)}};Bs=new WeakMap,p(es,Bs,new Map);let re=es;class Xr extends O{static className(){let t=super.className();return this.alternatives.length&&(t+=".accepting("+this.alternatives.map(e=>e.className()).join(", ")+")"),t}static createGrammar(){const t=this.alternatives.map(e=>e.grammar);return this.alternatives.length==0||t.includes(this.unknownEntityGrammar)?this.unknownEntityGrammar:g.alt(...t)}static accepting(...t){const e=this.asUniqueClass();return e.alternatives=t,e.grammar=e.createGrammar(),e}}o(Xr,"alternatives",[]);var z;const D=class D{static getAttribute(t,[e,...i]){var r;const s=(r=t==null?void 0:t.attributes)==null?void 0:r[e];if(s){if(s.prototype instanceof Xr)for(const n of s.alternatives){const c=this.getAttribute(n,i);if(c)return c}return i.length>0?this.getAttribute(s,i):s}}static createAttributeGrammar(t,e=this.attributeName,i=this.equalSeparation,s=(r,n,c)=>{}){return g.seq(e,i).chain(([r,n])=>{const c=r.split(l.keysSeparator),h=this.getAttribute(t,c);return(h?h.grammar:O.unknownEntityGrammar).map(f=>v=>{y.objectSet(v,c,f),s(v,c,f)})})}static createEntityGrammar(t,e=this.commaSeparation,i=null,s=1){const r=t.lookbehind instanceof Array?t.lookbehind.join("|"):t.lookbehind;return g.seq(g.reg(new RegExp(String.raw`(${r}\s*)\(\s*`),1),this.createAttributeGrammar(t).sepBy(e,s),g.reg(/\s*(,\s*)?\)/,1)).map(([n,c,h])=>{let d={};return n.length&&(d.lookbehind=n),c.forEach(f=>f(d)),d.trailing=h!==void 0,d}).chain(n=>{(t.lookbehind instanceof Array||t.lookbehind!==r)&&(t=t.withLookbehind(r));const c=Object.keys(n),h=Object.keys(t.attributes);return i!=null?g.success().assert(d=>c.filter(f=>h.includes(f)).length/h.length>=i).map(()=>new t(n)):g.success().map(()=>new t(n))})}};o(D,"numberRegexSource",g.number.getParser().parser.regexp.source),o(D,"separatedBy",(t,e,i=1)=>new RegExp(t+"(?:"+e+t+")"+(i===1?"*":i===2?"+":`{${i},}`))),o(D,"Regex",(z=class{},o(z,"HexDigit",/[0-9a-fA-F]/),o(z,"InsideString",/(?:[^"\\]|\\.)*/),o(z,"InsideSingleQuotedString",/(?:[^'\\]|\\.)*/),o(z,"Integer",/[\-\+]?\d+(?!\d|\.)/),o(z,"Number",/[-\+]?(?:\d*\.)?\d+(?!\d|\.)/),o(z,"RealUnit",/\+?(?:0(?:\.\d+)?|1(?:\.0+)?)(?![\.\d])/),o(z,"Word",D.separatedBy("[a-zA-Z]","_")),o(z,"Symbol",/[a-zA-Z_]\w*/),o(z,"DotSeparatedSymbols",D.separatedBy(z.Symbol.source,"\\.")),o(z,"MultipleWordsSymbols",D.separatedBy(z.Symbol.source,"(?:\\.|\\ +)")),o(z,"PathFragment",D.separatedBy(z.Symbol.source,"[\\.:]")),o(z,"PathSpaceFragment",D.separatedBy(z.Symbol.source,"[\\.:\\ ]")),o(z,"Path",new RegExp(`(?:\\/${z.PathFragment.source}){2,}`)),z)),o(D,"null",g.reg(/\(\s*\)/).map(()=>null)),o(D,"true",g.reg(/true/i).map(()=>!0)),o(D,"false",g.reg(/false/i).map(()=>!1)),o(D,"number",g.regArray(new RegExp(`(${g.number.getParser().parser.regexp.source})|(\\+?inf)|(-inf)`)).map(([t,e,i,s])=>e?Number(e):i?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY)),o(D,"bigInt",g.reg(new RegExp(g.number.getParser().parser.regexp.source)).map(BigInt).map(t=>t[2]!==void 0?Number.POSITIVE_INFINITY:t[3]!==void 0?Number.NEGATIVE_INFINITY:Number(t[1]))),o(D,"naturalNumber",g.lazy(()=>g.reg(/\d+/).map(Number))),o(D,"string",g.doubleQuotedString.map(t=>y.unescapeString(t))),o(D,"colorValue",g.numberByte),o(D,"word",g.reg(D.Regex.Word)),o(D,"symbol",g.reg(D.Regex.Symbol)),o(D,"symbolQuoted",g.reg(new RegExp('"('+D.Regex.Symbol.source+')"'),1)),o(D,"attributeName",g.reg(D.Regex.DotSeparatedSymbols)),o(D,"attributeNameQuoted",g.reg(new RegExp('"('+D.Regex.InsideString.source+')"'),1)),o(D,"guid",g.reg(new RegExp(`${D.Regex.HexDigit.source}{32}`))),o(D,"commaSeparation",g.reg(/\s*,\s*(?!\))/)),o(D,"commaOrSpaceSeparation",g.reg(/\s*,\s*(?!\))|\s+/)),o(D,"equalSeparation",g.reg(/\s*=\s*/)),o(D,"hexColorChannel",g.reg(new RegExp(D.Regex.HexDigit.source+"{2}")));let N=D;const xn=class xn extends O{constructor(t=0){super(),this.value=t}static createGrammar(){return g.number.map(t=>new this(t))}serialize(t=!1,e="",i=this.constructor){let s=this.value.toFixed(6);return i.serialized&&(s=`"${s}"`),s}valueOf(){return this.value}};o(xn,"grammar",xn.createGrammar());let le=xn;var Is,Ds,Gs,Et,Ki;const _=class _ extends O{constructor(e){super(e);p(this,Et);p(this,Is,new le);p(this,Ds,new le);p(this,Gs,new le);e instanceof Array&&(e={R:e[0]??0,G:e[1]??0,B:e[2]??0,A:e[3]??1}),this.R,this.G,this.B,this.A,R(this,Et,Ki).call(this)}get H(){return a(this,Is)}set H(e){m(this,Is,e)}get S(){return a(this,Ds)}set S(e){m(this,Ds,e)}get V(){return a(this,Gs)}set V(e){m(this,Gs,e)}static createGrammar(){return N.createEntityGrammar(this,N.commaSeparation,.5).label("LinearColorEntity")}static printLinearColor(e){return`${Math.round(e.R.valueOf()*255)}, ${Math.round(e.G.valueOf()*255)}, ${Math.round(e.B.valueOf()*255)}`}static linearToSRGB(e){return e<=0?0:e>=1?1:e<.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055}static sRGBtoLinear(e){return e<=0?0:e>=1?1:e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}static getWhite(){return new _({R:new le(1),G:new le(1),B:new le(1)})}static getLinearColorFromHexGrammar(){const e=/[0-9a-fA-F]/;return g.regArray(new RegExp("#("+e.source+"{2})("+e.source+"{2})("+e.source+"{2})("+e.source+"{2})?")).map(([i,s,r,n,c])=>new this({R:parseInt(s,16)/255,G:parseInt(r,16)/255,B:parseInt(n,16)/255,A:parseInt(c??"FF",16)/255}))}static getLinearColorRGBListGrammar(){return g.seq(g.numberByte,N.commaSeparation,g.numberByte,N.commaSeparation,g.numberByte).map(([e,i,s,r,n])=>new this({R:e/255,G:s/255,B:n/255,A:1}))}static getLinearColorRGBGrammar(){return g.seq(g.reg(/rgb\s*\(\s*/),this.getLinearColorRGBListGrammar(),g.reg(/\s*\)/)).map(([e,i,s])=>i)}static getLinearColorRGBAGrammar(){return g.seq(g.reg(/rgba\s*\(\s*/),this.getLinearColorRGBListGrammar(),g.reg(/\s*\)/)).map(([e,i,s])=>i)}static getLinearColorFromAnyFormat(){return g.alt(this.getLinearColorFromHexGrammar(),this.getLinearColorRGBAGrammar(),this.getLinearColorRGBGrammar(),this.getLinearColorRGBListGrammar())}setFromRGBA(e,i,s,r=1){this.R.value=e,this.G.value=i,this.B.value=s,this.A.value=r,R(this,Et,Ki).call(this)}setFromHSVA(e,i,s,r=1){const n=Math.floor(e*6),c=e*6-n,h=s*(1-i),d=s*(1-c*i),f=s*(1-(1-c)*i),v=[s,d,h,h,f,s],[C,P,I]=[v[n%6],v[(n+4)%6],v[(n+2)%6]];this.R.value=C,this.G.value=P,this.B.value=I,this.A.value=r,this.H.value=e,this.S.value=i,this.V.value=s}setFromWheelLocation(e,i,s,r){const[n,c]=y.getPolarCoordinates(e,i,!0);this.setFromHSVA(1-c/(2*Math.PI),n,s,r)}toDimmedColor(e=0){const i=new _;return i.setFromRGBANumber(this.toNumber()),i.setFromHSVA(i.H.value,i.S.value*.6,Math.pow(i.V.value+e,.55)*.7),i}toCSSRGBValues(){const e=Math.round(this.R.value*255),i=Math.round(this.G.value*255),s=Math.round(this.B.value*255);return E`${e}, ${i}, ${s}`}toRGBA(){return[Math.round(this.R.value*255),Math.round(this.G.value*255),Math.round(this.B.value*255),Math.round(this.A.value*255)]}toSRGBA(){return[Math.round(_.linearToSRGB(this.R.value)*255),Math.round(_.linearToSRGB(this.G.value)*255),Math.round(_.linearToSRGB(this.B.value)*255),Math.round(this.A.value*255)]}toRGBAString(){return this.toRGBA().map(e=>e.toString(16).toUpperCase().padStart(2,"0")).join("")}toSRGBAString(){return this.toSRGBA().map(e=>e.toString(16).toUpperCase().padStart(2,"0")).join("")}toHSVA(){return[this.H.value,this.S.value,this.V.value,this.A.value]}toNumber(){return(Math.round(this.R.value*255)<<24)+(Math.round(this.G.value*255)<<16)+(Math.round(this.B.value*255)<<8)+Math.round(this.A.value*255)}toArray(){return[this.R.value,this.G.value,this.B.value,this.A.value]}setFromRGBANumber(e){this.A.value=(e&255)/255,this.B.value=(e>>8&255)/255,this.G.value=(e>>16&255)/255,this.R.value=(e>>24&255)/255,R(this,Et,Ki).call(this)}setFromSRGBANumber(e){this.A.value=(e&255)/255,this.B.value=_.sRGBtoLinear((e>>8&255)/255),this.G.value=_.sRGBtoLinear((e>>16&255)/255),this.R.value=_.sRGBtoLinear((e>>24&255)/255),R(this,Et,Ki).call(this)}toString(){return _.printLinearColor(this)}};Is=new WeakMap,Ds=new WeakMap,Gs=new WeakMap,Et=new WeakSet,Ki=function(){const e=this.R.value,i=this.G.value,s=this.B.value;if(y.approximatelyEqual(e,i)&&y.approximatelyEqual(e,s)&&y.approximatelyEqual(i,s)){this.S.value=0,this.V.value=e;return}const r=Math.max(e,i,s),n=Math.min(e,i,s),c=r-n;let h;switch(r){case n:h=0;break;case e:h=(i-s)/c+(i<s?6:0);break;case i:h=(s-e)/c+2;break;case s:h=(e-i)/c+4;break}h/=6,this.H.value=h,this.S.value=r==0?0:c/r,this.V.value=r},o(_,"attributes",{...F(_,_,"attributes"),R:le.withDefault(),G:le.withDefault(),B:le.withDefault(),A:le.withDefault(e=>new e(1))}),o(_,"grammar",_.createGrammar());let se=_;function Jo(u){var e,i,s;switch(u.getType()){case l.paths.materialExpressionConstant2Vector:case l.paths.materialExpressionConstant3Vector:case l.paths.materialExpressionConstant4Vector:return l.nodeColors.yellow;case l.paths.materialExpressionFunctionInput:case l.paths.materialExpressionTextureCoordinate:case l.paths.materialExpressionWorldPosition:case l.paths.pcgEditorGraphNodeInput:case l.paths.pcgEditorGraphNodeOutput:return l.nodeColors.red;case l.paths.makeStruct:return l.nodeColors.darkBlue;case l.paths.materialExpressionMaterialFunctionCall:return l.nodeColors.blue;case l.paths.materialExpressionTextureSample:return l.nodeColors.darkTurquoise}switch(u.getClass()){case l.paths.callFunction:return(e=u.bIsPureFunc)!=null&&e.valueOf()?l.nodeColors.green:l.nodeColors.blue;case l.paths.niagaraNodeFunctionCall:return l.nodeColors.darkerBlue;case l.paths.dynamicCast:return l.nodeColors.turquoise;case l.paths.inputDebugKey:case l.paths.inputKey:return l.nodeColors.red;case l.paths.createDelegate:case l.paths.enumLiteral:case l.paths.makeArray:case l.paths.makeMap:case l.paths.materialGraphNode:case l.paths.select:return l.nodeColors.green;case l.paths.executionSequence:case l.paths.ifThenElse:case l.paths.macro:case l.paths.multiGate:return l.nodeColors.gray;case l.paths.functionEntry:case l.paths.functionResult:return l.nodeColors.violet;case l.paths.timeline:return l.nodeColors.yellow}if(u.switchTarget())return l.nodeColors.lime;if(u.isEvent())return l.nodeColors.red;if(u.isComment())return(u.CommentColor?u.CommentColor:se.getWhite()).toDimmedColor().toCSSRGBValues();const t=u.getPcgSubobject();if(t){if(t.NodeTitleColor)return t.NodeTitleColor.toDimmedColor(.1).toCSSRGBValues();switch((i=u.PCGNode)==null?void 0:i.getName(!0)){case"Branch":case"Select":return l.nodeColors.intenseGreen}}return(s=u.bIsPureFunc)!=null&&s.valueOf()?l.nodeColors.green:l.nodeColors.blue}const Pn=class Pn extends O{constructor(t=null){super();const e=this.constructor;t??(t=e.default!==void 0?e.default(e).getter:t),this.getter=t}static createGrammar(t=(e=>(e=this.type)==null?void 0:e.grammar)()??g.lazy(()=>this.unknownEntityGrammar)){var i;return(i=this.type)==null?void 0:i.grammar.map(s=>new this(()=>s))}static withDefault(t=e=>new e(()=>new e.type)){return super.withDefault(t)}static of(t){const e=this.asUniqueClass();return e.type=t,e.grammar=e.createGrammar(),e}doSerialize(t=!1,e="",i=this.constructor,s=i.printKey,r=i.keySeparator,n=i.attributeSeparator,c=i.wrap){return this.getter().serialize(t,e,i.type,s,r,n,c)}equals(t){var e,i;return t instanceof Pn&&(t=(e=t.getter)==null?void 0:e.call(t)),(i=this.getter)==null?void 0:i.call(this).equals(t)}valueOf(){return this.valueOf=this.getter().valueOf.bind(this.getter()),this.valueOf()}toString(){return this.toString=this.getter().toString.bind(this.getter()),this.toString()}};o(Pn,"type");let ie=Pn;var _t;const Rt=class Rt extends O{constructor(e=0,i=null){super();p(this,_t);o(this,"_value");this.value=Number(e),i!==null&&m(this,_t,Number(i))}get precision(){return this.constructor.precision??a(this,_t)}set precision(e){m(this,_t,e)}get value(){return this._value}set value(e){e===-0&&(e=0),this._value=e}static createGrammar(){return g.regArray(new RegExp(`(?<n>${this.numberRegexSource})|(?<posInf>\\+?inf)|(?<negInf>-inf)`)).map(({2:e,groups:{n:i,posInf:s,negInf:r}})=>new this(i?Number(i):s?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY,e==null?void 0:e.length)).label("NumberEntity")}static withPrecision(e=0){const i=this.asUniqueClass();return i.precision=e,i}static printNumber(e){return e==Number.POSITIVE_INFINITY?"inf":e==Number.NEGATIVE_INFINITY?"-inf":y.minDecimals(e)}serialize(e=!1,i="",s=this.constructor){if(this.value===Number.POSITIVE_INFINITY)return"+inf";if(this.value===Number.NEGATIVE_INFINITY)return"-inf";const r=s.precision??this.precision;let n=r!==void 0?this.value.toFixed(r):this.value.toString();return s.serialized&&(n=`"${n}"`),n}valueOf(){return this.value}toString(){return this.value.toString()}};_t=new WeakMap,o(Rt,"numberRegexSource",String.raw`${N.numberRegexSource}(?<=(?:\.(\d*0+))?)`),o(Rt,"grammar",Rt.createGrammar()),o(Rt,"precision");let L=Rt;const et=class et extends O{constructor(t){super(t),this.X,this.Y,this.Z}static createGrammar(){return N.createEntityGrammar(this,N.commaSeparation,1).label("VectorEntity")}toArray(){return[this.X.valueOf(),this.Y.valueOf(),this.Z.valueOf()]}};o(et,"attributes",{...F(et,et,"attributes"),X:L.withDefault(),Y:L.withDefault(),Z:L.withDefault()}),o(et,"grammar",et.createGrammar());let de=et;const _o=/\/Script\/SequencerScripting\.MovieSceneScripting(.+)Channel/,eu={A_AccentGrave:"à",Add:"Num +",C_Cedille:"ç",Decimal:"Num .",Divide:"Num /",E_AccentAigu:"é",E_AccentGrave:"è",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",Gamepad_Special_Left_X:"Touchpad Button X Axis",Gamepad_Special_Left_Y:"Touchpad Button Y Axis",Mouse2D:"Mouse XY 2D-Axis",Multiply:"Num *",Section:"§",Subtract:"Num -",Tilde:"`"};function $l(u=""){switch(u=u.toLowerCase(),u){case"zero":return 0;case"one":return 1;case"two":return 2;case"three":return 3;case"four":return 4;case"five":return 5;case"six":return 6;case"seven":return 7;case"eight":return 8;case"nine":return 9}}function tu(u){var i;let t=eu[u];if(t||(t=(i=$l(u))==null?void 0:i.toString(),t))return t;const e=u.match(/NumPad([a-zA-Z]+)/);if(e&&(t=$l(e[1]).toString(),t))return"Num "+t}function qt(u){var c,h,d,f,v,C,P,I,B,$,Z,ne,Gt,Za,Ka,Wa,Qa,Ja,_a,el,tl,il,sl,rl,nl,al,ll,ol,ul,cl,hl,dl,pl,ml,gl,fl,bl,vl;let t;switch(u.getType()){case l.paths.asyncAction:if(u.ProxyFactoryFunctionName)return y.formatStringName((c=u.ProxyFactoryFunctionName)==null?void 0:c.toString());case l.paths.actorBoundEvent:case l.paths.componentBoundEvent:return`${y.formatStringName((h=u.DelegatePropertyName)==null?void 0:h.toString())} (${((d=u.ComponentPropertyName)==null?void 0:d.toString())??"Unknown"})`;case l.paths.callDelegate:return`Call ${((v=(f=u.DelegateReference)==null?void 0:f.MemberName)==null?void 0:v.toString())??"None"}`;case l.paths.createDelegate:return"Create Event";case l.paths.customEvent:if(u.CustomFunctionName)return(C=u.CustomFunctionName)==null?void 0:C.toString();case l.paths.dynamicCast:return u.TargetType?`Cast To ${(P=u.TargetType)==null?void 0:P.getName()}`:"Bad cast node";case l.paths.enumLiteral:return`Literal enum ${(I=u.Enum)==null?void 0:I.getName()}`;case l.paths.event:return`Event ${((($=(B=u.EventReference)==null?void 0:B.MemberName)==null?void 0:$.toString())??"").replace(/^Receive/,"")}`;case l.paths.executionSequence:return"Sequence";case l.paths.forEachElementInEnum:return`For Each ${(Z=u.Enum)==null?void 0:Z.getName()}`;case l.paths.forEachLoopWithBreak:return"For Each Loop with Break";case l.paths.functionEntry:return((Gt=(ne=u.FunctionReference)==null?void 0:ne.MemberName)==null?void 0:Gt.toString())==="UserConstructionScript"?"Construction Script":(Ka=(Za=u.FunctionReference)==null?void 0:Za.MemberName)==null?void 0:Ka.toString();case l.paths.functionResult:return"Return Node";case l.paths.ifThenElse:return"Branch";case l.paths.makeStruct:if(u.StructType)return`Make ${u.StructType.getName()}`;case l.paths.materialExpressionComponentMask:{const T=u.getMaterialSubobject();if(T)return`Mask ( ${l.rgba.filter(Q=>T[Q].getter().value===!0).map(Q=>Q+" ").join("")})`}case l.paths.materialExpressionConstant:t??(t=[(Wa=u.getCustomproperties().find(T=>T.PinName.toString()=="Value"))==null?void 0:Wa.DefaultValue]);case l.paths.materialExpressionConstant2Vector:t??(t=[(Qa=u.getCustomproperties().find(T=>{var Q;return((Q=T.PinName)==null?void 0:Q.toString())=="X"}))==null?void 0:Qa.DefaultValue,(Ja=u.getCustomproperties().find(T=>{var Q;return((Q=T.PinName)==null?void 0:Q.toString())=="Y"}))==null?void 0:Ja.DefaultValue]);case l.paths.materialExpressionConstant3Vector:case l.paths.materialExpressionConstant4Vector:if(!t){const T=(_a=u.getCustomproperties().find(Q=>{var Qr;return((Qr=Q.PinName)==null?void 0:Qr.toString())=="Constant"}))==null?void 0:_a.DefaultValue;t=T instanceof de?[T.X,T.Y,T.Z].map(Q=>Q.valueOf()):T instanceof se?[T.R,T.G,T.B,T.A].map(Q=>Q.valueOf()):[]}if(t.length>0)return t.map(T=>y.printExponential(T)).join(",");break;case l.paths.materialExpressionFunctionInput:{const T=u.getMaterialSubobject(),Q=(T==null?void 0:T.InputName)??"In",Qr=((tl=(el=T==null?void 0:T.InputType)==null?void 0:el.value.match(/^.+?_(\w+)$/))==null?void 0:tl[1])??"Vector3";return`Input ${Q} (${Qr})`}case l.paths.materialExpressionLogarithm:return"Ln";case l.paths.materialExpressionLogarithm10:return"Log10";case l.paths.materialExpressionLogarithm2:return"Log2";case l.paths.materialExpressionMaterialFunctionCall:const Y=(il=u.getMaterialSubobject())==null?void 0:il.MaterialFunction;if(Y)return Y.getName();break;case l.paths.materialExpressionSquareRoot:return"Sqrt";case l.paths.materialExpressionSubtract:const W=u.getMaterialSubobject();if(W)return`Subtract(${W.ConstA??"1"},${W.ConstB??"1"})`;case l.paths.metasoundEditorGraphExternalNode:{const T=(sl=u.ClassName)==null?void 0:sl.Name;if(T)switch(T){case"Add":return"+";default:return T}}case l.paths.pcgEditorGraphNodeInput:return"Input";case l.paths.pcgEditorGraphNodeOutput:return"Output";case l.paths.spawnActorFromClass:let Be=(al=(nl=(rl=u.getCustomproperties().find(T=>T.PinName.toString()=="ReturnValue"))==null?void 0:rl.PinType)==null?void 0:nl.PinSubCategoryObject)==null?void 0:al.getName();return Be==="Actor"&&(Be=null),`SpawnActor ${y.formatStringName(Be??"NONE")}`;case l.paths.switchEnum:return`Switch on ${((ll=u.Enum)==null?void 0:ll.getName())??"Enum"}`;case l.paths.switchInteger:return"Switch on Int";case l.paths.variableGet:return"";case l.paths.variableSet:return"SET"}let e=u.switchTarget();if(e)return e[0]!=="E"&&(e=y.formatStringName(e)),`Switch on ${e}`;if(u.isComment())return u.NodeComment.toString();const i=u.getHIDAttribute();if(i){const Y=i.toString();let W=tu(Y)??y.formatStringName(Y);return u.getClass()===l.paths.inputDebugKey?W="Debug Key "+W:u.getClass()===l.paths.getInputAxisKeyValue&&(W="Get "+W),W}if(u.getClass()===l.paths.macro)return y.formatStringName((ol=u.MacroGraphReference)==null?void 0:ol.getMacroName());if(u.isMaterial()&&u.getMaterialSubobject()){let Y=qt(u.getMaterialSubobject());return Y=((ul=Y.match(/Material Expression (.+)/))==null?void 0:ul[1])??Y,Y}if(u.isPcg()&&u.getPcgSubobject()){let Y=u.getPcgSubobject();return Y.NodeTitle?Y.NodeTitle.toString():qt(Y)}const s=u.getSubgraphObject();if(s)return s.Graph.getName();const r=u.getSettingsObject();if(r){if(r.ExportPath.type===l.paths.pcgHiGenGridSizeSettings)return`Grid Size: ${((dl=(hl=(cl=r.HiGenGridSize)==null?void 0:cl.toString().match(/\d+/))==null?void 0:hl[0])==null?void 0:dl.concat("00"))??((ml=(pl=r.HiGenGridSize)==null?void 0:pl.toString().match(/^\w+$/))==null?void 0:ml[0])??"256"}`;if(r.BlueprintElementInstance)return y.formatStringName(r.BlueprintElementType.getName());if(r.Operation){const W=(gl=r.Name)==null?void 0:gl.toString().match(/PCGMetadata(\w+)Settings_\d+/);if(W)return y.formatStringName(W[1]+": "+r.Operation)}const Y=r.getSubgraphObject();if(Y&&Y.Graph)return Y.Graph.getName()}let n=(bl=(fl=u.FunctionReference)==null?void 0:fl.MemberName)==null?void 0:bl.toString();if(n){const Y=((vl=u.FunctionReference.MemberParent)==null?void 0:vl.path)??"";switch(n){case"AddKey":let Be=Y.match(_o);if(Be)return`Add Key (${y.formatStringName(Be[1])})`;case"Concat_StrStr":return"Append"}const W=n.match(l.lineTracePattern);if(W)return"Line Trace"+(W[1]==="Multi"?" Multi ":" ")+(W[2]===""?"By Channel":y.formatStringName(W[2]));switch(Y){case l.paths.blueprintGameplayTagLibrary:case l.paths.kismetMathLibrary:case l.paths.slateBlueprintLibrary:case l.paths.timeManagementBlueprintLibrary:const Be=n.match(/[BF]([A-Z]\w+)/);switch(Be&&(n=Be[1]),n){case"Abs":return"ABS";case"BooleanAND":return"AND";case"BooleanNAND":return"NAND";case"BooleanOR":return"OR";case"Exp":return"e";case"LineTraceSingle":return"Line Trace By Channel";case"Max":return"MAX";case"MaxInt64":return"MAX";case"Min":return"MIN";case"MinInt64":return"MIN";case"Not_PreBool":return"NOT";case"Sin":return"SIN";case"Sqrt":return"SQRT";case"Square":return"^2";case"CrossProduct2D":return"cross";case"Vector4_CrossProduct3":return"cross3";case"DotProduct2D":case"Vector4_DotProduct":return"dot";case"Vector4_DotProduct3":return"dot3"}if(n.startsWith("Add_"))return"+";if(n.startsWith("And_"))return"&";if(n.startsWith("Conv_"))return"";if(n.startsWith("Cross_"))return"cross";if(n.startsWith("Divide_"))return"÷";if(n.startsWith("Dot_"))return"dot";if(n.startsWith("EqualEqual_"))return"==";if(n.startsWith("Greater_"))return">";if(n.startsWith("GreaterEqual_"))return">=";if(n.startsWith("Less_"))return"<";if(n.startsWith("LessEqual_"))return"<=";if(n.startsWith("Multiply_"))return"⨯";if(n.startsWith("Not_"))return"~";if(n.startsWith("NotEqual_"))return"!=";if(n.startsWith("Or_"))return"|";if(n.startsWith("Percent_"))return"%";if(n.startsWith("Subtract_"))return"-";if(n.startsWith("Xor_"))return"^";break;case l.paths.blueprintSetLibrary:{const T=n.match(/Set_(\w+)/);if(T)return y.formatStringName(T[1]).toUpperCase()}break;case l.paths.blueprintMapLibrary:{const T=n.match(/Map_(\w+)/);if(T)return y.formatStringName(T[1]).toUpperCase()}break;case l.paths.kismetArrayLibrary:{const T=n.match(/Array_(\w+)/);if(T)return T[1].toUpperCase()}break}return y.formatStringName(n)}if(u.OpName){switch(u.OpName.toString()){case"Boolean::LogicAnd":return"Logic AND";case"Boolean::LogicEq":return"==";case"Boolean::LogicNEq":return"!=";case"Boolean::LogicNot":return"Logic NOT";case"Boolean::LogicOr":return"Logic OR";case"Matrix::MatrixMultiply":return"Multiply (Matrix * Matrix)";case"Matrix::MatrixVectorMultiply":return"Multiply (Matrix * Vector4)";case"Numeric::Abs":return"Abs";case"Numeric::Add":return"+";case"Numeric::DistancePos":return"Distance";case"Numeric::Mul":return"⨯"}return y.formatStringName(u.OpName.toString()).replaceAll("::"," ")}return u.FunctionDisplayName?y.formatStringName(u.FunctionDisplayName.toString()):u.ObjectRef?u.ObjectRef.getName():y.formatStringName(u.getNameAndCounter()[0])}function iu(u){var e,i;if(u.isMaterial()||u.isPcg()||u.isNiagara())return null;switch(u.getType()){case l.paths.addDelegate:case l.paths.asyncAction:case l.paths.callDelegate:case l.paths.createDelegate:case l.paths.functionEntry:case l.paths.functionResult:return w.node;case l.paths.customEvent:return w.event;case l.paths.doN:return w.doN;case l.paths.doOnce:return w.doOnce;case l.paths.dynamicCast:return w.cast;case l.paths.enumLiteral:return w.enum;case l.paths.event:return w.event;case l.paths.executionSequence:case l.paths.multiGate:return w.sequence;case l.paths.flipflop:return w.flipflop;case l.paths.forEachElementInEnum:case l.paths.forLoop:case l.paths.forLoopWithBreak:case l.paths.whileLoop:return w.loop;case l.paths.forEachLoop:case l.paths.forEachLoopWithBreak:return w.forEachLoop;case l.paths.ifThenElse:return w.branchNode;case l.paths.isValid:return w.questionMark;case l.paths.makeArray:return w.makeArray;case l.paths.makeMap:return w.makeMap;case l.paths.makeSet:return w.makeSet;case l.paths.makeStruct:return w.makeStruct;case l.paths.metasoundEditorGraphExternalNode:return w.metasoundFunction;case l.paths.select:return w.select;case l.paths.spawnActorFromClass:return w.spawnActor;case l.paths.timeline:return w.timer}if(u.switchTarget())return w.switch;if(qt(u).startsWith("Break"))return w.breakStruct;if(u.getClass()===l.paths.macro)return w.macro;const t=(e=u.getHIDAttribute())==null?void 0:e.toString();return t?t.includes("Mouse")?w.mouse:t.includes("Gamepad_Special")?w.keyboard:t.includes("Gamepad")||t.includes("Steam")?w.gamepad:t.includes("Touch")?w.touchpad:w.keyboard:u.getDelegatePin()?w.event:((i=u.ObjectRef)==null?void 0:i.type)===l.paths.ambientSound?w.sound:w.functionSymbol}const Ht=class Ht extends O{get length(){return this.values.length}constructor(t=[]){super(),this.values=t}static createGrammar(t=(e=>(e=this.type)==null?void 0:e.grammar)()??g.lazy(()=>this.unknownEntityGrammar)){var i;return this.inlined?t:g.seq(g.reg(/\(\s*/),t.sepBy(N.commaSeparation).opt(),g.reg(/\s*(,\s*)?\)/,1)).map(([s,r,n])=>{r=r instanceof Array?r:[];let c=this;return n!==void 0!==c.trailing&&(c=c.flagTrailing(n!==void 0)),new c(r)}).label(`ArrayEntity of ${((i=this.type)==null?void 0:i.className())??"unknown values"}`)}static flagInlined(t=!0){const e=this.asUniqueClass();return e.inlined=t,e.grammar=e.createGrammar(),e}static of(t){const e=this.asUniqueClass();return e.type=t,e.grammar=e.createGrammar(),e}doSerialize(t=!1,e="",i=this.constructor,s=i.printKey,r=i.keySeparator,n=i.attributeSeparator,c=i.wrap){if(i.inlined)return super.serialize.bind(this.values,t,e,i,s,r,n,c)();let h=this.values.map(d=>d==null?void 0:d.serialize(t)).join(i.attributeSeparator);return this.trailing&&(h+=i.attributeSeparator),`(${h})`}valueOf(){return this.values}equals(t){if(!(t instanceof Ht)||this.values.length!==t.values.length)return!1;for(let e=0;e<this.values.length;++e)if(!this.values[e].equals(t.values[e]))return!1;return!0}};o(Ht,"type"),o(Ht,"grammar",Ht.createGrammar());let K=Ht;var ha;typeof window>"u"?Mo(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]).then(u=>ha=u.default).catch():ha=window.crypto;const ts=class ts extends O{static generateGuid(){let t=new Uint32Array(4);ha.getRandomValues(t);let e="";return t.forEach(i=>{e+=("0".repeat(8)+i.toString(16).toUpperCase()).slice(-8)}),e}constructor(t=ts.generateGuid()){super(),this.value=t}static createGrammar(){return g.reg(/[0-9A-F]{32}/i).map(t=>new this(t)).label("GuidEntity")}serialize(t=!1,e="",i=this.constructor){let s=this.value;return i.serialized&&(s=`"${s}"`),s}toString(){return this.value}};o(ts,"grammar",ts.createGrammar());let J=ts;const kn=class kn extends L{get value(){return super.value}set value(t){t=Math.trunc(t),t>=1<<31&&t<-(1<<31)&&(t=Math.floor(t),super.value=t)}static createGrammar(){return g.numberInteger.map(t=>new this(t))}};o(kn,"grammar",kn.createGrammar());let U=kn;const An=class An extends U{get value(){return super.value}set value(t){t=Math.round(y.clamp(t,0)),super.value=t}static createGrammar(){return g.numberNatural.map(t=>new this(t))}};o(An,"grammar",An.createGrammar());let an=An;const Jr={[l.paths.niagaraBool]:E`146, 0, 0`,[l.paths.niagaraDataInterfaceVolumeTexture]:E`0, 168, 242`,[l.paths.niagaraFloat]:E`160, 250, 68`,[l.paths.niagaraMatrix]:E`0, 88, 200`,[l.paths.niagaraNumeric]:E`0, 88, 200`,[l.paths.niagaraPosition]:E`251, 146, 251`,[l.paths.quat4f]:E`0, 88, 200`,[l.paths.rotator]:E`157, 177, 251`,[l.paths.transform]:E`227, 103, 0`,[l.paths.vector]:E`251, 198, 34`,[l.paths.vector3f]:E`250, 200, 36`,[l.paths.vector4f]:E`0, 88, 200`,Any:E`132, 132, 132`,"Any[]":E`132, 132, 132`,audio:E`252, 148, 252`,blue:E`0, 0, 255`,bool:E`146, 0, 0`,byte:E`0, 109, 99`,class:E`88, 0, 186`,default:E`255, 255, 255`,delegate:E`255, 56, 56`,enum:E`0, 109, 99`,exec:E`240, 240, 240`,float:E`160, 252, 70`,green:E`0, 255, 0`,int:E`31, 224, 172`,int32:E`30, 224, 172`,int64:E`169, 223, 172`,interface:E`238, 252, 168`,name:E`201, 128, 251`,object:E`0, 168, 242`,Param:E`255, 166, 39`,"Param[]":E`255, 166, 39`,Point:E`63, 137, 255`,"Point[]":E`63, 137, 255`,real:E`54, 208, 0`,red:E`255, 0, 0`,string:E`251, 0, 208`,struct:E`0, 88, 200`,Surface:E`69, 196, 126`,"Surface[]":E`69, 196, 126`,text:E`226, 121, 167`,time:E`148, 252, 252`,Volume:E`230, 69, 188`,"Volume[]":E`230, 69, 188`,wildcard:E`128, 120, 120`},su=E`120, 120, 120`;function ru(u){var t,e,i;if(((t=u.PinType.PinCategory)==null?void 0:t.toString())==="mask"){const s=Jr[u.PinType.PinSubCategory];if(s)return s}else if(((e=u.PinType.PinCategory)==null?void 0:e.toString())==="optional")return su;return Jr[u.getType()]??Jr[(i=u.PinType.PinCategory)==null?void 0:i.toString().toLowerCase()]??Jr.default}function nu(u){var i,s;let t=u.PinFriendlyName?u.PinFriendlyName.toString():y.formatStringName(((i=u.PinName)==null?void 0:i.toString())??""),e;return(e=(s=u.PinToolTip)==null?void 0:s.toString().match(/\s*(.+?(?=\n)|.+\S)\s*/))&&e[1].toLowerCase()===t.toLowerCase()?e[1]:t}const Mn=class Mn extends U{get value(){return super.value}set value(t){t=Math.trunc(t),t>=0&&t<256&&(super.value=t)}createGrammar(){return g.numberByte.map(t=>new this(t))}};o(Mn,"grammar",Mn.createGrammar());let da=Mn;const ae=class ae extends O{constructor(t=""){super(),this.value=t}static createGrammar(){return g.doubleQuotedString.map(t=>new this(ae.unescape(t))).label("StringEntity")}static escape(t,e=!0){let i=t.replaceAll(new RegExp(`(${ae.escapedCharacters.source})`,"g"),"\\$1");return e&&(i=i.replaceAll(`
`,"\\n").replaceAll("	","\\t")),i}static unescape(t){return t.replaceAll(new RegExp(ae.unescapedBackslash.source+"t","g"),"	").replaceAll(new RegExp(ae.unescapedBackslash.source+"n","g"),`
`).replaceAll(new RegExp(`\\\\(${ae.escapedCharacters.source})`,"g"),"$1")}doSerialize(t=!1){let e=`"${ae.escape(this.value)}"`;return t&&(e=ae.escape(e,!1)),e}valueOf(){return this.value}toString(){return this.value}};o(ae,"grammar",ae.createGrammar()),o(ae,"escapedCharacters",/['"\\]/g),o(ae,"unescapedBackslash",new RegExp("(?<=(?:[^\\\\]|^)(?:\\\\\\\\)*)\\\\(?!\\\\)"));let M=ae;const is=class is extends O{static createGrammar(){return M.grammar}static from(t){const e=this.asUniqueClass();return e.f=t,e}static compute(t){return this.f(t)}};o(is,"grammar",is.createGrammar()),o(is,"f");let pa=is;const Ft=class Ft extends O{static createGrammar(){return N.symbol.map(t=>new this(t)).label("SymbolEntity")}constructor(t=""){super(),this.value=t}serialize(t=!1,e="",i=this.constructor){let s=this.value;return i.serialized&&(s=`"${s}"`),s}toString(){return this.value}};o(Ft,"attributeConverter",{fromAttribute:(t,e)=>new Ft(t),toAttribute:(t,e)=>t.toString()}),o(Ft,"grammar",Ft.createGrammar());let H=Ft;const Ln=class Ln extends H{static createGrammar(){return N.symbol.map(t=>new this(t))}};o(Ln,"grammar",Ln.createGrammar());let ln=Ln;const Tn=class Tn extends ln{static createGrammar(){return g.reg(N.Regex.InsideString).map(t=>new this(t))}};o(Tn,"grammar",Tn.createGrammar());let ma=Tn;const ss=class ss extends O{constructor(t=""){super(),this.value=t}static createGrammar(){return g.alt(g.seq(g.reg(new RegExp(`${this.lookbehind}\\s*\\(`)),g.doubleQuotedString,g.reg(/\s*\)/)).map(([t,e,i])=>Number(e)),g.reg(new RegExp(this.lookbehind)).map(()=>0)).map(t=>new this(t)).label("InvariantTextEntity")}doSerialize(){return this.lookbehind+"("+this.value+")"}valueOf(){return this.value}};o(ss,"lookbehind","INVTEXT"),o(ss,"grammar",ss.createGrammar());let vs=ss;const ge=class ge extends O{constructor(t={}){super(t),this.namespace,this.key,this.value}static createGrammar(){return g.regArray(new RegExp(String.raw`${ge.lookbehind}\s*\(`+String.raw`\s*"(?<namespace>${N.Regex.InsideString.source})"\s*,`+String.raw`\s*"(?<key>${N.Regex.InsideString.source})"\s*,`+String.raw`\s*"(?<value>${N.Regex.InsideString.source})"\s*`+String.raw`(?<trailing>,\s+)?`+String.raw`\)`,"m")).map(({groups:{namespace:t,key:e,value:i,trailing:s}})=>new this({namespace:new this.attributes.namespace(y.unescapeString(t)),key:new this.attributes.namespace(y.unescapeString(e)),value:new this.attributes.namespace(y.unescapeString(i)),trailing:s!==void 0})).label("LocalizedTextEntity")}toString(){return y.capitalFirstLetter(this.value.valueOf())}};o(ge,"attributeSeparator",", "),o(ge,"printKey",t=>""),o(ge,"lookbehind","NSLOCTEXT"),o(ge,"attributes",{...F(ge,ge,"attributes"),namespace:M.withDefault(),key:M.withDefault(),value:M.withDefault()}),o(ge,"grammar",ge.createGrammar());let ws=ge;const tt=class tt extends O{constructor(t){super(),this.values=t}static createGrammar(){return g.lazy(()=>g.seq(g.reg(new RegExp(String.raw`(${this.lookbehind.join("|")})\s*\(\s*`),1),g.alt(...[M,ws,vs,tt].map(t=>t.grammar)).sepBy(g.reg(/\s*\,\s*/)),g.reg(/\s*\)/)).map(([t,e])=>{const i=new this(e);return i.lookbehind=t,i})).label("FormatTextEntity")}doSerialize(t=!1,e="",i=this.constructor,s=i.printKey,r=i.keySeparator,n=i.attributeSeparator,c=i.wrap){const h=i.attributeSeparator;return this.lookbehind+"("+this.values.map(d=>d.serialize(t)).join(h)+(i.trailing?h:"")+")"}toString(){var s,r;const t=(r=(s=this.values)==null?void 0:s[0])==null?void 0:r.toString();if(!t)return"";const e=this.values.slice(1).map(n=>n==null?void 0:n.valueOf());return this.lookbehind=="LOCGEN_FORMAT_NAMED"?t.replaceAll(/\{([a-zA-Z]\w*)\}/g,(n,c)=>{const h=e.indexOf(c)+1;return h>0&&h<e.length?e[h]:n}):this.lookbehind=="LOCGEN_FORMAT_ORDERED"?t.replaceAll(/\{(\d+)\}/g,(n,c)=>{const h=Number(c);return h<e.length?e[h]:n}):""}};o(tt,"attributeSeparator",", "),o(tt,"lookbehind",["LOCGEN_FORMAT_NAMED","LOCGEN_FORMAT_ORDERED"]),o(tt,"grammar",tt.createGrammar());let on=tt;const $n=class $n extends O{constructor(e=0n){super();o(this,"_value");this.value=BigInt(e)}get value(){return this._value}set value(e){e>=-(1n<<63n)&&e<1n<<63n&&(this._value=e)}static createGrammar(){return g.numberBigInteger.map(e=>new this(e))}serialize(e=!1,i="",s=this.constructor){let r=this.value.toString();return s.serialized&&(r=`"${r}"`),r}valueOf(){return this.value}toString(){return this.value.toString()}};o($n,"grammar",$n.createGrammar());let ga=$n;var ei,ti,ii,Nt;const xe=class xe extends O{constructor(e="None",i="",s=null){super();p(this,ei);p(this,ti);p(this,ii);p(this,Nt);m(this,ei,e),m(this,ti,i),m(this,Nt,s??(this.type.includes("/")||this.path?`"${this.type+(this.path?`'${this.path}'`:"")}"`:this.type))}get type(){return a(this,ei)}set type(e){m(this,ei,e)}get path(){return a(this,ti)}set path(e){m(this,ti,e)}get full(){return a(this,Nt)}set full(e){m(this,Nt,e)}static createGrammar(){return g.alt(this.createFullReferenceSerializedGrammar(),this.createFullReferenceGrammar(),this.createTypeReferenceGrammar()).label("ObjectReferenceEntity")}static createFullReferenceGrammar(){return g.regArray(new RegExp("("+this.typeReference.getParser().regexp.source+")(?:"+this._quotedParser.getParser().parser.regexp.source+")")).map(([e,i,...s])=>new this(i,s.find(r=>r),e))}static createFullReferenceSerializedGrammar(){return g.regArray(new RegExp('"('+N.Regex.InsideString.source+"?)(?:'("+N.Regex.InsideSingleQuotedString.source+`?)')?"`)).map(([e,i,s])=>new this(i,s,e))}static createTypeReferenceGrammar(){return this.typeReference.map(e=>new this(e,"",e))}static createNoneInstance(){return new xe("None","","None")}getName(e=!1){return y.getNameFromPath(this.path.replace(/_C$/,""),e)}doSerialize(e=!1){return e?(a(this,ii)===void 0&&m(this,ii,y.escapeString(a(this,Nt),!1)),a(this,ii)):this.full}equals(e){return e instanceof xe?this.type==e.type&&this.path==e.path:!1}};ei=new WeakMap,ti=new WeakMap,ii=new WeakMap,Nt=new WeakMap,o(xe,"_quotedParser",g.regArray(new RegExp(`'"(${N.Regex.InsideString.source})"'|'(${N.Regex.InsideSingleQuotedString.source})'`)).map(([e,i,s])=>i??s)),o(xe,"typeReference",g.reg(new RegExp(N.Regex.Path.source+"|"+N.symbol.getParser().regexp.source))),o(xe,"fullReferenceGrammar",xe.createFullReferenceGrammar()),o(xe,"grammar",xe.createGrammar());let G=xe;const On=class On extends O{constructor(t=null,e=null){super(),this.objectName=t,this.pinGuid=e}static createGrammar(){return g.seq(H.grammar,g.whitespace,J.grammar).map(([t,e,i])=>new this(t,i)).label("PinReferenceEntity")}doSerialize(){return this.objectName.serialize()+" "+this.pinGuid.serialize()}};o(On,"grammar",On.createGrammar());let Me=On;const it=class it extends O{constructor(t){super(t),this.MemberParent,this.MemberName,this.MemberGuid}static createGrammar(){return N.createEntityGrammar(this,N.commaSeparation,0,0)}};o(it,"attributes",{...F(it,it,"attributes"),MemberParent:G,MemberName:M,MemberGuid:J}),o(it,"grammar",it.createGrammar());let Ss=it;const st=class st extends O{constructor(t={}){super(t),this.PinCategory,this.PinSubCategory,this.PinSubCategoryObject,this.PinSubCategoryMemberReference,this.ContainerType,this.bIsReference,this.bIsConst,this.bIsWeakPointer,this.bIsUObjectWrapper,this.bIsUObjectWrapper,this.bSerializeAsSinglePrecisionFloat}static createGrammar(){return N.createEntityGrammar(this).label("PinTypeEntity")}copyTypeFrom(t){for(const e of this.keys)t[e]!==void 0&&(this[e]=t[e])}};o(st,"attributes",{...F(st,st,"attributes"),PinCategory:M.withDefault(),PinSubCategory:M.withDefault(),PinSubCategoryObject:G,PinSubCategoryMemberReference:Ss,ContainerType:H,bIsReference:k,bIsConst:k,bIsWeakPointer:k,bIsUObjectWrapper:k,bSerializeAsSinglePrecisionFloat:k}),o(st,"grammar",st.createGrammar());let fa=st;const rt=class rt extends O{constructor(t){super(t),this.X,this.Y}static createGrammar(){return N.createEntityGrammar(this,N.commaSeparation,1).label("Vector2DEntity")}toArray(){return[this.X.valueOf(),this.Y.valueOf()]}};o(rt,"attributes",{...F(rt,rt,"attributes"),X:L.withDefault(),Y:L.withDefault()}),o(rt,"grammar",rt.createGrammar());let pe=rt;const Bn=class Bn extends pe{static createGrammar(){return g.alt(g.regArray(new RegExp(/X\s*=\s*/.source+"(?<x>"+N.numberRegexSource+")\\s+"+/Y\s*=\s*/.source+"(?<y>"+N.numberRegexSource+")")).map(({groups:{x:t,y:e}})=>new this({X:new pe.attributes.X(t),Y:new pe.attributes.Y(e)})),pe.grammar.map(t=>new this({X:t.X,Y:t.Y}))).label("RBSerializationVector2DEntity")}};o(Bn,"grammar",Bn.createGrammar());let ba=Bn;const nt=class nt extends O{constructor(t){super(t),this.R,this.P,this.Y}static createGrammar(){return N.createEntityGrammar(this,N.commaSeparation,1).label("RotatorEntity")}getRoll(){return this.R}getPitch(){return this.P}getYaw(){return this.Y}};o(nt,"attributes",{...F(nt,nt,"attributes"),R:L.withDefault(),P:L.withDefault(),Y:L.withDefault()}),o(nt,"grammar",nt.createGrammar());let ke=nt;const rs=class rs extends ke{static createGrammar(){return g.alt(g.regArray(new RegExp(`(${L.numberRegexSource})`+String.raw`\s*,\s*`+`(${L.numberRegexSource})`+String.raw`\s*,\s*`+`(${L.numberRegexSource})`)).map(([t,e,i,s,r,n,c])=>new this({R:new ke.attributes.R(n,c==null?void 0:c.length),P:new ke.attributes.P(e,i==null?void 0:i.length),Y:new ke.attributes.Y(s,r==null?void 0:r.length)})),ke.grammar.map(t=>new this({R:t.R,P:t.P,Y:t.Y}))).label("SimpleSerializationRotatorEntity")}doSerialize(){const t=this.constructor.attributeSeparator;return this.P.serialize()+t+this.Y.serialize()+t+this.R.serialize()+(this.trailing?t:"")}};o(rs,"attributeSeparator",", "),o(rs,"grammar",rs.createGrammar());let va=rs;const ns=class ns extends pe{static createGrammar(){return g.alt(g.regArray(new RegExp(`(${L.numberRegexSource})`+String.raw`\s*,\s*`+`(${L.numberRegexSource})`)).map(([t,e,i,s,r])=>new this({X:new pe.attributes.X(e,i==null?void 0:i.length),Y:new pe.attributes.Y(s,r==null?void 0:r.length)})),pe.grammar.map(t=>new this({X:t.X,Y:t.Y}))).label("SimpleSerializationVector2DEntity")}doSerialize(){const t=this.constructor.attributeSeparator;return this.X.serialize()+t+this.Y.serialize()+(this.trailing?t:"")}};o(ns,"attributeSeparator",", "),o(ns,"grammar",ns.createGrammar());let wa=ns;const at=class at extends O{constructor(t){super(t),this.X,this.Y,this.Z,this.W}static createGrammar(){return N.createEntityGrammar(this,N.commaSeparation,1).label("Vector4DEntity")}toArray(){return[this.X.valueOf(),this.Y.valueOf(),this.Z.valueOf(),this.W.valueOf()]}};o(at,"attributes",{...F(at,at,"attributes"),X:L.withDefault(),Y:L.withDefault(),Z:L.withDefault(),W:L.withDefault()}),o(at,"grammar",at.createGrammar());let Ee=at;const In=class In extends Ee{static createGrammar(){return g.alt(g.regArray(new RegExp(`(${N.numberRegexSource})`+String.raw`\s*,\s*`+`(${N.numberRegexSource})`+String.raw`\s*,\s*`+`(${N.numberRegexSource})`+String.raw`\s*,\s*`+`(${N.numberRegexSource})`)).map(([t,e,i,s,r])=>new this({X:new Ee.attributes.X(e),Y:new Ee.attributes.Y(i),Z:new Ee.attributes.Z(s),W:new Ee.attributes.W(r)})),Ee.grammar)}};o(In,"grammar",In.createGrammar());let Sa=In;const zt=class zt extends de{static createGrammar(){return g.alt(g.regArray(new RegExp(`(${L.numberRegexSource})`+(this.allowShortSerialization?"(?:":"")+String.raw`\s*,\s*`+`(${L.numberRegexSource})`+String.raw`\s*,\s*`+`(${L.numberRegexSource})`+(this.allowShortSerialization?")?":""))).map(([t,e,i,s,r,n,c])=>new this({X:new de.attributes.X(e,i==null?void 0:i.length),Y:new de.attributes.Y(s,r==null?void 0:r.length),Z:new de.attributes.Z(n,c==null?void 0:c.length)})),de.grammar.map(t=>new this({X:t.X,Y:t.Y,Z:t.Z})))}static flagAllowShortSerialization(t=!0){const e=this.asUniqueClass();return t!==e.allowShortSerialization&&(e.allowShortSerialization=t,e.grammar=e.createGrammar()),e}doSerialize(){const t=this.constructor.attributeSeparator;return this.X.serialize()+t+this.Y.serialize()+t+this.Z.serialize()+(this.trailing?t:"")}};o(zt,"allowShortSerialization",!1),o(zt,"attributeSeparator",", "),o(zt,"grammar",zt.createGrammar());let Ji=zt;var Dn,Gn,Vs,Rs,Hs;const oe=class oe extends O{constructor(e={}){super(e);p(this,Vs,!1);p(this,Rs,null);p(this,Hs);this.PinId,this.PinName,this.PinFriendlyName,this.PinToolTip,this.Direction,this.PinType,this.LinkedTo,this.DefaultValue,this.AutogeneratedDefaultValue,this.DefaultObject,this.PersistentGuid,this.bHidden,this.bNotConnectable,this.bDefaultValueIsReadOnly,this.bDefaultValueIsIgnored,this.bAdvancedView,this.bOrphanedPin,this.objectEntity}set recomputesNodeTitleOnChange(e){m(this,Vs,e)}get recomputesNodeTitleOnChange(){return a(this,Vs)}get objectEntity(){try{return a(this,Rs)}catch{return null}}set objectEntity(e){m(this,Rs,e)}get pinIndex(){return a(this,Hs)}set pinIndex(e){m(this,Hs,e)}static createGrammar(){return N.createEntityGrammar(this)}static fromLegacyObject(e){return new oe(e)}getType(){var i,s,r,n,c,h,d,f,v,C;const e=(i=this.PinType.PinCategory)==null?void 0:i.toString().toLocaleLowerCase();if(e==="struct"||e==="class"||e==="object"||e==="type")return(s=this.PinType.PinSubCategoryObject)==null?void 0:s.path;if(this.isEnum())return"enum";if((r=this.objectEntity)!=null&&r.isPcg()){const P=this.objectEntity.getPcgSubobject(),I=this.isInput()?(n=P.InputPins)==null?void 0:n.valueOf()[this.pinIndex]:(c=P.OutputPins)==null?void 0:c.valueOf()[this.pinIndex];if(I){const B=P[l.subObjectAttributeNameFromReference(I,!0)];let $=((d=(h=B.Properties)==null?void 0:h.AllowedTypes)==null?void 0:d.toString())??"";if($==""&&($=this.PinType.PinCategory??"",$==""&&($="Any")),$)return((f=B.Properties.bAllowMultipleData)==null?void 0:f.valueOf())!==!1&&((v=B.Properties.bAllowMultipleConnections)==null?void 0:v.valueOf())!==!1&&($+="[]"),$}}if(e==="optional"){const P=(C=this.PinType.PinSubCategory)==null?void 0:C.toString();switch(P){case"red":return"real";case"rg":return"rg";case"rgb":return l.paths.vector;case"rgba":return l.paths.linearColor;default:return P}}return e}getEntityType(e=!1){const i=this.getType(),s=a(oe,Dn)[i],r=a(oe,Gn)[i];return e&&r!==void 0?r:s}pinTitle(){return nu(this)}copyTypeFrom(e){this.PinType=e.PinType}getDefaultValue(e=!1){return this.DefaultValue===void 0&&e&&(this.DefaultValue=new(this.getEntityType(!0))),this.DefaultValue}isEnum(){var i;const e=(i=this.PinType.PinSubCategoryObject)==null?void 0:i.type;return e===l.paths.enum||e===l.paths.userDefinedEnum||(e==null?void 0:e.toLowerCase())==="enum"}isExecution(){return this.PinType.PinCategory.toString()==="exec"}isHidden(){var e;return(e=this.bHidden)==null?void 0:e.valueOf()}isInput(){var e;return!this.isHidden()&&((e=this.Direction)==null?void 0:e.toString())!="EGPD_Output"}isOutput(){var e;return!this.isHidden()&&((e=this.Direction)==null?void 0:e.toString())=="EGPD_Output"}isLinked(){var e;return((e=this.LinkedTo)==null?void 0:e.length)>0}linkTo(e,i){var r;return((r=this.LinkedTo.values)==null?void 0:r.some(n=>n.objectName.toString()==e&&n.pinGuid.toString()==i.PinId.toString()))?!1:(this.LinkedTo.values.push(new Me(new H(e),i.PinId)),!0)}unlinkFrom(e,i){var r;const s=(r=this.LinkedTo.values)==null?void 0:r.findIndex(n=>n.objectName.toString()==e&&n.pinGuid.toString()==i.PinId.toString());return s>=0?(this.LinkedTo.values.splice(s,1),this.LinkedTo.length===0&&oe.attributes.LinkedTo.default===void 0&&(this.LinkedTo.values=[]),!0):!1}getSubCategory(){var e;return(e=this.PinType.PinSubCategoryObject)==null?void 0:e.path}pinColor(){return ru(this)}};Dn=new WeakMap,Gn=new WeakMap,Vs=new WeakMap,Rs=new WeakMap,Hs=new WeakMap,o(oe,"lookbehind","Pin"),p(oe,Dn,{bool:k,byte:da,enum:ln,exec:M,int:U,int64:ga,name:M,real:L,string:M,[l.paths.linearColor]:se,[l.paths.niagaraPosition]:de,[l.paths.rotator]:ke,[l.paths.vector]:de,[l.paths.vector2D]:pe,[l.paths.vector4f]:Ee}),p(oe,Gn,{enum:ma,rg:ba,[l.paths.niagaraPosition]:Ji.flagAllowShortSerialization(),[l.paths.rotator]:va,[l.paths.vector]:Ji,[l.paths.vector2D]:wa,[l.paths.vector3f]:Ji,[l.paths.vector4f]:Sa}),o(oe,"attributes",{PinId:J.withDefault(),PinName:M.withDefault(),PinFriendlyName:Xr.accepting(ws,on,vs,M),PinToolTip:M,Direction:M,PinType:fa.withDefault().flagInlined(),LinkedTo:K.of(Me).withDefault().flagSilent(),SubPins:K.of(Me),ParentPin:Me,DefaultValue:pa.from(e=>{var i;return((i=e.getEntityType(!0))==null?void 0:i.flagSerialized())??M}),AutogeneratedDefaultValue:M,DefaultObject:G,PersistentGuid:J,bHidden:k.withDefault(),bNotConnectable:k.withDefault(),bDefaultValueIsReadOnly:k.withDefault(),bDefaultValueIsIgnored:k.withDefault(),bAdvancedView:k.withDefault(),bOrphanedPin:k}),o(oe,"grammar",oe.createGrammar());let ee=oe;const au=u=>{var t,e,i;return((i=(e=(t=u.PinName)==null?void 0:t.toString().match(/^\s*([A-Z])\s*$/))==null?void 0:e[1])==null?void 0:i.charCodeAt(0))-65};function lu(u){var c,h;let t,e,i;const s=u.getType();let r,n;switch(s){case l.paths.commutativeAssociativeBinaryOperator:case l.paths.promotableOperator:switch(n=(h=(c=u.FunctionReference)==null?void 0:c.MemberName)==null?void 0:h.toString(),n){default:if(!(n!=null&&n.startsWith("Add_"))&&!(n!=null&&n.startsWith("Subtract_"))&&!(n!=null&&n.startsWith("Multiply_"))&&!(n!=null&&n.startsWith("Divide_")))break;case"And_Int64Int64":case"And_IntInt":case"BMax":case"BMin":case"BooleanAND":case"BooleanNAND":case"BooleanOR":case"Concat_StrStr":case"FMax":case"FMin":case"Max":case"MaxInt64":case"Min":case"MinInt64":case"Or_Int64Int64":case"Or_IntInt":t??(t=()=>u.getPinEntities().filter(d=>d.isInput())),e??(e=au),i??(i=(d,f=-1,v=-1)=>{const C=String.fromCharCode(d>=0?d:v+65+1);return u.NumAdditionalInputs=new an(t().length-1),C});break}break;case l.paths.executionSequence:r??(r="Then");case l.paths.multiGate:r??(r="Out"),t??(t=()=>u.getPinEntities().filter(d=>d.isOutput())),e??(e=d=>{var f,v;return Number((v=(f=d.PinName)==null?void 0:f.toString().match(new RegExp(String.raw`^\s*${r}[_\s]+(\d+)\s*$`,"i")))==null?void 0:v[1])}),i??(i=(d,f=-1,v=-1,C)=>`${r} ${d>=0?d:f>0?`${r} 0`:v+1}`);break;case l.paths.switchInteger:t??(t=()=>u.getPinEntities().filter(d=>d.isOutput())),e??(e=d=>{var f,v;return Number((v=(f=d.PinName)==null?void 0:f.toString().match(/^\s*(\d+)\s*$/))==null?void 0:v[1])}),i??(i=(d,f=-1,v=-1,C)=>(d<0?v+1:d).toString());break;case l.paths.switchGameplayTag:i??(i=(d,f=-1,v=-1,C)=>{const P=`Case_${d>=0?d:f>0?"0":v+1}`;return u.PinNames??(u.PinNames=new K),u.PinNames.valueOf().push(new M(P)),delete u.PinTags.valueOf()[u.PinTags.length-1],u.PinTags.valueOf()[u.PinTags.length]=null,P});case l.paths.switchName:case l.paths.switchString:t??(t=()=>u.getPinEntities().filter(d=>d.isOutput())),e??(e=d=>{var f;return Number((f=d.PinName.toString().match(/^\s*Case[_\s]+(\d+)\s*$/i))==null?void 0:f[1])}),i??(i=(d,f=-1,v=-1,C)=>{const P=`Case_${d>=0?d:f>0?"0":v+1}`;return u.PinNames??(u.PinNames=new K),u.PinNames.valueOf().push(new M(P)),P});break}if(t)return()=>{let d=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER,v=[];const C=t().reduce(($,Z)=>{const ne=e(Z);if(isNaN(ne)){if($===void 0)return Z}else if(v.push(ne),d=Math.min(ne,d),ne>f)return f=ne,Z;return $},void 0);if((d===Number.MAX_SAFE_INTEGER||f===Number.MIN_SAFE_INTEGER)&&(d=void 0,f=void 0),!C)return null;v.sort(($,Z)=>$<Z?-1:$===Z?0:1);let P=v[0],I=v.findIndex($=>{const Z=$-P>1;return P=$,Z});const B=new ee(C);return B.PinId=new J,B.PinName=new M(i(I,d,f,B)),B.PinToolTip=void 0,B.DefaultValue&&(B.DefaultValue=new B.DefaultValue.constructor),u.getCustomproperties(!0).push(B),B}}const lt=class lt extends O{constructor(t){super(t),this.MacroGraph,this.GraphBlueprint,this.GraphGuid}static createGrammar(){return N.createEntityGrammar(this)}getMacroName(){const t=this.MacroGraph.path.search(":");return this.MacroGraph.path.substring(t+1)}};o(lt,"attributes",{...F(lt,lt,"attributes"),MacroGraph:G,GraphBlueprint:G,GraphGuid:J}),o(lt,"grammar",lt.createGrammar());let Ca=lt;const Vn=class Vn extends O{static createGrammar(){return g.reg(new RegExp(String.raw`\(${g.whitespaceInlineOpt.getParser().regexp.source}\)`)).map(t=>new this).label("NullEntity")}serialize(t=!1,e="",i=this.constructor){let s="()";return i.serialized&&(s=`"${s}"`),s}};o(Vn,"grammar",Vn.createGrammar());let un=Vn;const ot=class ot extends O{constructor(t={}){super(t),this.ScriptVariable,this.OriginalChangeId}static createGrammar(){return N.createEntityGrammar(this).label("ScriptVariableEntity")}};o(ot,"attributes",{...F(ot,ot,"attributes"),ScriptVariable:G,OriginalChangeId:J}),o(ot,"grammar",ot.createGrammar());let ya=ot;const Rn=class Rn extends ee{static createGrammar(){return g.seq(g.reg(new RegExp(`(${N.Regex.Symbol.source})\\s*\\(\\s*`),1),N.createAttributeGrammar(this).sepBy(N.commaSeparation),g.reg(/\s*(?:,\s*)?\)/)).map(([t,e,i])=>{t??(t="");let s={};return t.length&&(s.lookbehind=t),e.forEach(r=>r(s)),new this(s)}).label("UnknownPinEntity")}};o(Rn,"grammar",Rn.createGrammar());let cn=Rn;const ut=class ut extends O{constructor(t){super(t),this.MemberScope,this.MemberName,this.MemberGuid,this.bSelfContext}static createGrammar(){return N.createEntityGrammar(this).label("VariableReferenceEntity")}};o(ut,"attributes",{...F(ut,ut,"attributes"),MemberScope:M,MemberName:M.withDefault(),MemberGuid:J,bSelfContext:k}),o(ut,"grammar",ut.createGrammar());let hn=ut;var Fs,Hn,Pe;const j=class j extends O{constructor(e={}){if("NodePosX"in e!="NodePosY"in e){const c=Object.entries(e),[h,d]="NodePosX"in e?["NodePosY",Object.keys(e).indexOf("NodePosX")+1]:["NodePosX",Object.keys(e).indexOf("NodePosY")];c.splice(d,0,[h,new U(0)]),e=Object.fromEntries(c)}super(e);p(this,Fs,!1);p(this,Pe);this.AddedPins,this.AdvancedPinDisplay,this.Archetype,this.AxisKey,this.bIsPureFunc,this.BlueprintElementInstance,this.ConstA,this.ConstB,this.BlueprintElementType,this.Class,this.CommentColor,this.ComponentPropertyName,this.CustomFunctionName,this.CustomProperties,this.DelegatePropertyName,this.DelegateReference,this.EnabledState,this.Enum,this.EnumEntries,this.EventReference,this.ExportedNodes,this.ExportPath,this.FunctionDisplayName,this.FunctionReference,this.FunctionScript,this.Graph,this.HiGenGridSize,this.InputAxisKey,this.InputKey,this.InputName,this.InputPins,this.InputType,this.MacroGraphReference,this.MaterialExpression,this.MaterialExpressionComment,this.MaterialExpressionEditorX,this.MaterialExpressionEditorY,this.MaterialFunction,this.Name,this.Node,this.NodeComment,this.NodeHeight,this.NodePosX,this.NodePosY,this.NodeTitle,this.NodeTitleColor,this.NodeWidth,this.NumAdditionalInputs,this.ObjectRef,this.Operation,this.OpName,this.OutputPins,this.PCGNode,this.PinTags,this.PinNames,this.PositionX,this.PositionY,this.ProxyFactoryFunctionName,this.ScriptVariables,this.SettingsInterface,this.SizeX,this.SizeY,this.StructType,this.SubgraphInstance,this.TargetType,this.Text,this.Text,this.VariableReference,this.Pins instanceof K&&this.Pins.valueOf().forEach(c=>{const h=this[l.subObjectAttributeNameFromReference(c,!0)];if(h){const d=ee.fromLegacyObject(h);d.LinkedTo=new ee.attributes.LinkedTo,this.getCustomproperties(!0).push(d),this.CustomProperties.ignored=!0}});const i=this.getMaterialSubobject();if(i){const c=i;if(c.SizeX!==void 0&&(c.SizeX.getter=()=>this.NodeWidth),c.SizeY&&(c.SizeY.getter=()=>this.NodeHeight),c.Text&&(c.Text.getter=()=>this.NodeComment),c.MaterialExpressionEditorX&&(c.MaterialExpressionEditorX.getter=()=>this.NodePosX),c.MaterialExpressionEditorY&&(c.MaterialExpressionEditorY.getter=()=>this.NodePosY),this.getType()===l.paths.materialExpressionComponentMask){const h=l.rgba.map(f=>{const v=this.getPinEntities().find(C=>C.PinName.toString()===f);return v.recomputesNodeTitleOnChange=!0,v});c.keys=[...l.rgba,...c.keys];const d=ie.of(k).withDefault().flagSilent();c.R=new d(()=>h[0].DefaultValue),c.G=new d(()=>h[1].DefaultValue),c.B=new d(()=>h[2].DefaultValue),c.A=new d(()=>h[3].DefaultValue)}else if(this.getType()===l.paths.materialExpressionSubtract){const h=ie.of(L.withPrecision(6)).withDefault(()=>new ie(()=>new L(1))).flagSilent(),d=this.getCustomproperties().find(v=>{var C;return((C=v.PinName)==null?void 0:C.toString())==="A"}),f=this.getCustomproperties().find(v=>{var C;return((C=v.PinName)==null?void 0:C.toString())==="B"});(d||f)&&(c.keys=["ConstA","ConstB",...c.keys],d&&(d.recomputesNodeTitleOnChange=!0,c.ConstA=new h(()=>d.DefaultValue)),f&&(f.recomputesNodeTitleOnChange=!0,c.ConstB=new h(()=>f.DefaultValue)))}}const s=this.getPcgSubobject();s&&(s.PositionX&&(s.PositionX.getter=()=>this.NodePosX),s.PositionY&&(s.PositionY.getter=()=>this.NodePosY),s.getSubobjects().forEach(c=>{if(c.Node!==void 0){const h=c.Node.getter();h.type===this.PCGNode.type&&h.path===`${this.Name}.${this.PCGNode.path}`&&(c.Node.getter=()=>new G(this.PCGNode.type,`${this.Name}.${this.PCGNode.path}`,h.full))}}));let r=0,n=0;this.getCustomproperties().forEach((c,h)=>{c.objectEntity=this,c.pinIndex=c.isInput()?r++:c.isOutput()?n++:h})}get exported(){return a(this,Fs)}set exported(e){m(this,Fs,e)}static createGrammar(){return g.seq(g.reg(/Begin +Object/),g.seq(g.whitespace,g.alt(this.createSubObjectGrammar(),this.customPropertyGrammar,N.createAttributeGrammar(this,g.reg(N.Regex.MultipleWordsSymbols)),N.createAttributeGrammar(this,N.attributeNameQuoted,void 0,(e,i,s)=>{y.objectSet(e,[...i,"quoted"],!0)}),this.inlinedArrayEntryGrammar)).map(([e,i])=>i).many(),g.reg(/\s+End +Object/)).map(([e,i,s])=>{const r={};return i.forEach(n=>n(r)),new this(r)}).label("ObjectEntity")}static createSubObjectGrammar(){return g.lazy(()=>this.grammar).map(e=>i=>{e.trailing=!1,i[l.subObjectAttributeNameFromEntity(e)]=e})}getClass(){var e,i,s;if(!a(this,Pe)&&(m(this,Pe,((e=this.Class)!=null&&e.path?this.Class.path:(i=this.Class)==null?void 0:i.type)??((s=this.ExportPath)==null?void 0:s.type)??""),a(this,Pe)&&!a(this,Pe).startsWith("/"))){let r=Object.values(l.paths).find(n=>n.endsWith("."+a(this,Pe)));r&&m(this,Pe,r)}return a(this,Pe)}getType(){var i,s;let e=this.getClass();return(s=(i=this.MacroGraphReference)==null?void 0:i.MacroGraph)!=null&&s.path?this.MacroGraphReference.MacroGraph.path:this.MaterialExpression?this.MaterialExpression.type:e}getObjectName(e=!1){return e?this.getNameAndCounter()[0]:this.Name.toString()}getNameAndCounter(){const e=this.getObjectName().match(a(j,Hn));return e?[e[1]??"",parseInt(e[2]??"0")]:["",0]}getCounter(){return this.getNameAndCounter()[1]}getNodeWidth(){return this.NodeWidth??this.isComment()?l.defaultCommentWidth:void 0}setNodeWidth(e){this.NodeWidth||(this.NodeWidth=new U),this.NodeWidth.value=e}getNodeHeight(){return this.NodeHeight??this.isComment()?l.defaultCommentHeight:void 0}setNodeHeight(e){this.NodeHeight||(this.NodeHeight=new U),this.NodeHeight.value=e}getNodePosX(){var e;return((e=this.NodePosX)==null?void 0:e.value)??0}setNodePosX(e){this.NodePosX||(this.NodePosX=new U),this.NodePosX.value=Math.round(e)}getNodePosY(){var e;return((e=this.NodePosY)==null?void 0:e.value)??0}setNodePosY(e){this.NodePosY||(this.NodePosY=new U),this.NodePosY.value=Math.round(e)}getCustomproperties(e=!1){return this.CustomProperties.values}getPinEntities(){return this.getCustomproperties().filter(e=>e.constructor===ee)}getSubobjects(){return Object.keys(this).filter(e=>e.startsWith(l.subObjectAttributeNamePrefix)).flatMap(e=>[this[e],...this[e].getSubobjects()])}switchTarget(){const e=this.getClass().match(l.switchTargetPattern);if(e)return e[1]}isEvent(){switch(this.getClass()){case l.paths.actorBoundEvent:case l.paths.componentBoundEvent:case l.paths.customEvent:case l.paths.event:case l.paths.inputAxisKeyEvent:case l.paths.inputVectorAxisEvent:return!0}return!1}isComment(){switch(this.getClass()){case l.paths.comment:case l.paths.materialGraphNodeComment:return!0}return!1}isMaterial(){return this.getClass()===l.paths.materialGraphNode}getMaterialSubobject(){const e=this.MaterialExpression??this.MaterialExpressionComment;return e?this[l.subObjectAttributeNameFromReference(e,!0)]:null}isPcg(){return this.getClass()===l.paths.pcgEditorGraphNode||this.getPcgSubobject()!=null}isNiagara(){var e;return this.Class&&((e=this.Class.type?this.Class.type:this.Class.path)==null?void 0:e.startsWith("/Script/NiagaraEditor."))}getPcgSubobject(){const e=this.PCGNode;return e?this[l.subObjectAttributeNameFromReference(e,!0)]:null}getSettingsObject(){const e=this.SettingsInterface;return e?this[l.subObjectAttributeNameFromReference(e,!0)]:null}getSubgraphObject(){const e=this.SubgraphInstance;return e?this[l.subObjectAttributeNameFromName(e)]:null}isDevelopmentOnly(){var i;const e=this.getClass();return((i=this.EnabledState)==null?void 0:i.toString())==="DevelopmentOnly"||e.includes("Debug",Math.max(0,e.lastIndexOf(".")))}getHIDAttribute(){return this.InputKey??this.AxisKey??this.InputAxisKey}getDelegatePin(){return this.getCustomproperties().find(e=>e.PinType.PinCategory.toString()==="delegate")}nodeColor(){return Jo(this)}nodeIcon(){return iu(this)}additionalPinInserter(){return lu(this)}showProperty(e){switch(e){case"Class":case"Name":case"Archetype":case"ExportPath":case"CustomProperties":return!1}return super.showProperty(e)}doSerialize(e=!1,i="",s=this.constructor,r=s.printKey,n=s.keySeparator,c=s.attributeSeparator,h=s.wrap){var P,I,B,$;const d=i+l.indentation,f=this.trailing;this.trailing=!1;const v=super.doSerialize(e,d,s,r,n,c,h);return this.trailing=f,i+"Begin Object"+((P=this.Class)!=null&&P.type||(I=this.Class)!=null&&I.path?` Class${n}${this.Class.serialize(e)}`:"")+(this.Name?` Name${n}${this.Name.serialize(e)}`:"")+(this.Archetype?` Archetype${n}${this.Archetype.serialize(e)}`:"")+((B=this.ExportPath)!=null&&B.type||($=this.ExportPath)!=null&&$.path?` ExportPath${n}${this.ExportPath.serialize(e)}`:"")+(v?c+v:"")+(s.attributes.CustomProperties.ignored!==!0&&this.CustomProperties.ignored!==!0?this.getCustomproperties().map(Z=>c+d+r("CustomProperties ")+Z.serialize(e)).join(""):"")+c+i+"End Object"+(this.trailing?c:"")}};Fs=new WeakMap,Hn=new WeakMap,Pe=new WeakMap,p(j,Hn,/^(\w+?)(?:_(\d+))?$/),o(j,"printKey",e=>e.startsWith(l.subObjectAttributeNamePrefix)?"":e),o(j,"attributeSeparator",`
`),o(j,"wrap",j.notWrapped),o(j,"trailing",!0),o(j,"attributes",{...F(j,j,"attributes"),Class:G,Name:M,Archetype:G,ExportPath:G,ObjectRef:G,BlueprintElementType:G,BlueprintElementInstance:G,ConstA:ie.of(L),ConstB:ie.of(L),PinTags:K.of(un).flagInlined(),PinNames:K.of(M).flagInlined(),AxisKey:H,InputAxisKey:H,InputName:M,InputType:H,NumAdditionalInputs:an,bIsPureFunc:k,bIsConstFunc:k,bIsCaseSensitive:k,VariableReference:hn,SelfContextInfo:H,DelegatePropertyName:M,DelegateOwnerClass:G,ComponentPropertyName:M,EventReference:Ss,FunctionReference:Ss,FunctionScript:G,CustomFunctionName:M,TargetType:G,MacroGraphReference:Ca,Enum:G,EnumEntries:K.of(M).flagInlined(),InputKey:H,OpName:M,CachedChangeId:J,FunctionDisplayName:M,AddedPins:K.of(cn).withDefault().flagInlined().flagSilent(),ChangeId:J,MaterialFunction:G,bOverrideFunction:k,bInternalEvent:k,bConsumeInput:k,bExecuteWhenPaused:k,bOverrideParentBinding:k,bControl:k,bAlt:k,bShift:k,bCommand:k,CommentColor:se,bCommentBubbleVisible_InDetailsPanel:k,bColorCommentBubble:k,ProxyFactoryFunctionName:M,ProxyFactoryClass:G,ProxyClass:G,StructType:G,MaterialExpression:G,MaterialExpressionComment:G,MoveMode:H,TimelineName:M,TimelineGuid:J,SizeX:ie.of(U),SizeY:ie.of(U),Text:ie.of(M),MaterialExpressionEditorX:ie.of(U),MaterialExpressionEditorY:ie.of(U),NodeTitle:M,NodeTitleColor:se,PositionX:ie.of(U),PositionY:ie.of(U),SettingsInterface:G,PCGNode:G,HiGenGridSize:H,Operation:H,NodePosX:U,NodePosY:U,NodeHeight:U,NodeWidth:U,Graph:G,SubgraphInstance:M,InputPins:K.of(G).flagInlined(),OutputPins:K.of(G).flagInlined(),bExposeToLibrary:k,bCanRenameNode:k,bCommentBubblePinned:k,bCommentBubbleVisible:k,NodeComment:M,AdvancedPinDisplay:H,DelegateReference:hn,EnabledState:H,NodeGuid:J,ErrorType:U,ErrorMsg:M,ScriptVariables:K.of(ya),Node:ie.of(G),ExportedNodes:M,CustomProperties:K.of(Xr.accepting(ee,cn)).withDefault().flagSilent()}),o(j,"customPropertyGrammar",g.seq(g.reg(/CustomProperties\s+/),j.attributes.CustomProperties.type.grammar).map(([e,i])=>s=>{(s.CustomProperties??(s.CustomProperties=new j.attributes.CustomProperties)).values.push(i)})),o(j,"inlinedArrayEntryGrammar",g.seq(g.alt(N.symbolQuoted.map(e=>[e,!0]),N.symbol.map(e=>[e,!1])),g.reg(new RegExp(String.raw`\s*\(\s*(\d+)\s*\)\s*\=\s*`),1).map(Number)).chain(([[e,i],s])=>{var r;return(((r=j.attributes[e])==null?void 0:r.grammar)??O.unknownEntityGrammar).map(n=>c=>{if(c[e]===void 0){let d=K;i!=d.quoted&&(d=d.flagQuoted(i)),d.inlined||(d=d.flagInlined()),c[e]=new d}const h=c[e];h.values[s]=n})})),o(j,"grammar",j.createGrammar()),o(j,"grammarMultipleObjects",g.seq(g.whitespaceOpt,j.grammar,g.seq(g.whitespace,j.grammar).map(([e,i])=>i).many(),g.whitespaceOpt).map(([e,i,s,r])=>[i,...s]));let Le=j;class ou extends Le{constructor(t={},e=void 0){t.Class=new G(l.paths.knot),t.Name=new Le.attributes.Name("K2Node_Knot");const i=new ee({PinName:new ee.attributes.PinName("InputPin")}),s=new ee({PinName:new ee.attributes.PinName("OutputPin"),Direction:new ee.attributes.Direction("EGPD_Output")});e&&(i.copyTypeFrom(e),s.copyTypeFrom(e)),t.CustomProperties=new Le.attributes.CustomProperties([i,s]),super(t)}}var zs,js;class Xi{constructor(t,e,i={}){p(this,zs);p(this,js);o(this,"consumeEvent");o(this,"options");o(this,"listenHandler",()=>this.listenEvents());o(this,"unlistenHandler",()=>this.unlistenEvents());i.consumeEvent??(i.consumeEvent=!1),i.listenOnFocus??(i.listenOnFocus=!1),i.unlistenOnTextEdit??(i.unlistenOnTextEdit=!1),m(this,zs,t),m(this,js,e),this.consumeEvent=i.consumeEvent,this.options=i}get target(){return a(this,zs)}get blueprint(){return a(this,js)}setup(){this.options.listenOnFocus&&(this.blueprint.addEventListener(l.focusEventName.begin,this.listenHandler),this.blueprint.addEventListener(l.focusEventName.end,this.unlistenHandler)),this.options.unlistenOnTextEdit&&(this.blueprint.addEventListener(l.editTextEventName.begin,this.unlistenHandler),this.blueprint.addEventListener(l.editTextEventName.end,this.listenHandler)),this.blueprint.focused&&this.listenEvents()}cleanup(){this.unlistenEvents(),this.blueprint.removeEventListener(l.focusEventName.begin,this.listenHandler),this.blueprint.removeEventListener(l.focusEventName.end,this.unlistenHandler),this.blueprint.removeEventListener(l.editTextEventName.begin,this.unlistenHandler),this.blueprint.removeEventListener(l.editTextEventName.end,this.listenHandler)}listenEvents(){}unlistenEvents(){}}zs=new WeakMap,js=new WeakMap;const ct=class ct extends O{constructor(t){super(t),this.ActionName,this.bShift,this.bCtrl,this.bAlt,this.bCmd,this.Key}static createGrammar(){return g.alt(H.grammar.map(t=>new this({Key:t})),N.createEntityGrammar(this))}};o(ct,"attributes",{...F(ct,ct,"attributes"),ActionName:M,bShift:k,bCtrl:k,bAlt:k,bCmd:k,Key:H}),o(ct,"grammar",ct.createGrammar());let dn=ct;var Ys,si;const as=class as extends Xi{constructor(e,i,s={},r=a(as,Ys),n=a(as,Ys)){s.activationKeys??(s.activationKeys=[]),s.consumeEvent??(s.consumeEvent=!0),s.listenOnFocus??(s.listenOnFocus=!0),s.unlistenOnTextEdit??(s.unlistenOnTextEdit=!0),s.activationKeys instanceof Array||(s.activationKeys=[s.activationKeys]),s.activationKeys=s.activationKeys.map(v=>{if(v instanceof dn)return v;if(v.constructor===String){const C=dn.grammar.run(v);if(C.status)return C.value}throw new Error("Unexpected key value")});super(e,i,s);p(this,si);o(this,"pressedKey","");this.onKeyDown=r,this.onKeyUp=n,m(this,si,this.options.activationKeys??[]);const c=v=>{var C;return((C=v.bShift)==null?void 0:C.valueOf())||v.Key.valueOf()=="LeftShift"||v.Key.valueOf()=="RightShift"},h=v=>{var C;return((C=v.bCtrl)==null?void 0:C.valueOf())||v.Key.valueOf()=="LeftControl"||v.Key.valueOf()=="RightControl"},d=v=>{var C;return((C=v.bAlt)==null?void 0:C.valueOf())||v.Key.valueOf()=="LeftAlt"||v.Key.valueOf()=="RightAlt"};let f=this;this.keyDownHandler=v=>{a(f,si).some(C=>c(C)==v.shiftKey&&h(C)==v.ctrlKey&&d(C)==v.altKey&&l.Keys[C.Key.value]==v.code)&&(this.consumeEvent&&(v.preventDefault(),v.stopImmediatePropagation()),this.pressedKey=v.code,f.fire(),document.removeEventListener("keydown",f.keyDownHandler),document.addEventListener("keyup",f.keyUpHandler))},this.keyUpHandler=v=>{a(f,si).some(C=>{var P,I,B,$;return((P=C.bShift)==null?void 0:P.valueOf())&&v.key=="Shift"||((I=C.bCtrl)==null?void 0:I.valueOf())&&v.key=="Control"||((B=C.bAlt)==null?void 0:B.valueOf())&&v.key=="Alt"||(($=C.bCmd)==null?void 0:$.valueOf())&&v.key=="Meta"||l.Keys[C.Key.value]==v.code})&&(this.consumeEvent&&v.stopImmediatePropagation(),f.unfire(),this.pressedKey="",document.removeEventListener("keyup",this.keyUpHandler),document.addEventListener("keydown",this.keyDownHandler))}}listenEvents(){document.addEventListener("keydown",this.keyDownHandler)}unlistenEvents(){document.removeEventListener("keydown",this.keyDownHandler)}fire(){this.onKeyDown(this)}unfire(){this.onKeyUp(this)}};Ys=new WeakMap,si=new WeakMap,p(as,Ys,e=>{});let qe=as;var ri,De,xt;class qr extends Xi{constructor(e,i,s={}){s.ignoreTranslateCompensate??(s.ignoreTranslateCompensate=!1),s.ignoreScale??(s.ignoreScale=!1),s.movementSpace??(s.movementSpace=i.getGridDOMElement()??document.documentElement);super(e,i,s);p(this,ri,[0,0]);p(this,De);p(this,xt,!0);this.movementSpace=s.movementSpace,s.enablerKey&&(m(this,De,s.enablerKey),a(this,De).onKeyDown=()=>m(this,xt,!0),a(this,De).onKeyUp=()=>m(this,xt,!1),a(this,De).consumeEvent=!1,a(this,De).listenEvents(),m(this,xt,!1))}get location(){return a(this,ri)}get enablerKey(){return a(this,De)}get enablerActivated(){return a(this,xt)}setLocationFromEvent(e){let i=y.convertLocation([e.clientX,e.clientY],this.movementSpace,this.options.ignoreScale);return i=this.options.ignoreTranslateCompensate?i:this.blueprint.compensateTranslation(i[0],i[1]),m(this,ri,[...i]),a(this,ri)}}ri=new WeakMap,De=new WeakMap,xt=new WeakMap;var Us,Xs,ni;const ls=class ls extends qr{constructor(e,i,s={},r=a(ls,Us),n=a(ls,Us)){s.clickButton??(s.clickButton=l.mouseClickButton),s.consumeEvent??(s.consumeEvent=!0),s.exitAnyButton??(s.exitAnyButton=!0),s.strictTarget??(s.strictTarget=!1);super(e,i,s);p(this,Xs,e=>{if(this.blueprint.setFocused(!0),!(this.enablerKey&&!this.enablerActivated))switch(e.button){case this.options.clickButton:(!this.options.strictTarget||e.target===e.currentTarget)&&(this.consumeEvent&&e.stopImmediatePropagation(),document.addEventListener("mouseup",a(this,ni)),this.setLocationFromEvent(e),this.clickedPosition[0]=this.location[0],this.clickedPosition[1]=this.location[1],this.blueprint.mousePosition[0]=this.location[0],this.blueprint.mousePosition[1]=this.location[1],this.clicked(this.clickedPosition));break;default:this.options.exitAnyButton||a(this,ni).call(this,e);break}});p(this,ni,e=>{(!this.options.exitAnyButton||e.button==this.options.clickButton)&&(this.consumeEvent&&e.stopImmediatePropagation(),document.removeEventListener("mouseup",a(this,ni)),this.unclicked())});o(this,"clickedPosition",[0,0]);this.onClick=r,this.onUnclick=n,this.listenEvents()}listenEvents(){this.target.addEventListener("mousedown",a(this,Xs)),this.options.clickButton===l.mouseRightClickButton&&this.target.addEventListener("contextmenu",e=>e.preventDefault())}unlistenEvents(){this.target.removeEventListener("mousedown",a(this,Xs))}clicked(e){this.onClick(this)}unclicked(e){this.onUnclick(this)}};Us=new WeakMap,Xs=new WeakMap,ni=new WeakMap,p(ls,Us,e=>{});let Ea=ls;var qs,ai;const Fn=class Fn extends qr{constructor(e,i,s={},r=Fn.ignoreDbClick){s.consumeEvent??(s.consumeEvent=!0),s.strictTarget??(s.strictTarget=!1);super(e,i,s);p(this,qs,e=>{(!this.options.strictTarget||e.target===e.currentTarget)&&(this.consumeEvent&&e.stopImmediatePropagation(),this.clickedPosition=this.setLocationFromEvent(e),this.blueprint.mousePosition=[...this.clickedPosition],this.dbclicked(this.clickedPosition))});p(this,ai);o(this,"clickedPosition",[0,0]);m(this,ai,r),this.listenEvents()}get onDbClick(){return a(this,ai)}set onDbClick(e){m(this,ai,e)}listenEvents(){this.target.addEventListener("dblclick",a(this,qs))}unlistenEvents(){this.target.removeEventListener("dblclick",a(this,qs))}dbclicked(e){this.onDbClick(e)}};qs=new WeakMap,ai=new WeakMap,o(Fn,"ignoreDbClick",e=>{});let Na=Fn;class Ae{}o(Ae,"deleteNodes","Delete"),o(Ae,"duplicateNodes","(bCtrl=True,Key=D)"),o(Ae,"enableLinkDelete","LeftAlt"),o(Ae,"enableZoomIn",["LeftControl","RightControl"]),o(Ae,"selectAllNodes","(bCtrl=True,Key=A)");var Pt;class qi{constructor(){o(this,"element");p(this,Pt,[])}get blueprint(){return this.element.blueprint}get inputObjects(){return a(this,Pt)}initialize(t){this.element=t}createInputObjects(){return[]}setup(){a(this,Pt).forEach(t=>t.setup())}cleanup(){a(this,Pt).forEach(t=>t.cleanup())}willUpdate(t){}update(t){}render(){return b``}firstUpdated(t){}updated(t){}inputSetup(){m(this,Pt,this.createInputObjects())}}Pt=new WeakMap;class Jl extends qi{update(t){super.update(t);const[e,i,s,r]=[Math.round(this.element.fromX),Math.round(this.element.fromY),Math.round(this.element.toX),Math.round(this.element.toY)],[n,c,h,d]=[Math.min(e,s),Math.min(i,r),Math.abs(e-s),Math.abs(i-r)];(t.has("fromX")||t.has("toX"))&&(this.element.style.left=`${n}px`,this.element.style.width=`${h}px`),(t.has("fromY")||t.has("toY"))&&(this.element.style.top=`${c}px`,this.element.style.height=`${d}px`)}}var li,zn;const fe=class fe extends Jl{constructor(){super(...arguments);p(this,li,`ueb-id-${Math.floor(Math.random()*1e12)}`);p(this,zn,e=>{const i=new ou({},this.element.source.entity),s=re.getConstructor("ueb-node").newObject(i);s.setLocation(...this.blueprint.snapToGrid(...e));const r=s.template;this.blueprint.addGraphElement(s);const n=this.element.getInputPin(),c=this.element.getOutputPin();this.element.source=null,this.element.destination=null;const h=re.getConstructor("ueb-link").newObject(c,r.inputPin);this.blueprint.addGraphElement(h),this.element.source=r.outputPin,this.element.destination=n})}static sigmoidPositive(e,i=3.7,s=1.1){return 1-Math.exp(-((e/s)**i))}static decreasingValue(e,i){const s=-e*i[0]**2,r=i[1]-s/i[0];return n=>s/n+r}static clampedLine(e,i){if(e[0]>i[0]){const n=e;e=i,i=n}const s=(i[1]-e[1])/(i[0]-e[0]),r=e[1]-s*e[0];return n=>n<e[0]?e[1]:n>i[0]?i[1]:s*n+r}createInputObjects(){const e=this.element.querySelector(".ueb-link-area");return[...super.createInputObjects(),new Na(e,this.blueprint,void 0,i=>{i[0]+=l.knotOffset[0],i[1]+=l.knotOffset[1],i=y.snapToGrid(i[0],i[1],l.gridSize),a(this,zn).call(this,i)}),new Ea(e,this.blueprint,{enablerKey:new qe(this.blueprint,this.blueprint,{activationKeys:Ae.enableLinkDelete})},()=>this.blueprint.removeGraphElement(this.element))]}willUpdate(e){super.willUpdate(e);const i=this.element.source,s=this.element.destination;if(e.has("fromX")||e.has("toX")){const P=this.element.fromX,I=this.element.toX,B=(i==null?void 0:i.nodeElement.getType())==l.paths.knot,$=(s==null?void 0:s.nodeElement.getType())==l.paths.knot;B&&(!s||$)&&(i!=null&&i.isInput()&&I>P+l.distanceThreshold?this.element.source=i.nodeElement.template.outputPin:i!=null&&i.isOutput()&&I<P-l.distanceThreshold&&(this.element.source=i.nodeElement.template.inputPin)),$&&(!i||B)&&(s!=null&&s.isInput()&&I<P-l.distanceThreshold?this.element.destination=s.nodeElement.template.outputPin:s!=null&&s.isOutput()&&I>P+l.distanceThreshold&&(this.element.destination=s.nodeElement.template.inputPin))}const r=Math.max(Math.abs(this.element.fromX-this.element.toX),1),n=Math.max(Math.abs(this.element.fromY-this.element.toY),1),c=Math.max(r,l.linkMinWidth),h=r/c,d=this.element.originatesFromInput?this.element.fromX<this.element.toX:this.element.toX<this.element.fromX;this.element.startPixels=r<c?(c-r)/2:0,this.element.startPercentage=d?this.element.startPixels+h*100:this.element.startPixels;const f=this.element.startPercentage+(d?fe.c1DecreasingValue(c):10)*h,v=n/Math.max(30,r),C=fe.c2Clamped(r)*fe.sigmoidPositive(h*1.2+v*.5,1.5,1.8)+this.element.startPercentage;this.element.svgPathD=l.linkRightSVGPath(this.element.startPercentage,f,C)}update(e){super.update(e),e.has("originatesFromInput")&&this.element.style.setProperty("--ueb-from-input",this.element.originatesFromInput?"1":"0");const i=this.element.getOutputPin(!0);i&&this.element.style.setProperty("--ueb-link-color-rgb",se.printLinearColor(i.color)),this.element.style.setProperty("--ueb-y-reflected",`${this.element.fromY>this.element.toY?1:0}`),this.element.style.setProperty("--ueb-start-percentage",`${Math.round(this.element.startPercentage)}%`),this.element.style.setProperty("--ueb-link-start",`${Math.round(this.element.startPixels)}`)}render(){return b`
            <svg version="1.2" baseProfile="tiny" width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path id="${a(this,li)}" fill="none" vector-effect="non-scaling-stroke" d="${this.element.svgPathD}" />
                <use href="#${a(this,li)}" class="ueb-link-area" pointer-events="all" />
                <use href="#${a(this,li)}" class="ueb-link-path" pointer-events="none" />
            </svg>
            ${this.element.linkMessageIcon||this.element.linkMessageText?b`
                <div class="ueb-link-message">
                    ${this.element.linkMessageIcon!==A?b`
                        <span class="ueb-link-message-icon">${this.element.linkMessageIcon}</span>
                    `:A}
                    ${this.element.linkMessageText!==A?b`
                        <span class="ueb-link-message-text">${this.element.linkMessageText}</span>
                    `:A}
                </div>
            `:A}
        `}};li=new WeakMap,zn=new WeakMap,o(fe,"c1DecreasingValue",fe.decreasingValue(-.15,[100,15])),o(fe,"c2DecreasingValue",fe.decreasingValue(-.05,[500,130])),o(fe,"c2Clamped",fe.clampedLine([0,80],[200,40]));let xa=fe;const os=class os extends Ui{constructor(){super(),this.fromX=0,this.fromY=0,this.toX=0,this.toY=0}setBothLocations([t,e]){this.fromX=t,this.fromY=e,this.toX=t,this.toY=e}addSourceLocation(t,e){this.fromX+=t,this.fromY+=e}addDestinationLocation(t,e){this.toX+=t,this.toY+=e}};o(os,"properties",{...F(os,os,"properties"),fromX:{type:Number,attribute:!1},fromY:{type:Number,attribute:!1},toX:{type:Number,attribute:!1},toY:{type:Number,attribute:!1}});let pn=os;var Zs,Ks,Ws,Qs,Js,_s,er,$e,Pa,_l,ka;const jt=class jt extends pn{constructor(){super();p(this,$e);p(this,Zs);p(this,Ks);p(this,Ws,()=>this.remove());p(this,Qs,e=>this.addSourceLocation(...e.detail.value));p(this,Js,e=>this.addDestinationLocation(...e.detail.value));p(this,_s,e=>this.setSourceLocation());p(this,er,e=>this.setDestinationLocation());o(this,"linkMessageIcon",A);o(this,"linkMessageText",A);o(this,"pathElement");this.dragging=!1,this.originatesFromInput=!1,this.startPercentage=0,this.svgPathD="",this.startPixels=0}get source(){return a(this,Zs)}set source(e){R(this,$e,Pa).call(this,e,!1)}get destination(){return a(this,Ks)}set destination(e){R(this,$e,Pa).call(this,e,!0)}static newObject(e,i){const s=new jt;return s.initialize(e,i),s}initialize(e,i){super.initialize({},new xa),e&&(this.source=e,i||(this.toX=this.fromX,this.toY=this.fromY)),i&&(this.destination=i,e||(this.fromX=this.toX,this.fromY=this.toY))}cleanup(){super.cleanup(),R(this,$e,ka).call(this),this.source=null,this.destination=null}setSourceLocation(e=null,i=!0){if(e==null){const n=this;if(i&&(!this.hasUpdated||!this.source.hasUpdated)){Promise.all([this.updateComplete,this.source.updateComplete]).then(()=>n.setSourceLocation(null,!1));return}e=this.source.template.getLinkLocation()}const[s,r]=e;this.fromX=s,this.fromY=r}setDestinationLocation(e=null,i=!0){if(e==null){const s=this;if(i&&(!this.hasUpdated||!this.destination.hasUpdated)){Promise.all([this.updateComplete,this.destination.updateComplete]).then(()=>s.setDestinationLocation(null,!1));return}e=this.destination.template.getLinkLocation()}this.toX=e[0],this.toY=e[1]}getInputPin(e=!1){var i,s;if((i=this.source)!=null&&i.isInput())return this.source;if((s=this.destination)!=null&&s.isInput())return this.destination;if(e)return this.source??this.destination}setInputPin(e){var i;(i=this.source)!=null&&i.isInput()&&(this.source=e),this.destination=e}getOutputPin(e=!1){var i,s;if((i=this.source)!=null&&i.isOutput())return this.source;if((s=this.destination)!=null&&s.isOutput())return this.destination;if(e)return this.source??this.destination}setOutputPin(e){var i;(i=this.destination)!=null&&i.isOutput()&&(this.destination=e),this.source=e}startDragging(){this.dragging=!0}finishDragging(){this.dragging=!1}removeMessage(){this.linkMessageIcon=A,this.linkMessageText=A}setMessageConvertType(){this.linkMessageIcon=w.convert,this.linkMessageText=b`Convert ${this.source.pinType} to ${this.destination.pinType}.`}setMessageCorrect(){this.linkMessageIcon=w.correct,this.linkMessageText=A}setMessageReplace(){this.linkMessageIcon=w.correct,this.linkMessageText=A}setMessageDirectionsIncompatible(){this.linkMessageIcon=w.reject,this.linkMessageText=b`Directions are not compatbile.`}setMessagePlaceNode(){this.linkMessageIcon=A,this.linkMessageText=b`Place a new node.`}setMessageReplaceLink(){this.linkMessageIcon=w.correct,this.linkMessageText=b`Replace existing input connections.`}setMessageReplaceOutputLink(){this.linkMessageIcon=w.correct,this.linkMessageText=b`Replace existing output connections.`}setMessageSameNode(){this.linkMessageIcon=w.reject,this.linkMessageText=b`Both are on the same node.`}setMessageTypesIncompatible(e,i){this.linkMessageIcon=w.reject,this.linkMessageText=b`${y.capitalFirstLetter(e.pinType)} is not compatible with ${y.capitalFirstLetter(i.pinType)}.`}};Zs=new WeakMap,Ks=new WeakMap,Ws=new WeakMap,Qs=new WeakMap,Js=new WeakMap,_s=new WeakMap,er=new WeakMap,$e=new WeakSet,Pa=function(e,i){const s=()=>i?this.destination:this.source;if(s()!=e){if(s()){const r=s().getNodeElement();r.removeEventListener(l.removeEventName,a(this,Ws)),r.removeEventListener(l.nodeDragEventName,i?a(this,Js):a(this,Qs)),r.removeEventListener(l.nodeReflowEventName,i?a(this,er):a(this,_s)),R(this,$e,ka).call(this)}if(i?m(this,Ks,e):m(this,Zs,e),s()){const r=s().getNodeElement();r.addEventListener(l.removeEventName,a(this,Ws)),r.addEventListener(l.nodeDragEventName,i?a(this,Js):a(this,Qs)),r.addEventListener(l.nodeReflowEventName,i?a(this,er):a(this,_s)),i?this.setDestinationLocation():(this.setSourceLocation(),this.originatesFromInput=this.source.isInput()),R(this,$e,_l).call(this)}}},_l=function(){this.source&&this.destination&&(this.source.linkTo(this.destination),this.destination.linkTo(this.source))},ka=function(){this.source&&this.destination&&(this.source.unlinkFrom(this.destination,!1),this.destination.unlinkFrom(this.source,!1))},o(jt,"properties",{...F(jt,jt,"properties"),dragging:{type:Boolean,attribute:"data-dragging",converter:k.booleanConverter,reflect:!0},originatesFromInput:{type:Boolean,attribute:!1},svgPathD:{type:String,attribute:!1},linkMessageIcon:{type:String,attribute:!1},linkMessageText:{type:String,attribute:!1}});let Cs=jt;const ht=class ht extends Ui{constructor(){super(),this.locationX=0,this.locationY=0,this.sizeX=0,this.sizeY=0}computeSizes(){const t=this.getBoundingClientRect();this.sizeX=this.blueprint.scaleCorrect(t.width),this.sizeY=this.blueprint.scaleCorrect(t.height)}firstUpdated(t){super.firstUpdated(t),this.computeSizes()}setLocation(t,e,i=!0){const s=t-this.locationX,r=e-this.locationY;if(this.locationX=t,this.locationY=e,this.blueprint&&i){const n=new CustomEvent(this.constructor.dragEventName,{detail:{value:[s,r]},bubbles:!1,cancelable:!0});this.dispatchEvent(n)}}addLocation(t,e,i=!0){this.setLocation(this.locationX+t,this.locationY+e,i)}acknowledgeDrag(t){const e=new CustomEvent(this.constructor.dragGeneralEventName,{detail:{value:t},bubbles:!0,cancelable:!0});this.dispatchEvent(e)}snapToGrid(){const t=y.snapToGrid(this.locationX,this.locationY,l.gridSize);(this.locationX!=t[0]||this.locationY!=t[1])&&this.setLocation(t[0],t[1])}topBoundary(t=!1){return this.template.topBoundary(t)}rightBoundary(t=!1){return this.template.rightBoundary(t)}bottomBoundary(t=!1){return this.template.bottomBoundary(t)}leftBoundary(t=!1){return this.template.leftBoundary(t)}};o(ht,"properties",{...F(ht,ht,"properties"),locationX:{type:Number,attribute:!1},locationY:{type:Number,attribute:!1},sizeX:{type:Number,attribute:!1},sizeY:{type:Number,attribute:!1}}),o(ht,"dragEventName",l.dragEventName),o(ht,"dragGeneralEventName",l.dragGeneralEventName);let Dt=ht;var tr,oi,ui,ci,kt,Ge,je;class Zr extends qr{constructor(e,i,s={}){s.clickButton??(s.clickButton=l.mouseClickButton),s.consumeEvent??(s.consumeEvent=!0),s.draggableElement??(s.draggableElement=e),s.exitAnyButton??(s.exitAnyButton=!0),s.moveEverywhere??(s.moveEverywhere=!1),s.movementSpace??(s.movementSpace=i==null?void 0:i.getGridDOMElement()),s.repositionOnClick??(s.repositionOnClick=!1),s.scrollGraphEdge??(s.scrollGraphEdge=!1),s.strictTarget??(s.strictTarget=!1);super(e,i,s);p(this,tr,e=>{switch(this.blueprint.setFocused(!0),e.button){case this.options.clickButton:(!this.options.strictTarget||e.target==e.currentTarget)&&(this.consumeEvent&&e.stopImmediatePropagation(),a(this,Ge).addEventListener("mousemove",a(this,oi)),document.addEventListener("mouseup",a(this,ci)),this.setLocationFromEvent(e),this.clickedPosition[0]=this.location[0],this.clickedPosition[1]=this.location[1],this.blueprint.mousePosition[0]=this.location[0],this.blueprint.mousePosition[1]=this.location[1],this.target instanceof Dt&&(this.clickedOffset=[this.clickedPosition[0]-this.target.locationX,this.clickedPosition[1]-this.target.locationY]),this.clicked(this.clickedPosition));break;default:this.options.exitAnyButton||a(this,ci).call(this,e);break}});p(this,oi,e=>{this.consumeEvent&&e.stopImmediatePropagation(),a(this,Ge).removeEventListener("mousemove",a(this,oi)),a(this,Ge).addEventListener("mousemove",a(this,ui));const i=this.getEvent(l.trackingMouseEventName.begin);m(this,kt,this.target.dispatchEvent(i)==!1),this.setLocationFromEvent(e),this.lastLocation=y.snapToGrid(this.clickedPosition[0],this.clickedPosition[1],this.stepSize),this.startDrag(this.location),this.started=!0,a(this,ui).call(this,e)});p(this,ui,e=>{this.consumeEvent&&e.stopImmediatePropagation();const i=this.setLocationFromEvent(e),s=[e.movementX,e.movementY];if(this.dragTo(i,s),a(this,kt)&&(this.blueprint.mousePosition=i),this.options.scrollGraphEdge){const r=Math.sqrt(s[0]*s[0]+s[1]*s[1]),n=this.blueprint.scaleCorrect(l.edgeScrollThreshold),c=this.blueprint.template.gridLeftVisibilityBoundary()+n,h=this.blueprint.template.gridRightVisibilityBoundary()-n;let d=0;i[0]<c?d=i[0]-c:i[0]>h&&(d=i[0]-h);const f=this.blueprint.template.gridTopVisibilityBoundary()+n,v=this.blueprint.template.gridBottomVisibilityBoundary()-n;let C=0;i[1]<f?C=i[1]-f:i[1]>v&&(C=i[1]-v),d=y.clamp(this.blueprint.scaleCorrectReverse(d)**3*r*.6,-20,20),C=y.clamp(this.blueprint.scaleCorrectReverse(C)**3*r*.6,-20,20),this.blueprint.scrollDelta(d,C)}});p(this,ci,e=>{if(!this.options.exitAnyButton||e.button==this.options.clickButton){if(this.consumeEvent&&e.stopImmediatePropagation(),a(this,Ge).removeEventListener("mousemove",a(this,oi)),a(this,Ge).removeEventListener("mousemove",a(this,ui)),document.removeEventListener("mouseup",a(this,ci)),this.started&&this.endDrag(),this.unclicked(),a(this,kt)){const i=this.getEvent(l.trackingMouseEventName.end);this.target.dispatchEvent(i),m(this,kt,!1)}this.started=!1}});p(this,kt,!1);p(this,Ge);p(this,je);o(this,"clickedOffset",[0,0]);o(this,"clickedPosition",[0,0]);o(this,"lastLocation",[0,0]);o(this,"started",!1);o(this,"stepSize",1);this.stepSize=Number(s.stepSize??l.gridSize),m(this,Ge,this.options.moveEverywhere?document.documentElement:this.movementSpace),m(this,je,this.options.draggableElement),this.listenEvents()}get draggableElement(){return a(this,je)}listenEvents(){super.listenEvents(),a(this,je).addEventListener("mousedown",a(this,tr)),this.options.clickButton===l.mouseRightClickButton&&a(this,je).addEventListener("contextmenu",e=>e.preventDefault())}unlistenEvents(){super.unlistenEvents(),a(this,je).removeEventListener("mousedown",a(this,tr))}getEvent(e){return new CustomEvent(e,{detail:{tracker:this},bubbles:!0,cancelable:!0})}clicked(e){}startDrag(e){}dragTo(e,i){}endDrag(){}unclicked(e){}}tr=new WeakMap,oi=new WeakMap,ui=new WeakMap,ci=new WeakMap,kt=new WeakMap,Ge=new WeakMap,je=new WeakMap;class Kr extends Zr{clicked(t){this.options.repositionOnClick&&(this.target.setLocation(...this.stepSize>1?y.snapToGrid(t[0],t[1],this.stepSize):t),this.clickedOffset=[0,0])}dragTo(t,e){const i=[this.target.locationX??this.lastLocation[0],this.target.locationY??this.lastLocation[1]],[s,r]=this.stepSize>1?[y.snapToGrid(t[0],t[1],this.stepSize),y.snapToGrid(i[0],i[1],this.stepSize)]:[t,i];e=[s[0]-this.lastLocation[0],s[1]-this.lastLocation[1]],!(e[0]==0&&e[1]==0)&&(e[0]+=r[0]-i[0],e[1]+=r[1]-i[1],this.dragAction(s,e),this.lastLocation=s)}dragAction(t,e){this.target.setLocation(t[0]-this.clickedOffset[0],t[1]-this.clickedOffset[1])}}var ir,sr,rr,nr;class Ve extends Kr{constructor(e,i,s={}){super(e,i,s);p(this,ir);p(this,sr);p(this,rr);p(this,nr);s.onClicked&&m(this,ir,s.onClicked),s.onStartDrag&&m(this,sr,s.onStartDrag),s.onDrag&&m(this,rr,s.onDrag),s.onEndDrag&&m(this,nr,s.onEndDrag)}clicked(e){var i;super.clicked(e),(i=a(this,ir))==null||i.call(this)}startDrag(){var e;super.startDrag(),(e=a(this,sr))==null||e.call(this)}dragAction(e,i){var s;(s=a(this,rr))==null||s.call(this,e,i)}endDrag(){var e;super.endDrag(),(e=a(this,nr))==null||e.call(this)}}ir=new WeakMap,sr=new WeakMap,rr=new WeakMap,nr=new WeakMap;class uu extends Kr{constructor(t,e,i={}){super(t,e,i),this.draggableElement.classList.add("ueb-draggable")}startDrag(){this.target.selected||(this.blueprint.unselectAll(),this.target.setSelected(!0))}dragAction(t,e){this.target.acknowledgeDrag(e)}unclicked(){this.started?(this.blueprint.getNodes(!0).forEach(t=>t.boundComments.filter(e=>!t.isInsideComment(e)).forEach(e=>t.unbindFromComment(e))),this.blueprint.getCommentNodes().forEach(t=>t.template.manageNodesBind())):(this.blueprint.unselectAll(),this.target.setSelected(!0))}}class eo extends qi{getDraggableElement(){return this.element}createDraggableObject(){const t=this.getDraggableElement();return new Kr(this.element,this.blueprint,{draggableElement:t})}createInputObjects(){return[...super.createInputObjects(),this.createDraggableObject(),new qe(this.element,this.blueprint,{activationKeys:[l.Keys.ArrowUp,l.Keys.ArrowRight,l.Keys.ArrowDown,l.Keys.ArrowLeft]},t=>t.target.acknowledgeDrag([t.pressedKey===l.Keys.ArrowLeft?-l.gridSize:t.pressedKey===l.Keys.ArrowRight?l.gridSize:0,t.pressedKey===l.Keys.ArrowUp?-l.gridSize:t.pressedKey===l.Keys.ArrowDown?l.gridSize:0]))]}topBoundary(t=!1){return this.element.locationY}rightBoundary(t=!1){return this.element.locationX+this.element.sizeX}bottomBoundary(t=!1){return this.element.locationY+this.element.sizeY}leftBoundary(t=!1){return this.element.locationX}centerInViewport(){const t=Math.min(this.blueprint.template.viewportSize[0]/10,this.blueprint.template.viewportSize[1]/10),e=this.leftBoundary()-this.blueprint.template.gridLeftVisibilityBoundary(),i=this.blueprint.template.gridRightVisibilityBoundary()-this.rightBoundary();let s=Math.max((e+i)/2,t);const r=this.topBoundary()-this.blueprint.template.gridTopVisibilityBoundary(),n=this.blueprint.template.gridBottomVisibilityBoundary()-this.bottomBoundary();let c=Math.max((r+n)/2,t);this.blueprint.scrollDelta(e-s,r-c,!0)}}class to extends eo{update(t){super.update(t),t.has("locationX")&&(this.element.style.left=`${this.element.locationX}px`),t.has("locationY")&&(this.element.style.top=`${this.element.locationY}px`)}}class cu extends to{getDraggableElement(){return this.element}createDraggableObject(){return new uu(this.element,this.blueprint,{draggableElement:this.getDraggableElement(),scrollGraphEdge:!0})}firstUpdated(t){super.firstUpdated(t),this.element.selected&&!this.element.listeningDrag&&this.element.setSelected(!0)}}var hi;class Ze extends cu{constructor(){super(...arguments);p(this,hi,!1);o(this,"pinInserter");o(this,"inputContainer");o(this,"outputContainer");o(this,"pinElement");o(this,"addPinHandler",()=>{var i;const e=(i=this.pinInserter)==null?void 0:i.call(this);e&&(this.defaultPin&&this.defaultPin.isInput()===e.isInput()?this.defaultPin.before(this.createPinElement(e)):(e.isInput()?this.inputContainer:this.outputContainer).appendChild(this.createPinElement(e)),this.element.acknowledgeReflow())});o(this,"toggleAdvancedDisplayHandler",()=>{this.element.toggleShowAdvancedPinDisplay(),this.element.requestUpdate(),this.element.updateComplete.then(()=>this.element.acknowledgeReflow())})}createPinElement(e){const i=re.getConstructor("ueb-pin").newObject(e,void 0,this.element);return this.pinInserter&&!this.defaultPin&&i.getPinName()==="Default"&&(this.defaultPin=i,this.defaultPin.classList.add("ueb-node-variadic-default")),i}initialize(e){super.initialize(e),this.element.classList.add(...this.constructor.nodeStyleClasses),this.element.style.setProperty("--ueb-node-color",this.getColor().cssText),this.pinInserter=this.element.entity.additionalPinInserter(),this.pinInserter&&this.element.classList.add("ueb-node-is-variadic")}getColor(){return this.element.entity.nodeColor()}render(){return b`
            <div class="ueb-node-border">
                <div class="ueb-node-wrapper">
                    <div class="ueb-node-top">${this.renderTop()}</div>
                    <div class="ueb-node-inputs"></div>
                    <div class="ueb-node-outputs"></div>
                    ${this.pinInserter?b`
                        <div class="ueb-node-variadic" @click="${this.addPinHandler}">
                            Add pin ${w.plusCircle}
                        </div>
                    `:A}
                    ${this.element.entity.isDevelopmentOnly()?b`
                        <div class="ueb-node-developmentonly">
                            <span class="ueb-node-developmentonly-text">Development Only</span>
                        </div>
                    `:A}
                    ${this.element.advancedPinDisplay?b`
                        <div class="ueb-node-expansion" @click="${this.toggleAdvancedDisplayHandler}">
                            ${w.expandIcon}
                        </div>
                    `:A}
                </div>
            </div>
        `}renderNodeIcon(){return this.element.entity.nodeIcon()}renderNodeName(){return this.element.nodeDisplayName}renderTop(){const e=this.renderNodeIcon(),i=this.renderNodeName();return b`
            <div class="ueb-node-name">
                ${e?b`
                    <div class="ueb-node-name-symbol">${e}</div>
                `:A}
                ${i?b`
                    <div class="ueb-node-name-text ueb-ellipsis-nowrap-text">
                        ${i}
                        ${a(this,hi)&&this.getTargetType().length>0?b`
                            <div class="ueb-node-subtitle-text ueb-ellipsis-nowrap-text">
                                Target is ${y.formatStringName(this.getTargetType())}
                            </div>
                        `:A}
                    </div>
                `:A}
            </div>
        `}firstUpdated(e){super.firstUpdated(e),this.inputContainer=this.element.querySelector(".ueb-node-inputs"),this.outputContainer=this.element.querySelector(".ueb-node-outputs"),this.setupPins(),this.element.updateComplete.then(()=>this.element.acknowledgeReflow())}setupPins(){this.element.nodeNameElement=this.element.querySelector(".ueb-node-name-text");let e=!1,i=!1;for(const s of this.element.getPinElements())s!==this.defaultPin&&(s.isInput()?(this.inputContainer.appendChild(s),e=!0):s.isOutput()&&(this.outputContainer.appendChild(s),i=!0));this.defaultPin&&(this.defaultPin.isInput()?this.inputContainer:this.outputContainer).appendChild(this.defaultPin),e&&this.element.classList.add("ueb-node-has-inputs"),i&&this.element.classList.add("ueb-node-has-outputs")}createPinElements(){return this.element.getPinEntities().filter(e=>!e.isHidden()).map(e=>(m(this,hi,a(this,hi)||e.PinName.toString()==="self"&&e.pinTitle()==="Target"),this.createPinElement(e)))}getTargetType(){var e,i;return((i=(e=this.element.entity.FunctionReference)==null?void 0:e.MemberParent)==null?void 0:i.getName())??"Untitled"}getPinElements(e){return e.querySelectorAll("ueb-pin")}linksChanged(){}}hi=new WeakMap,o(Ze,"nodeStyleClasses",["ueb-node-style-default"]);var di,pi,mi,gi,fi,bi,vi,wi;class hu extends Ze{constructor(){super(...arguments);p(this,di,document.createElement("div"));p(this,pi,document.createElement("div"));p(this,mi,document.createElement("div"));p(this,gi,document.createElement("div"));p(this,fi,document.createElement("div"));p(this,bi,document.createElement("div"));p(this,vi,document.createElement("div"));p(this,wi,document.createElement("div"))}initialize(e){super.initialize(e),this.element.classList.add("ueb-resizeable"),a(this,di).classList.add("ueb-resizeable-top"),a(this,pi).classList.add("ueb-resizeable-right"),a(this,mi).classList.add("ueb-resizeable-bottom"),a(this,gi).classList.add("ueb-resizeable-left"),a(this,fi).classList.add("ueb-resizeable-top-right"),a(this,bi).classList.add("ueb-resizeable-bottom-right"),a(this,vi).classList.add("ueb-resizeable-bottom-left"),a(this,wi).classList.add("ueb-resizeable-top-left")}update(e){super.update(e),this.element.sizeX>=0&&e.has("sizeX")&&(this.element.style.width=`${this.element.sizeX}px`),this.element.sizeY>=0&&e.has("sizeY")&&(this.element.style.height=`${this.element.sizeY}px`)}firstUpdated(e){super.firstUpdated(e),this.element.append(a(this,di),a(this,pi),a(this,mi),a(this,gi),a(this,fi),a(this,bi),a(this,vi),a(this,wi))}createInputObjects(){return[...super.createInputObjects(),new Ve(a(this,di),this.blueprint,{onDrag:(e,i)=>{i[1]=e[1]-this.element.topBoundary(),this.setSizeY(this.element.sizeY-i[1])&&this.element.addLocation(0,i[1],!1)},onEndDrag:()=>this.endResize()}),new Ve(a(this,pi),this.blueprint,{onDrag:(e,i)=>{i[0]=e[0]-this.element.rightBoundary(),this.setSizeX(this.element.sizeX+i[0])},onEndDrag:()=>this.endResize()}),new Ve(a(this,mi),this.blueprint,{onDrag:(e,i)=>{i[1]=e[1]-this.element.bottomBoundary(),this.setSizeY(this.element.sizeY+i[1])},onEndDrag:()=>this.endResize()}),new Ve(a(this,gi),this.blueprint,{onDrag:(e,i)=>{i[0]=e[0]-this.element.leftBoundary(),this.setSizeX(this.element.sizeX-i[0])&&this.element.addLocation(i[0],0,!1)},onEndDrag:()=>this.endResize()}),new Ve(a(this,fi),this.blueprint,{onDrag:(e,i)=>{i[0]=e[0]-this.element.rightBoundary(),i[1]=e[1]-this.element.topBoundary(),this.setSizeX(this.element.sizeX+i[0]),this.setSizeY(this.element.sizeY-i[1])&&this.element.addLocation(0,i[1],!1)},onEndDrag:()=>this.endResize()}),new Ve(a(this,bi),this.blueprint,{onDrag:(e,i)=>{i[0]=e[0]-this.element.rightBoundary(),i[1]=e[1]-this.element.bottomBoundary(),this.setSizeX(this.element.sizeX+i[0]),this.setSizeY(this.element.sizeY+i[1])},onEndDrag:()=>this.endResize()}),new Ve(a(this,vi),this.blueprint,{onDrag:(e,i)=>{i[0]=e[0]-this.element.leftBoundary(),i[1]=e[1]-this.element.bottomBoundary(),this.setSizeX(this.element.sizeX-i[0])&&this.element.addLocation(i[0],0,!1),this.setSizeY(this.element.sizeY+i[1])},onEndDrag:()=>this.endResize()}),new Ve(a(this,wi),this.blueprint,{onDrag:(e,i)=>{i[0]=e[0]-this.element.leftBoundary(),i[1]=e[1]-this.element.topBoundary(),this.setSizeX(this.element.sizeX-i[0])&&this.element.addLocation(i[0],0,!1),this.setSizeY(this.element.sizeY-i[1])&&this.element.addLocation(0,i[1],!1)},onEndDrag:()=>this.endResize()})]}setSizeX(e){return this.element.setNodeWidth(e),!0}setSizeY(e){return this.element.setNodeHeight(e),!0}endResize(){}}di=new WeakMap,pi=new WeakMap,mi=new WeakMap,gi=new WeakMap,fi=new WeakMap,bi=new WeakMap,vi=new WeakMap,wi=new WeakMap;var ar;class du extends hu{constructor(){super(...arguments);p(this,ar,0)}initialize(e){super.initialize(e),e.classList.add("ueb-node-style-comment","ueb-node-resizeable"),e.sizeX=25*l.gridSize,e.sizeY=6*l.gridSize,super.initialize(e)}getDraggableElement(){return this.element.querySelector(".ueb-node-top")}render(){var e;return b`
            <div class="ueb-node-border">
                <div class="ueb-node-wrapper">
                    <div class="ueb-node-top"
                        .innerText="${y.encodeHTMLWhitespace((e=this.element.entity.NodeComment)==null?void 0:e.toString())}">
                    </div>
                </div>
            </div>
        `}firstUpdated(e){super.firstUpdated(e);const i=this.getDraggableElement().getBoundingClientRect();m(this,ar,i.height)}manageNodesBind(){let e=this.blueprint.getNodes();for(let i of e)i.topBoundary()>=this.element.topBoundary()&&i.rightBoundary()<=this.element.rightBoundary()&&i.bottomBoundary()<=this.element.bottomBoundary()&&i.leftBoundary()>=this.element.leftBoundary()?i.bindToComment(this.element):i.unbindFromComment(this.element)}setSizeX(e){return e=Math.round(e),e>=2*l.gridSize?(this.element.setNodeWidth(e),!0):!1}setSizeY(e){return e=Math.round(e),e>=2*l.gridSize?(this.element.setNodeHeight(e),!0):!1}endResize(){this.manageNodesBind()}topBoundary(e=!1){return this.element.locationY}rightBoundary(e=!1){return this.element.locationX+this.element.sizeX}bottomBoundary(e=!1){return e?this.element.locationY+a(this,ar):super.bottomBoundary()}leftBoundary(e=!1){return this.element.locationX}}ar=new WeakMap;var At,Se,lr,or;class pu extends Zr{constructor(e,i,s={}){s.scrollGraphEdge??(s.scrollGraphEdge=!0);super(e,i,s);p(this,At);p(this,Se,null);p(this,lr,e=>{if(!this.enteredPin){this.linkValid=!1,this.enteredPin=e.target;const i=this.link.source??this.target,s=this.enteredPin,r=i.isOutput()?i:s;i.nodeElement.getType()===l.paths.knot||s.nodeElement.getType()===l.paths.knot?(this.link.setMessageCorrect(),this.linkValid=!0):i.getNodeElement()===s.getNodeElement()?this.link.setMessageSameNode():i.isOutput()===s.isOutput()?this.link.setMessageDirectionsIncompatible():this.blueprint.getLinks(i,s).length?(this.link.setMessageReplaceLink(),this.linkValid=!0):r.entity.getType()==="exec"&&r.isLinked?(this.link.setMessageReplaceOutputLink(),this.linkValid=!0):(i.entity.PinType.PinCategory.valueOf()!="object"||s.entity.PinType.PinCategory.valueOf()!="object")&&i.pinType!=s.pinType?(this.link.setMessageTypesIncompatible(i,s),this.linkValid=!1):(this.link.setMessageCorrect(),this.linkValid=!0)}});p(this,or,e=>{var i;this.enteredPin==e.target&&(this.enteredPin=null,this.linkValid=!1,(i=this.link)==null||i.setMessagePlaceNode())});o(this,"link");o(this,"enteredPin");o(this,"linkValid",!1)}startDrag(e){this.target.nodeElement.getType()==l.paths.knot&&m(this,Se,this.target),this.link=re.getConstructor("ueb-link").newObject(this.target,null),this.blueprint.template.linksContainerElement.prepend(this.link),this.link.setMessagePlaceNode(),m(this,At,this.blueprint.querySelectorAll("ueb-pin")),a(this,At).forEach(i=>{i!=this.target&&(i.addEventListener("mouseenter",a(this,lr)),i.addEventListener("mouseleave",a(this,or)))}),this.link.startDragging(),this.link.setDestinationLocation(e)}dragTo(e,i){this.link.setDestinationLocation(e)}endDrag(){if(a(this,At).forEach(e=>{e.removeEventListener("mouseenter",a(this,lr)),e.removeEventListener("mouseleave",a(this,or))}),m(this,At,null),this.enteredPin&&this.linkValid){if(a(this,Se)){const e=a(this,Se)!==this.link.source?this.link.source:this.enteredPin;if(a(this,Se).isInput()&&e.isInput()||a(this,Se).isOutput()&&e.isOutput()){const i=a(this,Se).template.getOppositePin();a(this,Se)===this.link.source?this.link.source=i:this.enteredPin=i}}else this.enteredPin.nodeElement.getType()===l.paths.knot&&(m(this,Se,this.enteredPin),this.link.source.isOutput()&&(this.enteredPin=this.enteredPin.template.getOppositePin()));this.link.source.getLinks().find(e=>e.equals(this.enteredPin.createPinReference()))?this.link.remove():(this.blueprint.addGraphElement(this.link),this.link.destination=this.enteredPin)}else this.link.remove();this.enteredPin=null,this.link.removeMessage(),this.link.finishDragging(),this.link=null}}At=new WeakMap,Se=new WeakMap,lr=new WeakMap,or=new WeakMap;var ur,cr;class Wr extends Ze{constructor(){super(...arguments);p(this,ur,!1);p(this,cr,!1);o(this,"displayName","")}initialize(e){super.initialize(e),this.displayName=this.element.nodeDisplayName}render(){return b`
            <div class="ueb-node-border">
                <div class="ueb-node-wrapper">
                    ${this.displayName?b`
                        <div class="ueb-node-top">
                            <div class="ueb-node-name">
                                <span class="ueb-node-name-text ueb-ellipsis-nowrap-text">
                                    ${this.displayName}
                                </span>
                            </div>
                        </div>
                    `:A}
                    ${a(this,ur)?b`
                        <div class="ueb-node-inputs"></div>
                    `:A}
                    ${a(this,cr)?b`
                        <div class="ueb-node-outputs"></div>
                    `:A}
                    ${this.pinInserter?b`
                        <div class="ueb-node-variadic" @click="${this.addPinHandler}">
                            Add pin ${w.plusCircle}
                        </div>
                    `:A}
                </div>
            </div>
        `}createPinElements(){return this.element.getPinEntities().filter(e=>!e.isHidden()).map(e=>(a(this,ur)||m(this,ur,e.isInput()),a(this,cr)||m(this,cr,e.isOutput()),re.getConstructor("ueb-pin").newObject(e,void 0,this.element)))}}ur=new WeakMap,cr=new WeakMap,o(Wr,"nodeStyleClasses",["ueb-node-style-glass"]);class za extends Wr{}o(za,"nodeStyleClasses",["ueb-node-style-metasound","ueb-node-style-operation"]);const us=class us extends Wr{};o(us,"nodeStyleClasses",[...F(us,us,"nodeStyleClasses"),"ueb-node-style-conversion"]);let ys=us;const cs=class cs extends Wr{};o(cs,"nodeStyleClasses",[...F(cs,cs,"nodeStyleClasses"),"ueb-node-style-operation"]);let Ne=cs;var hr,Si;class Te extends qi{constructor(){super(...arguments);p(this,hr);p(this,Si);o(this,"isNameRendered",!0)}get iconElement(){return a(this,hr)}get wrapperElement(){return a(this,Si)}initialize(e){if(super.initialize(e),this.element.nodeElement){const i=this.element.nodeElement.template;this.isNameRendered=!(i instanceof ys||i instanceof Ne||i instanceof za)}}setup(){super.setup(),this.element.nodeElement=this.element.closest("ueb-node");const e=this.element.nodeElement.template;(e instanceof ys||e instanceof Ne)&&(this.isNameRendered=!1,this.element.requestUpdate())}createInputObjects(){return[new pu(this.element,this.blueprint,{moveEverywhere:!0,draggableElement:this.getClickableElement()})]}render(){const e=b`<div class="ueb-pin-icon">${this.renderIcon()}</div>`,i=b`
            <div class="ueb-pin-content">
                ${this.isNameRendered?this.renderName():A}
                ${this.isInputRendered()?this.renderInput():b``}
            </div>
        `;return b`
            <div class="ueb-pin-wrapper">
                ${this.element.isInput()?b`${e}${i}`:b`${i}${e}`}
            </div>
        `}renderIcon(){var e,i,s,r,n;if(this.element.nodeElement.entity.isPcg())switch(this.element.entity.getType()){case"Any":return w.pcgPin;case"Param":case"Param[]":return w.pcgParamPin;case"Spatial":case"Spatial[]":return w.pcgSpatialPin;case"Any[]":case"Point[]":case"Surface[]":case"Volume[]":if(this.element.isOutput())return w.pcgPin;case"Point":case"Surface":case"Volume":return w.pcgStackPin}switch((i=(e=this.element.entity.PinType)==null?void 0:e.ContainerType)==null?void 0:i.serialize()){case"Array":return w.arrayPin;case"Set":return w.setPin;case"Map":return w.mapPin}return((r=(s=this.element.entity.PinType)==null?void 0:s.PinCategory)==null?void 0:r.toString().toLocaleLowerCase())==="delegate"?w.delegate:((n=this.element.nodeElement)==null?void 0:n.template)instanceof Ne?w.operationPin:w.genericPin}renderName(){let e=this.element.getPinDisplayName();const i=this.element.nodeElement,s=this.element.getPinName();return i.getType()==l.paths.makeStruct&&s==i.entity.StructType.getName()&&(e=s),b`
            <span class="ueb-pin-name ueb-ellipsis-nowrap-text">${e}</span>
        `}isInputRendered(){var e,i;return this.element.isInput()&&!((e=this.element.entity.bDefaultValueIsIgnored)!=null&&e.valueOf())&&!((i=this.element.entity.PinType.bIsReference)!=null&&i.valueOf())}renderInput(){return b``}updated(e){if(super.updated(e),this.element.isInput()&&e.has("isLinked")){const i=this.element.nodeElement;this.element.requestUpdate(),this.element.updateComplete.then(()=>i.acknowledgeReflow())}}firstUpdated(e){super.firstUpdated(e),this.element.style.setProperty("--ueb-pin-color-rgb",this.element.entity.pinColor().cssText),m(this,hr,this.element.querySelector(".ueb-pin-icon svg")??this.element),m(this,Si,this.element.querySelector(".ueb-pin-wrapper"))}getLinkLocation(){const e=this.iconElement.getBoundingClientRect(),i=[this.element.isInput()?e.left:e.right+1,(e.top+e.bottom)/2],s=y.convertLocation(i,this.blueprint.template.gridElement);return this.blueprint.compensateTranslation(s[0],s[1])}getClickableElement(){return a(this,Si)??this.element}}hr=new WeakMap,Si=new WeakMap,o(Te,"canWrapInput",!0);class io extends Te{render(){return b`
            <div class="ueb-pin-wrapper">
                <div class="ueb-pin-icon">${this.renderIcon()}</div>
            </div>
        `}}const hs=class hs extends Ze{firstUpdated(t){super.firstUpdated(t),this.element.querySelector(".ueb-node-top").appendChild(this.createDelegatePinElement())}renderTop(){const t=this.renderNodeIcon(),e=this.renderNodeName(),i=this.element.getType()===l.paths.customEvent&&(this.element.entity.CustomFunctionName||this.element.entity.FunctionReference.MemberParent);return b`
            <div class="ueb-node-name">
                ${t?b`
                    <div class="ueb-node-name-symbol">${t}</div>
                `:A}
                ${e?b`
                    <div class="ueb-node-name-text ueb-ellipsis-nowrap-text">
                        ${e}
                        ${i?b`
                            <div class="ueb-node-subtitle-text ueb-ellipsis-nowrap-text">
                                Custom Event
                            </div>
                        `:A}
                    </div>
                `:A}
            </div>
        `}createDelegatePinElement(){const t=re.getConstructor("ueb-pin").newObject(this.element.getPinEntities().find(e=>{var i;return!e.isHidden()&&((i=e.PinType.PinCategory)==null?void 0:i.toString())==="delegate"}),new io,this.element);return t.template.isNameRendered=!1,t}createPinElements(){return this.element.getPinEntities().filter(t=>{var e;return!t.isHidden()&&((e=t.PinType.PinCategory)==null?void 0:e.toString())!=="delegate"}).map(t=>re.getConstructor("ueb-pin").newObject(t,void 0,this.element))}};o(hs,"nodeStyleClasses",[...F(hs,hs,"nodeStyleClasses"),"ueb-node-style-event"]);let Aa=hs;class Ol extends io{render(){return this.element.isOutput()?super.render():b``}getOppositePin(){const t=this.element.nodeElement.template;return this.element.isOutput()?t.inputPin:t.outputPin}getLinkLocation(){const t=(this.element.isInput()?this.element.nodeElement.template.outputPin.template:this).iconElement.getBoundingClientRect(),e=[this.element.isInput()?t.left:t.right+1,(t.top+t.bottom)/2],i=y.convertLocation(e,this.blueprint.template.gridElement);return this.blueprint.compensateTranslation(i[0],i[1])}}var Ci,Ra,dr,pr;const Yt=class Yt extends Ze{constructor(){super(...arguments);p(this,Ra,null);p(this,dr);p(this,pr)}get inputPin(){return a(this,dr)}get outputPin(){return a(this,pr)}initialize(e){super.initialize(e),this.element.classList.add("ueb-node-style-minimal")}findDirectionaPin(e){if(e.nodeElement.getType()!==l.paths.knot||a(Yt,Ci).has(e))return a(Yt,Ci).clear(),!0;a(Yt,Ci).add(e);for(let i of e.getLinks().map(s=>this.blueprint.getPin(s)))if(this.findDirectionaPin(i))return!0;return!1}render(){return b`
            <div class="ueb-node-border"></div>
        `}setupPins(){this.element.getPinElements().forEach(e=>this.element.querySelector(".ueb-node-border").appendChild(e))}getPinElements(e){return e.querySelectorAll("ueb-pin")}createPinElements(){const e=this.element.getPinEntities().filter(c=>!c.isHidden()),i=e[e[0].isInput()?0:1],s=e[e[0].isOutput()?0:1],r=re.getConstructor("ueb-pin");return[m(this,dr,r.newObject(i,new Ol,this.element)),m(this,pr,r.newObject(s,new Ol,this.element))]}linksChanged(){}};Ci=new WeakMap,Ra=new WeakMap,dr=new WeakMap,pr=new WeakMap,p(Yt,Ci,new Set);let Ma=Yt;class so extends Ze{}o(so,"nodeStyleClasses",["ueb-node-style-metasound"]);class mu extends Wr{initialize(t){super.initialize(t);const e=t.getType();e===l.paths.variableGet||e===l.paths.self?(this.element.classList.add("ueb-node-style-getter"),this.displayName=""):e===l.paths.variableSet&&this.element.classList.add("ueb-node-style-setter")}setupPins(){super.setupPins();let t=this.element.getPinElements().find(e=>!e.entity.isHidden()&&!e.entity.isExecution());this.element.style.setProperty("--ueb-node-color",t.getColor().cssText)}}function Bl(u){var t,e,i,s,r,n;if(u.getClass()===l.paths.callFunction||u.getClass()===l.paths.commutativeAssociativeBinaryOperator||u.getClass()===l.paths.callArrayFunction){const c=((e=(t=u.FunctionReference)==null?void 0:t.MemberParent)==null?void 0:e.path)??"",h=(s=(i=u.FunctionReference)==null?void 0:i.MemberName)==null?void 0:s.toString();if(h&&(c===l.paths.kismetMathLibrary||c===l.paths.kismetArrayLibrary)){if(h.startsWith("Conv_"))return ys;if(h.startsWith("Add_")||h.startsWith("And_")||h.startsWith("Boolean")||h.startsWith("Cross_")||h.startsWith("Dot_")||h.startsWith("Not_")||h.startsWith("Or_")||h.startsWith("Percent_")||h.startsWith("Xor_"))return Ne;switch(h){case"Abs":case"Array_Add":case"Array_AddUnique":case"Array_Identical":case"BMax":case"BMin":case"CrossProduct2D":case"DotProduct2D":case"Exp":case"FMax":case"FMin":case"GetPI":case"Max":case"MaxInt64":case"Min":case"MinInt64":case"Sqrt":case"Square":case"Vector4_CrossProduct3":case"Vector4_DotProduct":case"Vector4_DotProduct3":case"Acos":case"Asin":case"Cos":case"DegAcos":case"DegCos":case"DegSin":case"DegTan":case"Sin":case"Tan":return Ne}}if(c===l.paths.blueprintSetLibrary||c===l.paths.blueprintMapLibrary)return Ne}switch(u.getClass()){case l.paths.comment:case l.paths.materialGraphNodeComment:return du;case l.paths.createDelegate:return Ze;case l.paths.metasoundEditorGraphExternalNode:return((r=u.ClassName)==null?void 0:r.Name)=="Add"?za:so;case l.paths.niagaraNodeOp:if(["Boolean::LogicEq","Boolean::LogicNEq","Numeric::Abs","Numeric::Add","Numeric::Mul"].includes((n=u.OpName)==null?void 0:n.toString()))return Ne;break;case l.paths.promotableOperator:return Ne;case l.paths.knot:return Ma;case l.paths.literal:case l.paths.self:case l.paths.variableGet:case l.paths.variableSet:return mu}return u.isEvent()?Aa:Ze}const ds=class ds extends Dt{constructor(){super();o(this,"dragHandler",e=>this.addLocation(...e.detail.value));this.selected=!1,this.listeningDrag=!1}setup(){super.setup(),this.setSelected(this.selected)}cleanup(){super.cleanup(),this.blueprint.removeEventListener(l.nodeDragGeneralEventName,this.dragHandler)}setSelected(e=!0){this.selected=e,this.blueprint&&(this.selected?(this.listeningDrag=!0,this.blueprint.addEventListener(l.nodeDragGeneralEventName,this.dragHandler)):(this.blueprint.removeEventListener(l.nodeDragGeneralEventName,this.dragHandler),this.listeningDrag=!1))}};o(ds,"properties",{...F(ds,ds,"properties"),selected:{type:Boolean,attribute:"data-selected",reflect:!0,converter:k.booleanConverter}});let mn=ds;var mr,yi,Ei,gr,jn,ro;const dt=class dt extends mn{constructor(){super(...arguments);p(this,jn);p(this,mr);p(this,yi,[]);o(this,"boundComments",[]);p(this,Ei,!1);p(this,gr,e=>{!this.selected&&!a(this,Ei)&&(m(this,Ei,!0),this.requestUpdate(),this.updateComplete.then(()=>m(this,Ei,!1)),this.addLocation(...e.detail.value))})}get blueprint(){return super.blueprint}set blueprint(e){super.blueprint=e,a(this,yi).forEach(i=>i.blueprint=e)}get nodeNameElement(){return a(this,mr)}set nodeNameElement(e){m(this,mr,e)}static fromSerializedObject(e){e=e.trim();let i=Le.grammar.parse(e);return dt.newObject(i)}static newObject(e=new Le,i=new(Bl(e))){const s=new dt;return s.initialize(e,i),s}initialize(e=new Le,i=new(Bl(e))){var s,r;this.typePath=e.getType(),this.nodeTitle=e.getObjectName(),this.advancedPinDisplay=(s=e.AdvancedPinDisplay)==null?void 0:s.toString(),this.enabledState=e.EnabledState,this.nodeDisplayName=qt(e),this.pureFunction=(r=e.bIsPureFunc)==null?void 0:r.valueOf(),this.dragLinkObjects=[],super.initialize(e,i),m(this,yi,this.template.createPinElements()),super.setLocation(this.entity.getNodePosX(),this.entity.getNodePosY()),this.entity.NodeWidth&&this.entity.NodeHeight?(this.sizeX=this.entity.NodeWidth.value,this.sizeY=this.entity.NodeHeight.value):this.updateComplete.then(()=>this.computeSizes()),e.listenAttribute("Name",n=>{this.nodeTitle=n.value,this.nodeDisplayName=qt(e),R(this,jn,ro).call(this,n.value)})}async getUpdateComplete(){let e=await super.getUpdateComplete();for(const i of this.getPinElements())e&&(e=await i.updateComplete);return e}bindToComment(e){e!=this&&!this.boundComments.includes(e)&&(e.addEventListener(l.nodeDragEventName,a(this,gr)),this.boundComments.push(e))}unbindFromComment(e){const i=this.boundComments.indexOf(e);i>=0&&(e.removeEventListener(l.nodeDragEventName,a(this,gr)),this.boundComments[i]=this.boundComments[this.boundComments.length-1],this.boundComments.pop())}isInsideComment(e){return this.topBoundary()>=e.topBoundary()&&this.rightBoundary()<=e.rightBoundary()&&this.bottomBoundary()<=e.bottomBoundary()&&this.leftBoundary()>=e.leftBoundary()}getType(){return this.entity.getType()}getNodeName(){return this.entity.getObjectName()}computeNodeDisplayName(){this.nodeDisplayName=qt(this.entity)}setNodeWidth(e){this.entity.setNodeWidth(e),this.sizeX=e,this.acknowledgeReflow()}setNodeHeight(e){this.entity.setNodeHeight(e),this.sizeY=e,this.acknowledgeReflow()}sanitizeLinks(e=[]){this.getPinElements().forEach(i=>i.sanitizeLinks(e))}getPinElements(){return a(this,yi)}getPinEntities(){return this.entity.getPinEntities()}setLocation(e=0,i=0,s=!0){this.entity.setNodePosX(e),this.entity.setNodePosY(i),super.setLocation(e,i,s)}acknowledgeReflow(){this.requestUpdate(),this.updateComplete.then(()=>this.computeSizes());let e=new CustomEvent(l.nodeReflowEventName);this.dispatchEvent(e)}setShowAdvancedPinDisplay(e){this.entity.AdvancedPinDisplay=new H(e?"Shown":"Hidden"),this.advancedPinDisplay=this.entity.AdvancedPinDisplay}toggleShowAdvancedPinDisplay(){var e;this.setShowAdvancedPinDisplay(((e=this.entity.AdvancedPinDisplay)==null?void 0:e.toString())!="Shown")}};mr=new WeakMap,yi=new WeakMap,Ei=new WeakMap,gr=new WeakMap,jn=new WeakSet,ro=function(e){for(let i of this.getPinElements())for(let s of i.getLinks())this.blueprint.getPin(s).redirectLink(i,new Me(new H(e),i.entity.PinId))},o(dt,"properties",{...mn.properties,typePath:{type:String,attribute:"data-type",reflect:!0},nodeTitle:{type:String,attribute:"data-title",reflect:!0},advancedPinDisplay:{type:String,attribute:"data-advanced-display",converter:H.attributeConverter,reflect:!0},enabledState:{type:String,attribute:"data-enabled-state",reflect:!0},nodeDisplayName:{type:String,attribute:!1},pureFunction:{type:Boolean,converter:k.booleanConverter,attribute:"data-pure-function",reflect:!0}}),o(dt,"dragEventName",l.nodeDragEventName),o(dt,"dragGeneralEventName",l.nodeDragGeneralEventName);let bt=dt;var Mt,Ce;const qa=class qa extends Le{constructor(){super(...arguments);p(this,Mt,new Map);p(this,Ce,[])}get objectEntities(){return a(this,Ce)}getHomonymObjectEntity(e){const i=e.getObjectName(!1);return a(this,Ce).find(s=>s.getObjectName()==i)}takeFreeName(e){e=e.replace(/_\d+$/,"");const i=(a(this,Mt).get(e)??-1)+1;return a(this,Mt).set(e,i),l.nodeTitle(e,i)}addObjectEntity(e){if(!a(this,Ce).includes(e)){a(this,Ce).push(e);const[i,s]=e.getNameAndCounter();return a(this,Mt).set(i,Math.max(a(this,Mt).get(i)??0,s)),!0}return!1}removeObjectEntity(e){const i=a(this,Ce).indexOf(e);if(i>=0){const s=a(this,Ce).pop();return i<a(this,Ce).length&&(a(this,Ce)[i]=s),!0}return!1}mergeWith(e){if(!e.ScriptVariables||e.ScriptVariables.length===0)return this;(!this.ScriptVariables||this.ScriptVariables.length===0)&&(this.ScriptVariables=e.ScriptVariables);let i=y.mergeArrays(this.ScriptVariables.valueOf(),e.ScriptVariables.valueOf(),(r,n)=>r.OriginalChangeId.value==n.OriginalChangeId.value);if(i.length===this.ScriptVariables.length)return this;const s=i.concat(i).map((r,n)=>{const c=l.subObjectAttributeNameFromReference(r.ScriptVariable,n>=i.length);return[c,this[c]??e[c]]});return s.push(...Object.entries(this).filter(([r,n])=>!r.startsWith(l.subObjectAttributeNamePrefix)&&r!=="ExportedNodes")),new qa(Object.fromEntries(s))}};Mt=new WeakMap,Ce=new WeakMap;let La=qa;var Ni;class gu extends Xi{constructor(e,i,s={}){s.listenOnFocus??(s.listenOnFocus=!0),s.unlistenOnTextEdit??(s.unlistenOnTextEdit=!0);super(e,i,s);p(this,Ni);let r=this;m(this,Ni,()=>r.copied())}listenEvents(){window.addEventListener("copy",a(this,Ni))}unlistenEvents(){window.removeEventListener("copy",a(this,Ni))}getSerializedText(){const e=this.blueprint.getNodes(!0).map(r=>r.entity),i=e.filter(r=>r.exported).map(r=>r.serialize()),s=e.filter(r=>!r.exported).map(r=>r.serialize());return i.length&&(this.blueprint.entity.ExportedNodes.value=btoa(i.join("")),s.splice(0,0,this.blueprint.entity.serialize(!1)),delete this.blueprint.entity.ExportedNodes),s.join("")}copied(){const e=this.getSerializedText();return navigator.clipboard.writeText(e),e}}Ni=new WeakMap;var xi;class fu extends Xi{constructor(e,i,s={}){s.listenOnFocus??(s.listenOnFocus=!0),s.unlistenOnTextEdit??(s.unlistenOnTextEdit=!0);super(e,i,s);p(this,xi);let r=this;m(this,xi,()=>r.cut())}listenEvents(){window.addEventListener("cut",a(this,xi))}unlistenEvents(){window.removeEventListener("cut",a(this,xi))}getSerializedText(){return this.blueprint.getNodes(!0).map(e=>e.entity.serialize()).join("")}cut(){this.blueprint.template.getCopyInputObject().copied(),this.blueprint.removeGraphElement(...this.blueprint.getNodes(!0))}}xi=new WeakMap;var Pi;class bu extends Xi{constructor(e,i,s={}){s.listenOnFocus??(s.listenOnFocus=!0),s.unlistenOnTextEdit??(s.unlistenOnTextEdit=!0);super(e,i,s);p(this,Pi);let r=this;m(this,Pi,n=>r.pasted(n.clipboardData.getData("Text")))}listenEvents(){window.addEventListener("paste",a(this,Pi))}unlistenEvents(){window.removeEventListener("paste",a(this,Pi))}pasted(e){let i=0,s=0,r=0,n=Le.grammarMultipleObjects.parse(e).map(h=>{let d=re.getConstructor("ueb-node").newObject(h);return i+=d.locationY,s+=d.locationX,++r,d});i/=r,s/=r,n.length>0&&this.blueprint.unselectAll();let c=this.blueprint.mousePosition;for(const h of n)h.addLocation(c[0]-s,c[1]-i),h.snapToGrid(),h.setSelected(!0);return this.blueprint.addGraphElement(...n),n}}Pi=new WeakMap;var Yn,fr,br,vr;const Un=class Un extends qr{constructor(e,i,s={},r=a(Un,Yn)){s.listenOnFocus=!0,s.strictTarget??(s.strictTarget=!1);super(e,i,s);p(this,fr,0);p(this,br,e=>{this.enablerKey&&!this.enablerActivated||(e.preventDefault(),m(this,fr,e.deltaY),this.setLocationFromEvent(e),this.wheel())});p(this,vr,e=>e.preventDefault());this.strictTarget=s.strictTarget,this.onWheel=r}get variation(){return a(this,fr)}listenEvents(){var e;this.movementSpace.addEventListener("wheel",a(this,br),!1),(e=this.movementSpace.parentElement)==null||e.addEventListener("wheel",a(this,vr))}unlistenEvents(){var e;this.movementSpace.removeEventListener("wheel",a(this,br),!1),(e=this.movementSpace.parentElement)==null||e.removeEventListener("wheel",a(this,vr))}wheel(){this.onWheel(this)}};Yn=new WeakMap,fr=new WeakMap,br=new WeakMap,vr=new WeakMap,p(Un,Yn,e=>{});let Ta=Un;var Ye,ki;class vu extends Ta{constructor(){super(...arguments);p(this,Ye,0);p(this,ki,!1)}get enableZoonIn(){return a(this,ki)}set enableZoonIn(e){e!=a(this,ki)&&m(this,ki,e)}wheel(){if(m(this,Ye,a(this,Ye)+-this.variation),Math.abs(a(this,Ye))<l.mouseWheelZoomThreshold)return;let e=this.blueprint.getZoom();!this.enableZoonIn&&e==0&&a(this,Ye)>0||(e+=Math.sign(a(this,Ye)),this.blueprint.setZoom(e,this.location),m(this,Ye,0))}}Ye=new WeakMap,ki=new WeakMap;var Ai;class wu extends qe{constructor(e,i,s={}){s.activationKeys=Ae.enableZoomIn;super(e,i,s);p(this,Ai)}fire(){m(this,Ai,this.blueprint.template.getZoomInputObject()),a(this,Ai).enableZoonIn=!0}unfire(){a(this,Ai).enableZoonIn=!1}}Ai=new WeakMap;class Su extends Zr{startDrag(){this.blueprint.scrolling=!0}dragTo(t,e){this.blueprint.scrollDelta(-e[0],-e[1])}endDrag(){this.blueprint.scrolling=!1}}var Lt,wr,Sr,Cr;class Cu extends qr{constructor(e,i,s={}){s.listenOnFocus=!0;super(e,i,s);p(this,Lt,null);p(this,wr,e=>{e.preventDefault(),this.setLocationFromEvent(e),this.blueprint.mousePosition=[...this.location]});p(this,Sr,e=>{a(this,Lt)||(e.preventDefault(),m(this,Lt,e.detail.tracker),this.unlistenMouseMove())});p(this,Cr,e=>{a(this,Lt)==e.detail.tracker&&(e.preventDefault(),m(this,Lt,null),this.listenMouseMove())})}listenMouseMove(){this.target.addEventListener("mousemove",a(this,wr))}unlistenMouseMove(){this.target.removeEventListener("mousemove",a(this,wr))}listenEvents(){this.listenMouseMove(),this.blueprint.addEventListener(l.trackingMouseEventName.begin,a(this,Sr)),this.blueprint.addEventListener(l.trackingMouseEventName.end,a(this,Cr))}unlistenEvents(){this.unlistenMouseMove(),this.blueprint.removeEventListener(l.trackingMouseEventName.begin,a(this,Sr)),this.blueprint.removeEventListener(l.trackingMouseEventName.end,a(this,Cr))}}Lt=new WeakMap,wr=new WeakMap,Sr=new WeakMap,Cr=new WeakMap;class yu extends Zr{constructor(t,e,i={}){i.scrollGraphEdge??(i.scrollGraphEdge=!0),super(t,e,i),this.selectorElement=this.blueprint.template.selectorElement}startDrag(){this.selectorElement.beginSelect(this.clickedPosition)}dragTo(t,e){this.selectorElement.selectTo(t)}endDrag(){this.started&&this.selectorElement.endSelect()}unclicked(){this.started||this.blueprint.unselectAll()}}var Mi;class Eu extends Xi{constructor(e,i,s={}){s.listenOnFocus=!0;super(e,i,s);p(this,Mi,e=>this.clickedSomewhere(e.target));this.blueprint.focus&&document.addEventListener("click",a(this,Mi))}clickedSomewhere(e){e.closest("ueb-blueprint")||this.blueprint.setFocused(!1)}listenEvents(){document.addEventListener("click",a(this,Mi))}unlistenEvents(){document.removeEventListener("click",a(this,Mi))}}Mi=new WeakMap;var yr,Li,Ti,$i;const Xn=class Xn extends qi{constructor(){super(...arguments);p(this,yr,new ResizeObserver(e=>{var s,r;const i=(r=(s=e.find(n=>n.target===this.viewportElement))==null?void 0:s.devicePixelContentBoxSize)==null?void 0:r[0];i&&(this.viewportSize[0]=i.inlineSize,this.viewportSize[1]=i.blockSize)}));p(this,Li);p(this,Ti);p(this,$i);o(this,"headerElement");o(this,"overlayElement");o(this,"viewportElement");o(this,"selectorElement");o(this,"gridElement");o(this,"linksContainerElement");o(this,"nodesContainerElement");o(this,"viewportSize",[0,0])}initialize(e){var s;super.initialize(e),this.element.style.cssText=Object.entries(Xn.styleVariables).map(([r,n])=>`${r}:${n};`).join("");const i=(s=this.element.querySelector(":scope > template"))==null?void 0:s.content.textContent;i&&(this.element.requestUpdate(),this.element.updateComplete.then(()=>{this.blueprint.mousePosition=[Math.round(this.viewportSize[0]/2),Math.round(this.viewportSize[1]/2)],this.getPasteInputObject().pasted(i),this.blueprint.unselectAll()}))}setup(){super.setup(),a(this,yr).observe(this.viewportElement,{box:"device-pixel-content-box"});const e=this.viewportElement.getBoundingClientRect();this.viewportSize[0]=e.width,this.viewportSize[1]=e.height,this.blueprint.nodes.length>0&&(this.blueprint.requestUpdate(),this.blueprint.updateComplete.then(()=>this.centerContentInViewport()))}cleanup(){super.cleanup(),a(this,yr).unobserve(this.viewportElement)}createInputObjects(){const e=this.element.getGridDOMElement();return m(this,Li,new gu(e,this.blueprint)),m(this,Ti,new bu(e,this.blueprint)),m(this,$i,new vu(e,this.blueprint)),[...super.createInputObjects(),a(this,Li),a(this,Ti),a(this,$i),new fu(e,this.blueprint),new qe(e,this.blueprint,{activationKeys:Ae.duplicateNodes},()=>this.blueprint.template.getPasteInputObject().pasted(this.blueprint.template.getCopyInputObject().copied())),new qe(e,this.blueprint,{activationKeys:Ae.deleteNodes},()=>this.blueprint.removeGraphElement(...this.blueprint.getNodes(!0))),new qe(e,this.blueprint,{activationKeys:Ae.selectAllNodes},()=>this.blueprint.selectAll()),new yu(e,this.blueprint,{clickButton:l.mouseClickButton,exitAnyButton:!0,moveEverywhere:!0}),new Su(e,this.blueprint,{clickButton:l.mouseRightClickButton,exitAnyButton:!1,moveEverywhere:!0}),new Eu(e,this.blueprint),new Cu(e,this.blueprint),new wu(e,this.blueprint)]}render(){return b`
            <div class="ueb-viewport-header">
                <div class="ueb-viewport-zoom">
                    Zoom ${this.blueprint.zoom==0?"1:1":(this.blueprint.zoom>0?"+":"")+this.blueprint.zoom}
                </div>
            </div>
            <div class="ueb-viewport-overlay"></div>
            <div class="ueb-viewport-body">
                <div class="ueb-grid"
                    style="--ueb-additional-x: ${Math.round(this.blueprint.translateX)}; --ueb-additional-y: ${Math.round(this.blueprint.translateY)}; --ueb-translate-x: ${Math.round(this.blueprint.translateX)}; --ueb-translate-y: ${Math.round(this.blueprint.translateY)};">
                    <div class="ueb-grid-content">
                        <div data-links></div>
                        <div data-nodes></div>
                        <ueb-selector></ueb-selector>
                    </div>
                </div>
            </div>
        `}firstUpdated(e){super.firstUpdated(e),this.headerElement=this.blueprint.querySelector(".ueb-viewport-header"),this.overlayElement=this.blueprint.querySelector(".ueb-viewport-overlay"),this.viewportElement=this.blueprint.querySelector(".ueb-viewport-body"),this.selectorElement=this.blueprint.querySelector("ueb-selector"),this.gridElement=this.viewportElement.querySelector(".ueb-grid"),this.linksContainerElement=this.blueprint.querySelector("[data-links]"),this.linksContainerElement.append(...this.blueprint.getLinks()),this.nodesContainerElement=this.blueprint.querySelector("[data-nodes]"),this.nodesContainerElement.append(...this.blueprint.getNodes()),this.viewportElement.scroll(l.expandGridSize,l.expandGridSize)}willUpdate(e){super.willUpdate(e),this.headerElement&&e.has("zoom")&&(this.headerElement.classList.add("ueb-zoom-changed"),this.headerElement.addEventListener("animationend",()=>this.headerElement.classList.remove("ueb-zoom-changed")))}updated(e){if(super.updated(e),(e.has("scrollX")||e.has("scrollY"))&&this.viewportElement.scroll(this.blueprint.scrollX,this.blueprint.scrollY),e.has("zoom")){this.blueprint.style.setProperty("--ueb-scale",this.blueprint.getScale());const i=e.get("zoom"),s=Math.min(i,this.blueprint.zoom),r=Math.max(i,this.blueprint.zoom),n=y.range(s,r),c=h=>`ueb-zoom-${h}`;i<this.blueprint.zoom?(this.blueprint.classList.remove(...n.filter(h=>h<0).map(c)),this.blueprint.classList.add(...n.filter(h=>h>0).map(c))):(this.blueprint.classList.remove(...n.filter(h=>h>0).map(c)),this.blueprint.classList.add(...n.filter(h=>h<0).map(c)))}}getCommentNodes(e=!1){return this.blueprint.querySelectorAll(`ueb-node[data-type="${l.paths.comment}"]${e?'[data-selected="true"]':""}, ueb-node[data-type="${l.paths.materialGraphNodeComment}"]${e?'[data-selected="true"]':""}`)}getPin(e){return this.blueprint.querySelector(`ueb-node[data-title="${e.objectName}"] ueb-pin[data-id="${e.pinGuid}"]`)}getCopyInputObject(){return a(this,Li)}getPasteInputObject(){return a(this,Ti)}getZoomInputObject(){return a(this,$i)}isPointVisible(e,i){return!1}gridTopVisibilityBoundary(){return this.blueprint.scaleCorrect(this.blueprint.scrollY)-this.blueprint.translateY}gridRightVisibilityBoundary(){return this.gridLeftVisibilityBoundary()+this.blueprint.scaleCorrect(this.viewportSize[0])}gridBottomVisibilityBoundary(){return this.gridTopVisibilityBoundary()+this.blueprint.scaleCorrect(this.viewportSize[1])}gridLeftVisibilityBoundary(){return this.blueprint.scaleCorrect(this.blueprint.scrollX)-this.blueprint.translateX}centerViewport(e=0,i=0,s=!0){const r=this.gridLeftVisibilityBoundary()+this.blueprint.scaleCorrect(this.viewportSize[0]/2),n=this.gridTopVisibilityBoundary()+this.blueprint.scaleCorrect(this.viewportSize[1]/2);this.blueprint.scrollDelta(this.blueprint.scaleCorrectReverse(e-r),this.blueprint.scaleCorrectReverse(i-n),s)}centerContentInViewport(e=!0){let i=0,s=0,r=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;const d=this.blueprint.getNodes();for(const f of d)i+=f.leftBoundary()+f.rightBoundary(),s+=f.topBoundary()+f.bottomBoundary(),r=Math.min(r,f.leftBoundary()),n=Math.max(n,f.rightBoundary()),c=Math.min(c,f.topBoundary()),h=Math.max(h,f.bottomBoundary());i=Math.round(n-r<=this.viewportSize[0]?(n+r)/2:i/(2*d.length)),s=Math.round(h-c<=this.viewportSize[1]?(h+c)/2:s/(2*d.length)),this.centerViewport(i,s,e)}};yr=new WeakMap,Li=new WeakMap,Ti=new WeakMap,$i=new WeakMap,o(Xn,"styleVariables",{"--ueb-font-size":`${l.fontSize}`,"--ueb-grid-axis-line-color":`${l.gridAxisLineColor}`,"--ueb-grid-expand":`${l.expandGridSize}px`,"--ueb-grid-line-color":`${l.gridLineColor}`,"--ueb-grid-line-width":`${l.gridLineWidth}px`,"--ueb-grid-set-line-color":`${l.gridSetLineColor}`,"--ueb-grid-set":`${l.gridSet}`,"--ueb-grid-size":`${l.gridSize}px`,"--ueb-link-min-width":`${l.linkMinWidth}`,"--ueb-node-radius":`${l.nodeRadius}px`});let $a=Xn;var Oi,Bi;const pt=class pt extends Ui{constructor(){super();p(this,Oi,0);p(this,Bi,0);o(this,"nodes",[]);o(this,"links",[]);o(this,"nodesNames",new Map);o(this,"mousePosition",[0,0]);o(this,"waitingExpandUpdate",!1);this.selecting=!1,this.scrolling=!1,this.focused=!1,this.zoom=0,this.scrollX=l.expandGridSize,this.scrollY=l.expandGridSize,this.translateX=l.expandGridSize,this.translateY=l.expandGridSize,super.initialize(new La,new $a)}initialize(){}getGridDOMElement(){return this.template.gridElement}getScroll(){return[this.scrollX,this.scrollY]}setScroll(e,i){this.scrollX=e,this.scrollY=i}scrollDelta(e=0,i=0,s=!1,r=l.smoothScrollTime){if(s){let n=[0,0];a(this,Oi)&&cancelAnimationFrame(a(this,Oi)),a(this,Bi)&&cancelAnimationFrame(a(this,Bi)),y.animate(0,e,r,c=>{this.scrollDelta(c-n[0],0,!1),n[0]=c},c=>m(this,Oi,c)),y.animate(0,i,r,c=>{this.scrollDelta(0,c-n[1],!1),n[1]=c},c=>m(this,Bi,c))}else{const n=[2*l.expandGridSize,2*l.expandGridSize];let c=this.getScroll(),h=[c[0]+e,c[1]+i],d=[0,0];for(let f=0;f<2;++f)h[f]<l.gridExpandThreshold*l.expandGridSize?d[f]=-1:h[f]>n[f]-l.gridExpandThreshold*l.expandGridSize&&(d[f]=1);(d[0]!=0||d[1]!=0)&&this.seamlessExpand(d[0],d[1]),c=this.getScroll(),h=[c[0]+e,c[1]+i],this.setScroll(h[0],h[1])}}scrollCenter(e=!1){const i=this.getScroll(),s=[this.translateX-i[0],this.translateY-i[1]],r=this.getViewportSize().map(c=>c/2),n=[s[0]-r[0],s[1]-r[1]];this.scrollDelta(n[0],n[1],e)}getViewportSize(){return[this.template.viewportElement.clientWidth,this.template.viewportElement.clientHeight]}getScrollMax(){return[this.template.viewportElement.scrollWidth-this.template.viewportElement.clientWidth,this.template.viewportElement.scrollHeight-this.template.viewportElement.clientHeight]}snapToGrid(e,i){return y.snapToGrid(e,i,l.gridSize)}seamlessExpand(e,i){e=Math.round(e),i=Math.round(i);let s=this.getScale();[e,i]=[-e*l.expandGridSize,-i*l.expandGridSize],e!=0&&(this.scrollX+=e,e/=s),i!=0&&(this.scrollY+=i,i/=s),this.translateX+=e,this.translateY+=i}progressiveSnapToGrid(e){return l.expandGridSize*Math.round(e/l.expandGridSize+.5*Math.sign(e))}getZoom(){return this.zoom}setZoom(e,i){if(e=y.clamp(e,l.minZoom,l.maxZoom),e==this.zoom)return;let s=this.getScale();if(this.zoom=e,i){i[0]+=this.translateX,i[1]+=this.translateY;let r=this.getScale()/s,n=[r*i[0],r*i[1]];this.scrollDelta((n[0]-i[0])*s,(n[1]-i[1])*s)}}getScale(){return l.scale[this.getZoom()]}scaleCorrect(e){return e/this.getScale()}scaleCorrectReverse(e){return e*this.getScale()}compensateTranslation(e,i){return e-=this.translateX,i-=this.translateY,[e,i]}getNodes(e=!1,[i,s,r,n]=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER]){let c=this.nodes;return e&&(c=c.filter(h=>h.selected)),(i>Number.MIN_SAFE_INTEGER||s<Number.MAX_SAFE_INTEGER||r<Number.MAX_SAFE_INTEGER||n>Number.MIN_SAFE_INTEGER)&&(c=c.filter(h=>h.topBoundary()>=i&&h.rightBoundary()<=s&&h.bottomBoundary()<=r&&h.leftBoundary()>=n)),c}getCommentNodes(e=!1){let i=[...this.template.getCommentNodes(e)];return i.length===0&&(i=this.nodes.filter(s=>s.getType()===l.paths.comment&&(!e||s.selected))),i}getPin(e){var s;let i=this.template.getPin(e);return(!i||i.nodeElement.getNodeName()!=e.objectName.toString())&&(i=[...((s=this.nodes.find(r=>e.objectName.toString()==r.getNodeName()))==null?void 0:s.getPinElements())??[]].find(r=>e.pinGuid.toString()==r.getPinId().toString())),i}getLinks(e=null,i=null){if(e==null!=(i==null)){const s=e??i;return this.links.filter(r=>r.source==s||r.destination==s)}return e!=null&&i!=null?this.links.filter(s=>s.source==e&&s.destination==i||s.source==i&&s.destination==e):this.links}getLink(e,i,s=!1){return this.links.find(r=>r.source==e&&r.destination==i||!s&&r.source==i&&r.destination==e)}selectAll(){this.getNodes().forEach(e=>pt.nodeSelectToggleFunction(e,!0))}unselectAll(){this.getNodes().forEach(e=>pt.nodeSelectToggleFunction(e,!1))}addGraphElement(...e){var s;const i=r=>{const n=r.currentTarget;n.removeEventListener(l.removeEventName,i);const[c,h]=n instanceof bt?[this.nodes,n.entity]:n instanceof Cs?[this.links]:null,d=c==null?void 0:c.indexOf(n);if(d>=0){const f=c.pop();d<c.length&&(c[d]=f)}h&&this.entity.removeObjectEntity(h)};for(const r of e)if(r.blueprint=this,r instanceof bt&&!this.nodes.includes(r)){if(r.getType()==l.paths.niagaraClipboardContent){this.entity=this.entity.mergeWith(r.entity);const h=atob(r.entity.ExportedNodes.toString());this.template.getPasteInputObject().pasted(h).forEach(d=>d.entity._exported=!0);continue}const n=r.entity.getObjectName(),c=this.entity.getHomonymObjectEntity(r.entity);c&&(c.Name.value=this.entity.takeFreeName(n),c.Name=c.Name),this.nodes.push(r),this.entity.addObjectEntity(r.entity),r.addEventListener(l.removeEventName,i),(s=this.template.nodesContainerElement)==null||s.appendChild(r)}else r instanceof Cs&&!this.links.includes(r)&&(this.links.push(r),r.addEventListener(l.removeEventName,i),this.template.linksContainerElement&&!this.template.linksContainerElement.contains(r)&&this.template.linksContainerElement.appendChild(r));e.filter(r=>r instanceof bt).forEach(r=>r.sanitizeLinks(e)),e.filter(r=>r instanceof bt&&r.getType()==l.paths.comment).forEach(r=>r.updateComplete.then(()=>r.template.manageNodesBind()))}removeGraphElement(...e){for(let i of e){if(i.closest("ueb-blueprint")!==this)return;i.remove()}}setFocused(e=!0){if(this.focused==e)return;let i=new CustomEvent(e?l.focusEventName.begin:l.focusEventName.end);this.focused=e,this.focused||this.unselectAll(),this.dispatchEvent(i)}acknowledgeEditText(e){const i=new CustomEvent(e?l.editTextEventName.begin:l.editTextEventName.end);this.dispatchEvent(i)}};Oi=new WeakMap,Bi=new WeakMap,o(pt,"properties",{selecting:{type:Boolean,attribute:"data-selecting",reflect:!0,converter:k.booleanConverter},scrolling:{type:Boolean,attribute:"data-scrolling",reflect:!0,converter:k.booleanConverter},focused:{type:Boolean,attribute:"data-focused",reflect:!0,converter:k.booleanConverter},zoom:{type:Number,attribute:"data-zoom",reflect:!0},scrollX:{type:Number,attribute:!1},scrollY:{type:Number,attribute:!1},additionalX:{type:Number,attribute:!1},additionalY:{type:Number,attribute:!1},translateX:{type:Number,attribute:!1},translateY:{type:Number,attribute:!1}}),o(pt,"nodeBoundariesSupplier",e=>({primaryInf:e.leftBoundary(!0),primarySup:e.rightBoundary(!0),secondaryInf:e.topBoundary(!0),secondarySup:e.bottomBoundary(!0)})),o(pt,"nodeSelectToggleFunction",(e,i)=>{e.setSelected(i)});let Oa=pt;customElements.define("ueb-blueprint",Oa);var Er;class no extends eo{constructor(){super(...arguments);p(this,Er);o(this,"movementSpace");o(this,"movementSpaceSize",[0,0])}get locationChangeCallback(){return a(this,Er)}set locationChangeCallback(e){m(this,Er,e)}firstUpdated(e){super.firstUpdated(e),this.movementSpace=this.element.parentElement}setup(){super.setup();const e=this.movementSpace.getBoundingClientRect();this.movementSpaceSize=[e.width,e.height]}createDraggableObject(){return new Kr(this.element,this.blueprint,{draggableElement:this.movementSpace,ignoreTranslateCompensate:!0,moveEverywhere:!0,movementSpace:this.movementSpace,repositionOnClick:!0,stepSize:1})}adjustLocation(e,i){var s;return(s=this.locationChangeCallback)==null||s.call(this,e,i),[e,i]}}Er=new WeakMap;class Nu extends no{adjustLocation(t,e){var n;const i=Math.round(this.movementSpaceSize[0]/2);t=t-i,e=-(e-i);let[s,r]=y.getPolarCoordinates(t,e);return s=Math.min(s,i),[t,e]=y.getCartesianCoordinates(s,r),(n=this.locationChangeCallback)==null||n.call(this,t/i,e/i),t=Math.round(t+i),e=Math.round(-e+i),[t,e]}}class ao extends Dt{constructor(){super(...arguments);o(this,"windowElement")}setup(){super.setup(),this.windowElement=this.closest("ueb-window")}setLocation(e,i){super.setLocation(...this.template.adjustLocation(e,i))}}class ja extends ao{constructor(){super(),super.initialize({},new Nu)}static newObject(){return new ja}initialize(){}}class xu extends no{adjustLocation(t,e){var i;return t=y.clamp(t,0,this.movementSpaceSize[0]),e=y.clamp(e,0,this.movementSpaceSize[1]),(i=this.locationChangeCallback)==null||i.call(this,t/this.movementSpaceSize[0],1-e/this.movementSpaceSize[1]),[t,e]}}class Ya extends ao{constructor(){super(),super.initialize({},new xu)}static newObject(){return new Ya}initialize(){}}class Ua extends Zr{constructor(t,e,i={}){i.consumeEvent=!0,super(t,e,i)}}var Ii,Nr,qn;class Pu extends qi{constructor(){super(...arguments);p(this,Ii);p(this,Nr);p(this,qn,e=>this.element.selectedOption=e.target.selectedOptions[0].value)}render(){return b`
            <select class="ueb-pin-input-content" @change="${a(this,qn)}">
                ${this.element.options.map(([e,i])=>b`
                    <option value="${e}" ?selected="${e===this.element.selectedOption}">${i}</option>
                `)}
            </select>
            <select style="visibility: hidden; position: fixed;">
                <option>${this.element.selectedOption}</option>
            </select>
        `}firstUpdated(e){super.firstUpdated(e),m(this,Ii,this.element.querySelector("select:first-child")),m(this,Nr,this.element.querySelector("select:last-child"));const i=new Event("input",{bubbles:!0});a(this,Ii).dispatchEvent(i)}updated(e){super.updated(e);const i=a(this,Nr).getBoundingClientRect();this.element.style.setProperty("--ueb-dropdown-width",i.width+"px")}createInputObjects(){return[...super.createInputObjects(),new Ua(this.element,this.blueprint)]}setSelectedValue(e){this.element.querySelector(`option[value="${e}"]`).defaultSelected=!0}getSelectedValue(){return a(this,Ii).value}}Ii=new WeakMap,Nr=new WeakMap,qn=new WeakMap;const Ut=class Ut extends Ui{constructor(){super(),super.initialize({},new Pu),this.options=[],this.selectedOption=""}static newObject(t){return new Ut}initialize(){}getValue(){return this.template.getSelectedValue()}};o(Ut,"properties",{...F(Ut,Ut,"properties"),options:{type:Object},selectedOption:{type:String}});let Ba=Ut;var xr,Pr,kr,Ar;class ku extends qi{constructor(){super(...arguments);p(this,xr,()=>{this.blueprint.acknowledgeEditText(!0),this.element.selectOnFocus&&getSelection().selectAllChildren(this.element)});p(this,Pr,()=>{this.blueprint.acknowledgeEditText(!1),getSelection().removeAllRanges()});p(this,kr,e=>e.target.querySelectorAll("br").forEach(i=>i.remove()));p(this,Ar,e=>{e.code=="Enter"&&!e.shiftKey&&e.target.blur()})}initialize(e){super.initialize(e),this.element.classList.add("ueb-pin-input-content"),this.element.setAttribute("role","textbox"),this.element.contentEditable="true"}firstUpdated(e){super.firstUpdated(e);const i=new Event("input",{bubbles:!0});this.element.dispatchEvent(i)}createInputObjects(){return[...super.createInputObjects(),new Ua(this.element,this.blueprint)]}setup(){super.setup(),this.element.addEventListener("focus",a(this,xr)),this.element.addEventListener("focusout",a(this,Pr)),this.element.singleLine&&this.element.addEventListener("input",a(this,kr)),this.element.blurOnEnter&&this.element.addEventListener("keydown",a(this,Ar))}cleanup(){super.cleanup(),this.element.removeEventListener("focus",a(this,xr)),this.element.removeEventListener("focusout",a(this,Pr)),this.element.removeEventListener("input",a(this,kr)),this.element.removeEventListener("keydown",a(this,Ar))}}xr=new WeakMap,Pr=new WeakMap,kr=new WeakMap,Ar=new WeakMap;const Xt=class Xt extends Ui{constructor(){super(),this.singleLine=!1,this.selectOnFocus=!0,this.blurOnEnter=!0,super.initialize({},new ku)}static newObject(){return new Xt}initialize(){}};o(Xt,"properties",{...F(Xt,Xt,"properties"),singleLine:{type:Boolean,attribute:"data-single-line",converter:k.booleanConverter,reflect:!0},selectOnFocus:{type:Boolean,attribute:"data-select-focus",converter:k.booleanConverter,reflect:!0},blurOnEnter:{type:Boolean,attribute:"data-blur-enter",converter:k.booleanConverter,reflect:!0}});let Ia=Xt;var Ue,Mr;class Il extends Te{constructor(){super(...arguments);p(this,Ue);p(this,Mr,()=>{const e=this.element.getDefaultValue();e.value=a(this,Ue).checked,this.element.setDefaultValue(e)})}firstUpdated(e){super.firstUpdated(e),m(this,Ue,this.element.querySelector(".ueb-pin-input"))}setup(){var e;super.setup(),(e=a(this,Ue))==null||e.addEventListener("change",a(this,Mr))}cleanup(){var e;super.cleanup(),(e=a(this,Ue))==null||e.removeEventListener("change",a(this,Mr))}createInputObjects(){return[...super.createInputObjects(),new Ua(a(this,Ue),this.blueprint)]}renderInput(){var e;return b`
            <input type="checkbox" class="ueb-pin-input-wrapper ueb-pin-input" ?checked="${((e=this.element.defaultValue)==null?void 0:e.valueOf())===!0}" />
        `}}Ue=new WeakMap,Mr=new WeakMap;var Di,Gi,Tt,Xe,Zn,lo;const mt=class mt extends Te{constructor(){super(...arguments);p(this,Zn);p(this,Di);p(this,Gi);p(this,Tt,()=>this.setInputs(this.getInputs(),!0));p(this,Xe,e=>R(this,Zn,lo).call(this,e.target))}get inputWrapper(){return a(this,Di)}static stringFromInputToUE(e){return e.replace(/(?=\n\s*)\n$/,"")}static stringFromUEToInput(e){return e.replaceAll(new RegExp("(?:\\r|(?<=(?:^|[^\\\\])(?:\\\\\\\\)*)\\\\r)(?=\\n)","g"),"").replace(new RegExp("(?<=\\n\\s*)$"),`
`)}firstUpdated(e){var s;super.firstUpdated(e),this.constructor.canWrapInput&&this.isInputRendered()&&(this.element.addEventListener("input",a(this,Xe)),this.nameWidth=this.blueprint.scaleCorrect(((s=this.element.querySelector(".ueb-pin-name"))==null?void 0:s.getBoundingClientRect().width)??0)),m(this,Di,this.element.querySelector(".ueb-pin-input-wrapper")),m(this,Gi,[...this.element.querySelectorAll("ueb-input")])}setup(){super.setup();const e=this.constructor;e.saveEachInputChange?this.element.addEventListener("input",a(this,Tt)):this.element.addEventListener("focusout",a(this,Tt)),e.canWrapInput&&this.isInputRendered()&&(this.element.addEventListener("input",a(this,Xe)),this.element.nodeElement.addEventListener(l.nodeReflowEventName,a(this,Xe)))}cleanup(){super.cleanup(),this.element.nodeElement.removeEventListener(l.nodeReflowEventName,a(this,Xe)),this.element.removeEventListener("input",a(this,Xe)),this.element.removeEventListener("input",a(this,Tt)),this.element.removeEventListener("focusout",a(this,Tt))}getInput(){return this.getInputs().reduce((e,i)=>e+i,"")}getInputs(){return a(this,Gi).map(e=>y.clearHTMLWhitespace(e.innerHTML))}setInputs(e=[],i=!0){a(this,Gi).forEach(this.constructor.singleLineInput?(s,r)=>s.innerText=e[r]:(s,r)=>s.innerText=e[r].replaceAll(`
`,"")),i&&this.setDefaultValue(e.map(s=>mt.stringFromInputToUE(s)),e),this.element.requestUpdate(),this.element.nodeElement.acknowledgeReflow()}setDefaultValue(e=[],i=e){this.element.setDefaultValue(e.join(""))}renderInput(){var r;const e=this.constructor,i=e.singleLineInput,s=e.selectOnFocus;return b`
            <div class="ueb-pin-input-wrapper ueb-pin-input">
                <ueb-input .singleLine="${i}" .selectOnFocus="${s}"
                    .innerText="${mt.stringFromUEToInput(((r=this.element.getDefaultValue())==null?void 0:r.toString())??"")}">
                </ueb-input>
            </div>
        `}};Di=new WeakMap,Gi=new WeakMap,Tt=new WeakMap,Xe=new WeakMap,Zn=new WeakSet,lo=function(e){var r;if(((r=this.element.querySelector(".ueb-pin-name"))==null?void 0:r.getBoundingClientRect().width)<20)return;const i=this.blueprint.scaleCorrect(a(this,Di).getBoundingClientRect().width)+this.nameWidth,s=this.element.classList.contains("ueb-pin-input-wrap");!s&&i>l.pinInputWrapWidth?this.element.classList.add("ueb-pin-input-wrap"):s&&i<=l.pinInputWrapWidth&&this.element.classList.remove("ueb-pin-input-wrap")},o(mt,"singleLineInput",!1),o(mt,"selectOnFocus",!0),o(mt,"saveEachInputChange",!1);let ji=mt;var Lr,$t;class oo extends ji{constructor(){super(...arguments);p(this,Lr);p(this,$t,[])}setup(){var s,r;super.setup();const e=(s=this.element.nodeElement.entity.EnumEntries)==null?void 0:s.valueOf();m(this,$t,(e==null?void 0:e.map(n=>{var c;return n.valueOf()===""&&(n=new M("None")),[n,((c=this.element.nodeElement.getPinEntities().find(h=>n===h.PinName))==null?void 0:c.PinFriendlyName.toString())??n]}))??((r=l.CommonEnums[this.element.entity.getSubCategory()])==null?void 0:r.map(n=>n instanceof Array?n:[n,y.formatStringName(n)]))??[]);const i=this.element.getDefaultValue().toString();a(this,$t).find(([n,c])=>n===i)||a(this,$t).push([i,y.formatStringName(i)]),this.element.requestUpdate()}renderInput(){return b`
            <ueb-dropdown
                class="ueb-pin-input-wrapper ueb-pin-input"
                .options="${a(this,$t)}"
                .selectedOption="${this.element.defaultValue}"
            >
            </ueb-dropdown>
        `}firstUpdated(e){super.firstUpdated(e),m(this,Lr,this.element.querySelector("ueb-dropdown"))}getInputs(){return[a(this,Lr).getValue()]}setDefaultValue(e=[],i){const s=this.element.getDefaultValue();s.value=e[0],this.element.setDefaultValue(s),this.element.requestUpdate()}}Lr=new WeakMap,$t=new WeakMap,o(oo,"saveEachInputChange",!0);class Au extends Te{renderIcon(){return w.execPin}renderName(){var e;let t=(e=this.element.entity.PinName)==null?void 0:e.toString();if(this.element.entity.PinFriendlyName)t=this.element.entity.PinFriendlyName.toString();else if(t==="execute"||t==="then")return b``;return b`<span class="ueb-pin-name ueb-ellipsis-nowrap-text">${this.element.getPinDisplayName()}</span>`}}class Qe extends ji{setInputs(t=[],e=!1){if((!t||t.length==0)&&(t=[this.getInput()]),super.setInputs(t,!1),e){let i=[];for(const s of t){let r=parseFloat(s);isNaN(r)&&(r=0,e=!1),i.push(r)}this.setDefaultValue(i,t)}}setDefaultValue(t=[],e){const i=this.element.getDefaultValue();i.value=t[0],this.element.setDefaultValue(i),this.element.requestUpdate()}}o(Qe,"singleLineInput",!0);class Mu extends Qe{setDefaultValue(t=[],e){const i=this.element.getDefaultValue();i.value=BigInt(t[0]),this.element.setDefaultValue(i),this.element.requestUpdate()}renderInput(){var t;return b`
            <div class="ueb-pin-input-wrapper ueb-pin-input">
                <ueb-input .singleLine="${!0}" .innerText="${((t=this.element.getDefaultValue())==null?void 0:t.toString())??"0"}">
                </ueb-input>
            </div>
        `}}class Dl extends Qe{renderInput(){var t;return b`
            <div class="ueb-pin-input-wrapper ueb-pin-input">
                <ueb-input .singleLine="${!0}" .innerText="${((t=this.element.getDefaultValue())==null?void 0:t.toString())??"0"}">
                </ueb-input>
            </div>
        `}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Lu={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Tu=u=>(...t)=>({_$litDirective$:u,values:t});class $u{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const uo="important",Ou=" !"+uo,Bu=Tu(class extends $u{constructor(u){var t;if(super(u),u.type!==Lu.ATTRIBUTE||u.name!=="style"||((t=u.strings)===null||t===void 0?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(u){return Object.keys(u).reduce((t,e)=>{const i=u[e];return i==null?t:t+`${e=e.includes("-")?e:e.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`},"")}update(u,[t]){const{style:e}=u.element;if(this.ht===void 0){this.ht=new Set;for(const i in t)this.ht.add(i);return this.render(t)}this.ht.forEach(i=>{t[i]==null&&(this.ht.delete(i),i.includes("-")?e.removeProperty(i):e[i]="")});for(const i in t){const s=t[i];if(s!=null){this.ht.add(i);const r=typeof s=="string"&&s.endsWith(Ou);i.includes("-")||r?e.setProperty(i,r?s.slice(0,-11):s,r?uo:""):e[i]=s}}return It}});class Wi extends to{constructor(){super(...arguments);o(this,"toggleAdvancedDisplayHandler")}getDraggableElement(){return this.element.querySelector(".ueb-window-top")}createDraggableObject(){return new Kr(this.element,this.blueprint,{draggableElement:this.getDraggableElement(),ignoreScale:!0,ignoreTranslateCompensate:!1,movementSpace:this.blueprint,stepSize:1})}setup(){const e=this.blueprint.template.gridLeftVisibilityBoundary(),i=this.blueprint.template.gridTopVisibilityBoundary();this.element.locationX=this.blueprint.scaleCorrectReverse(this.blueprint.mousePosition[0]-e),this.element.locationY=this.blueprint.scaleCorrectReverse(this.blueprint.mousePosition[1]-i),this.element.updateComplete.then(()=>{const s=this.blueprint.getBoundingClientRect();this.element.locationX+this.element.sizeX>s.width&&(this.element.locationX=s.width-this.element.sizeX),this.element.locationX=Math.max(0,this.element.locationX),this.element.locationY+this.element.sizeY>s.height&&(this.element.locationY=s.height-this.element.sizeY),this.element.locationY=Math.max(0,this.element.locationY)})}render(){return b`
            <div class="ueb-window">
                <div class="ueb-window-top">
                    <div class="ueb-window-name ueb-ellipsis-nowrap-text">${this.renderWindowName()}</div>
                    <div class="ueb-window-close" @click="${()=>this.element.remove()}">
                        ${w.close}
                    </div>
                </div>
                <div class="ueb-window-content">
                    ${this.renderContent()}
                </div>
            </div>
        `}renderWindowName(){return b`Window`}renderContent(){return b``}apply(){this.element.dispatchEvent(new CustomEvent(l.windowApplyEventName)),this.element.remove()}cancel(){this.element.dispatchEvent(new CustomEvent(l.windowCancelEventName)),this.element.remove()}}var Tr,$r,Or,Br,Ir,Dr,Gr,Vr,Rr,Hr,Fr,zr,jr,Vi,Kn,Ri,Ot,Hi,en;class co extends Wi{constructor(){super(...arguments);p(this,Hi);p(this,Tr);p(this,$r);p(this,Or);p(this,Br);p(this,Ir);p(this,Dr);p(this,Gr);p(this,Vr);p(this,Rr);p(this,Hr);p(this,Fr,e=>{const i=y.clearHTMLWhitespace(e.target.innerHTML),s=parseInt(i,16);isNaN(s)||(this.color.setFromRGBANumber(s),this.element.requestUpdate())});p(this,zr,e=>{const i=y.clearHTMLWhitespace(e.target.innerHTML),s=parseInt(i,16);isNaN(s)||(this.color.setFromSRGBANumber(s),this.element.requestUpdate())});p(this,jr,e=>i=>{i.code=="Enter"&&(i.preventDefault(),e(i))});p(this,Vi,new se);p(this,Kn,new se);p(this,Ri);p(this,Ot,new se)}get color(){return a(this,Vi)}set color(e){var i;e.toNumber()!=((i=this.color)==null?void 0:i.toNumber())&&(this.element.requestUpdate("color",a(this,Vi)),m(this,Vi,e))}get fullColor(){return a(this,Kn)}get initialColor(){return a(this,Ri)}initialize(e){super.initialize(e),m(this,Ri,this.element.windowOptions.getPinColor()),this.color.setFromHSVA(this.initialColor.H.value,this.initialColor.S.value,this.initialColor.V.value,this.initialColor.A.value),this.fullColor.setFromHSVA(this.color.H.value,1,1,1)}firstUpdated(e){m(this,Tr,this.element.querySelector(".ueb-color-picker-wheel ueb-color-handler")),m(this,$r,this.element.querySelector(".ueb-color-picker-saturation ueb-ui-slider")),m(this,Or,this.element.querySelector(".ueb-color-picker-value ueb-ui-slider")),m(this,Br,this.element.querySelector(".ueb-color-picker-r ueb-ui-slider")),m(this,Ir,this.element.querySelector(".ueb-color-picker-g ueb-ui-slider")),m(this,Dr,this.element.querySelector(".ueb-color-picker-b ueb-ui-slider")),m(this,Gr,this.element.querySelector(".ueb-color-picker-a ueb-ui-slider")),m(this,Vr,this.element.querySelector(".ueb-color-picker-h ueb-ui-slider")),m(this,Rr,this.element.querySelector(".ueb-color-picker-s ueb-ui-slider")),m(this,Hr,this.element.querySelector(".ueb-color-picker-v ueb-ui-slider")),a(this,Tr).template.locationChangeCallback=(i,s)=>{this.color.setFromWheelLocation(i,s,this.color.V.value,this.color.A.value),this.fullColor.setFromHSVA(this.color.H.value,1,1,1),this.element.requestUpdate()},a(this,$r).template.locationChangeCallback=(i,s)=>{this.color.setFromHSVA(this.color.H.value,s,this.color.V.value,this.color.A.value),this.element.requestUpdate()},a(this,Or).template.locationChangeCallback=(i,s)=>{this.color.setFromHSVA(this.color.H.value,this.color.S.value,s,this.color.A.value),this.element.requestUpdate()},a(this,Br).template.locationChangeCallback=(i,s)=>{this.color.setFromRGBA(i,this.color.G.value,this.color.B.value,this.color.A.value),this.element.requestUpdate()},a(this,Ir).template.locationChangeCallback=(i,s)=>{this.color.setFromRGBA(this.color.R.value,i,this.color.B.value,this.color.A.value),this.element.requestUpdate()},a(this,Dr).template.locationChangeCallback=(i,s)=>{this.color.setFromRGBA(this.color.R.value,this.color.G.value,i,this.color.A.value),this.element.requestUpdate()},a(this,Gr).template.locationChangeCallback=(i,s)=>{this.color.setFromRGBA(this.color.R.value,this.color.G.value,this.color.B.value,i),this.element.requestUpdate()},a(this,Vr).template.locationChangeCallback=(i,s)=>{this.color.setFromHSVA(i,this.color.S.value,this.color.V.value,this.color.A.value),this.element.requestUpdate()},a(this,Rr).template.locationChangeCallback=(i,s)=>{this.color.setFromHSVA(this.color.H.value,i,this.color.V.value,this.color.A.value),this.element.requestUpdate()},a(this,Hr).template.locationChangeCallback=(i,s)=>{this.color.setFromHSVA(this.color.H.value,this.color.S.value,i,this.color.A.value),this.element.requestUpdate()}}renderSlider(e){let i="",s=0,r="";const n=c=>`linear-gradient(to right, #${R(this,Hi,en).call(this,c,"00",!0)}, #${R(this,Hi,en).call(this,c,"ff",!0)})`;switch(e){case 0:i="r",s=this.color.R.value,r=n(e);break;case 1:i="g",s=this.color.G.value,r=n(e);break;case 2:i="b",s=this.color.B.value,r=n(e);break;case 3:i="a",s=this.color.A.value,r=`${l.alphaPattern}, ${n(e)}`;break;case 4:i="h",s=this.color.H.value*360,r="linear-gradient(to right, #f00 0%, #ff0 16.666%, #0f0 33.333%, #0ff 50%, #00f 66.666%, #f0f 83.333%, #f00 100%)";break;case 5:i="s",s=this.color.S.value,r=`linear-gradient(to right,#${a(this,Ot).setFromHSVA(this.color.H.value,0,this.color.V.value,1),a(this,Ot).toRGBAString()},#${a(this,Ot).setFromHSVA(this.color.H.value,1,this.color.V.value,1),a(this,Ot).toRGBAString()})`;break;case 6:i="v",s=this.color.V.value,r=`linear-gradient(to right, #000, #${this.fullColor.toRGBAString()})`;break}return r=`background: ${r};`,b`
            <div class="ueb-color-picker-${i.toLowerCase()}">
                <span class="ueb-color-control-label">${i.toUpperCase()}</span>
                <div>
                    <div class="ueb-horizontal-slider">
                        <span class="ueb-horizontal-slider-text"
                            .innerText="${L.printNumber(y.roundDecimals(s,3))}">
                        </span>
                        <ueb-ui-slider></ueb-ui-slider>
                    </div>
                    <div class="ueb-color-picker-gradient" style="${r}"></div>
                </div>
            </div>
        `}renderContent(){const e=this.color.H.value*2*Math.PI,i={"--ueb-color-r":this.color.R.toString(),"--ueb-color-g":this.color.G.toString(),"--ueb-color-b":this.color.B.toString(),"--ueb-color-a":this.color.A.toString(),"--ueb-color-h":this.color.H.toString(),"--ueb-color-s":this.color.S.toString(),"--ueb-color-v":this.color.V.toString(),"--ueb-color-wheel-x":`${(this.color.S.value*Math.cos(e)*.5+.5)*100}%`,"--ueb-color-wheel-y":`${(this.color.S.value*Math.sin(e)*.5+.5)*100}%`},s=this.color.toRGBAString(),r=this.color.toSRGBAString(),n=this.fullColor.toRGBAString();return b`
            <div class="ueb-color-picker" style="${Bu(i)}">
                <div class="ueb-color-picker-toolbar">
                    <div class="ueb-color-picker-theme"></div>
                    <div class="ueb-color-picker-srgb"></div>
                </div>
                <div class="ueb-color-picker-main">
                    <div class="ueb-color-picker-wheel">
                        <ueb-color-handler></ueb-color-handler>
                    </div>
                    <div class="ueb-color-picker-saturation ueb-vertical-slider"
                        style="background-color: #${n}">
                        <ueb-ui-slider></ueb-ui-slider>
                    </div>
                    <div class="ueb-color-picker-value ueb-vertical-slider"
                        style="background-color: #${n}">
                        <ueb-ui-slider></ueb-ui-slider>
                    </div>
                    <div class="ueb-color-picker-preview">
                        Old
                        <div class="ueb-color-picker-preview-old "
                            style="background: #${a(this,Ri).toRGBAString()}">
                        </div>
                        <div class="ueb-color-picker-preview-new">
                            <div class="ueb-color-picker-preview-1"
                                style="background: #${R(this,Hi,en).call(this,3,"FF")}">
                            </div>
                            <div class="ueb-color-picker-preview-2"
                                style="background: ${`linear-gradient(#${s}, #${s}),${l.alphaPattern}`}">
                            </div>
                        </div>
                        New
                    </div>
                </div>
                <div class="ueb-color-picker-advanced-toggle ueb-toggle-control">
                    Advanced
                </div>
                <div class="ueb-color-picker-advanced">
                    <div class="ueb-color-picker-column">
                        ${this.renderSlider(0)}
                        ${this.renderSlider(1)}
                        ${this.renderSlider(2)}
                        ${this.renderSlider(3)}
                    </div>
                    <div class="ueb-color-picker-column">
                        ${this.renderSlider(4)}
                        ${this.renderSlider(5)}
                        ${this.renderSlider(6)}
                        <div class="ueb-color-control">
                            <span class="ueb-color-control-label">Hex Linear</span>
                            <div class="ueb-color-picker-hex-linear ueb-text-input">
                                <ueb-input
                                    .innerText="${s}"
                                    @focusout="${a(this,Fr)}"
                                    @keydown="${a(this,jr).call(this,a(this,Fr))}">
                                </ueb-input>
                            </div>
                        </div>
                        <div class="ueb-color-control">
                             <span class="ueb-color-control-label">Hex sRGB</span>
                            <div class="ueb-color-picker-hex-srgb ueb-text-input">
                                <ueb-input
                                    .innerText="${r}"
                                    @focusout="${a(this,zr)}"
                                    @keydown="${a(this,jr).call(this,a(this,zr))}">
                                </ueb-input>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ueb-buttons">
                    <div class="ueb-color-picker-ok ueb-button" @click="${()=>this.apply()}">
                        ${l.windowApplyButtonText}
                    </div>
                    <div class="ueb-color-picker-cancel ueb-button" @click="${()=>this.cancel()}">
                        ${l.windowCancelButtonText}
                    </div>
                </div>
            </div>
        `}renderWindowName(){return b`${l.colorWindowName}`}}Tr=new WeakMap,$r=new WeakMap,Or=new WeakMap,Br=new WeakMap,Ir=new WeakMap,Dr=new WeakMap,Gr=new WeakMap,Vr=new WeakMap,Rr=new WeakMap,Hr=new WeakMap,Fr=new WeakMap,zr=new WeakMap,jr=new WeakMap,Vi=new WeakMap,Kn=new WeakMap,Ri=new WeakMap,Ot=new WeakMap,Hi=new WeakSet,en=function(e,i,s=!1){const r=this.color.toRGBAString(),n=`${r.substring(0,2*e)}${i}${r.substring(2+2*e)}`;return s?`${n.substring(0,6)}FF`:n};var ye,Wn;class Iu extends Te{constructor(){super(...arguments);p(this,ye);p(this,Wn,e=>{e.preventDefault(),this.blueprint.setFocused(!0),m(this,ye,re.getConstructor("ueb-window").newObject({type:new co,windowOptions:{getPinColor:()=>this.element.defaultValue,setPinColor:r=>this.element.setDefaultValue(r)}})),this.blueprint.append(a(this,ye));const i=()=>{this.element.setDefaultValue(a(this,ye).template.color)},s=()=>{a(this,ye).removeEventListener(l.windowApplyEventName,i),a(this,ye).removeEventListener(l.windowCloseEventName,s),m(this,ye,null)};a(this,ye).addEventListener(l.windowApplyEventName,i),a(this,ye).addEventListener(l.windowCloseEventName,s)})}renderInput(){var e,i;return b`
            <span class="ueb-pin-input-wrapper ueb-pin-input" data-linear-color="${((e=this.element.getDefaultValue())==null?void 0:e.toString())??A}"
                @click="${a(this,Wn)}"
                style="--ueb-linear-color: rgba(${((i=this.element.getDefaultValue())==null?void 0:i.toString())??A})">
            </span>
        `}}ye=new WeakMap,Wn=new WeakMap;class ho extends ji{}o(ho,"singleLineInput",!0);class Du extends Qe{renderInput(){var t;return b`
            <div class="ueb-pin-input-wrapper ueb-pin-input">
                <ueb-input .singleLine="${!0}"
                    .innerText="${L.printNumber(((t=this.element.getDefaultValue())==null?void 0:t.valueOf())??0)}">
                </ueb-input>
            </div>
        `}}class Gu extends Te{renderIcon(){return w.referencePin}}var Ke,po,mo,go;class Vu extends Qe{constructor(){super(...arguments);p(this,Ke)}setDefaultValue(e=[],i=e){const s=this.element.getDefaultValue(!0);if(!(s instanceof ke))throw new TypeError("Expected DefaultValue to be a RotatorEntity");s.R.value=e[0],s.P.value=e[1],s.Y.value=e[2],this.element.requestUpdate("DefaultValue",s)}renderInput(){return b`
            <div class="ueb-pin-input-wrapper">
                <span class="ueb-pin-input-label">X</span>
                <div class="ueb-pin-input">
                    <ueb-input .singleLine="${!0}" .innerText="${R(this,Ke,po).call(this)}"></ueb-input>
                </div>
                <span class="ueb-pin-input-label">Y</span>
                <div class="ueb-pin-input">
                    <ueb-input .singleLine="${!0}" .innerText="${R(this,Ke,mo).call(this)}"></ueb-input>
                </div>
                <span class="ueb-pin-input-label">Z</span>
                <div class="ueb-pin-input">
                    <ueb-input .singleLine="${!0}" .innerText="${R(this,Ke,go).call(this)}"></ueb-input>
                </div>
            </div>
        `}}Ke=new WeakSet,po=function(){var e;return L.printNumber(((e=this.element.getDefaultValue())==null?void 0:e.R.valueOf())??0)},mo=function(){var e;return L.printNumber(((e=this.element.getDefaultValue())==null?void 0:e.P.valueOf())??0)},go=function(){var e;return L.printNumber(((e=this.element.getDefaultValue())==null?void 0:e.Y.valueOf())??0)};class Ru extends ji{}var Yi,fo,bo;class Gl extends Qe{constructor(){super(...arguments);p(this,Yi)}setDefaultValue(e,i){const s=this.element.getDefaultValue(!0);s.X.value=e[0],s.Y.value=e[1],this.element.setDefaultValue(s)}renderInput(){return b`
            <div class="ueb-pin-input-wrapper">
                <span class="ueb-pin-input-label">X</span>
                <div class="ueb-pin-input">
                    <ueb-input .singleLine="${!0}" .innerText="${R(this,Yi,fo).call(this)}"></ueb-input>
                </div>
                <span class="ueb-pin-input-label">Y</span>
                <div class="ueb-pin-input">
                    <ueb-input .singleLine="${!0}" .innerText="${R(this,Yi,bo).call(this)}"></ueb-input>
                </div>
            </div>
        `}}Yi=new WeakSet,fo=function(){var e;return L.printNumber(((e=this.element.getDefaultValue())==null?void 0:e.X.valueOf())??0)},bo=function(){var e;return L.printNumber(((e=this.element.getDefaultValue())==null?void 0:e.Y.valueOf())??0)};var Oe,vo,wo,So,Co;class Hu extends Qe{constructor(){super(...arguments);p(this,Oe)}setDefaultValue(e,i){const s=this.element.getDefaultValue(!0);if(!(s instanceof Ee))throw new TypeError("Expected DefaultValue to be a Vector4DEntity");s.X.value=e[0],s.Y.value=e[1],s.Z.value=e[2],s.W.value=e[3],this.element.requestUpdate("DefaultValue",s)}renderInput(){return b`
            <div class="ueb-pin-input-wrapper">
                <span class="ueb-pin-input-label">X</span>
                <div class="ueb-pin-input">
                    <ueb-input .singleLine="${!0}" .innerText="${R(this,Oe,vo).call(this)}"></ueb-input>
                </div>
                <span class="ueb-pin-input-label">Y</span>
                <div class="ueb-pin-input">
                    <ueb-input .singleLine="${!0}" .innerText="${R(this,Oe,wo).call(this)}"></ueb-input>
                </div>
                <span class="ueb-pin-input-label">Z</span>
                <div class="ueb-pin-input">
                    <ueb-input .singleLine="${!0}" .innerText="${R(this,Oe,So).call(this)}"></ueb-input>
                </div>
                <span class="ueb-pin-input-label">W</span>
                <div class="ueb-pin-input">
                    <ueb-input .singleLine="${!0}" .innerText="${R(this,Oe,Co).call(this)}"></ueb-input>
                </div>
            </div>
        `}}Oe=new WeakSet,vo=function(){var e;return L.printNumber(((e=this.element.getDefaultValue())==null?void 0:e.X.valueOf())??0)},wo=function(){var e;return L.printNumber(((e=this.element.getDefaultValue())==null?void 0:e.Y.valueOf())??0)},So=function(){var e;return L.printNumber(((e=this.element.getDefaultValue())==null?void 0:e.Z.valueOf())??0)},Co=function(){var e;return L.printNumber(((e=this.element.getDefaultValue())==null?void 0:e.W.valueOf())??0)};var We,yo,Eo,No;class na extends Qe{constructor(){super(...arguments);p(this,We)}setDefaultValue(e,i){const s=this.element.getDefaultValue(!0);if(!(s instanceof de))throw new TypeError("Expected DefaultValue to be a VectorEntity");s.X.value=e[0],s.Y.value=e[1],s.Z.value=e[2],this.element.requestUpdate("DefaultValue",s)}renderInput(){return b`
            <div class="ueb-pin-input-wrapper">
                <span class="ueb-pin-input-label">X</span>
                <div class="ueb-pin-input">
                    <ueb-input .singleLine="${!0}" .innerText="${R(this,We,yo).call(this)}"></ueb-input>
                </div>
                <span class="ueb-pin-input-label">Y</span>
                <div class="ueb-pin-input">
                    <ueb-input .singleLine="${!0}" .innerText="${R(this,We,Eo).call(this)}"></ueb-input>
                </div>
                <span class="ueb-pin-input-label">Z</span>
                <div class="ueb-pin-input">
                    <ueb-input .singleLine="${!0}" .innerText="${R(this,We,No).call(this)}"></ueb-input>
                </div>
            </div>
        `}}We=new WeakSet,yo=function(){var e;return L.printNumber(((e=this.element.getDefaultValue())==null?void 0:e.X.valueOf())??0)},Eo=function(){var e;return L.printNumber(((e=this.element.getDefaultValue())==null?void 0:e.Y.valueOf())??0)},No=function(){var e;return L.printNumber(((e=this.element.getDefaultValue())==null?void 0:e.Z.valueOf())??0)};const Vl={bool:Il,byte:Dl,enum:oo,int:Dl,int64:Mu,MUTABLE_REFERENCE:Gu,name:ho,real:Du,rg:Gl,string:Ru,[l.paths.linearColor]:Iu,[l.paths.niagaraBool]:Il,[l.paths.niagaraPosition]:na,[l.paths.rotator]:Vu,[l.paths.vector]:na,[l.paths.vector2D]:Gl,[l.paths.vector3f]:na,[l.paths.vector4f]:Hu};function Rl(u){var e,i,s;if(((e=u.PinType.ContainerType)==null?void 0:e.toString())==="Array")return Te;if((i=u.PinType.bIsReference)!=null&&i.valueOf()&&!((s=u.PinType.bIsConst)!=null&&s.valueOf()))return Vl.MUTABLE_REFERENCE;const t=u.getType();return t==="exec"?Au:(u.isInput()?Vl[t]:Te)??Te}const ps=class ps extends Ui{constructor(){super(...arguments);o(this,"nodeElement")}static newObject(e=new ee,i=new(Rl(e)),s=void 0){const r=new ps;return r.initialize(e,i,s),r}initialize(e=new ee,i=new(Rl(e)),s=void 0){var r,n;this.nodeElement=s,this.advancedView=(r=e.bAdvancedView)==null?void 0:r.valueOf(),this.isLinked=!1,this.connectable=!((n=e.bNotConnectable)!=null&&n.valueOf()),super.initialize(e,i),this.pinType=this.entity.getType(),this.defaultValue=this.entity.getDefaultValue(),this.color=ps.properties.color.converter.fromAttribute(this.getColor().toString()),this.pinDirection=e.isInput()?"input":e.isOutput()?"output":"hidden"}setup(){super.setup(),this.nodeElement=this.closest("ueb-node")}createPinReference(){return new Me(new H(this.nodeElement.getNodeName()),this.getPinId())}getPinId(){return this.entity.PinId}getPinName(){var e;return((e=this.entity.PinName)==null?void 0:e.toString())??""}getPinDisplayName(){return this.entity.pinTitle()}getColor(){return this.entity.pinColor()}isInput(){return this.entity.isInput()}isOutput(){return this.entity.isOutput()}getLinkLocation(){return this.template.getLinkLocation()}getNodeElement(){return this.nodeElement}getLinks(){var e;return((e=this.entity.LinkedTo)==null?void 0:e.valueOf())??[]}getDefaultValue(e=!1){return this.defaultValue=this.entity.getDefaultValue(e)}setDefaultValue(e){var i;this.entity.DefaultValue=e,this.defaultValue=e,this.entity.recomputesNodeTitleOnChange&&((i=this.nodeElement)==null||i.computeNodeDisplayName())}sanitizeLinks(e=[]){var i;this.entity.LinkedTo=new ee.attributes.LinkedTo((i=this.entity.LinkedTo)==null?void 0:i.valueOf().filter(s=>{let r=this.blueprint.getPin(s);if(r){if(e.length&&!e.includes(r.nodeElement))return!1;let n=this.blueprint.getLink(this,r);n||(n=re.getConstructor("ueb-link").newObject(this,r),this.blueprint.addGraphElement(n))}return r})),this.isLinked=this.entity.isLinked()}linkTo(e){var s,r;const i=this.createPinReference();this.isLinked&&this.isOutput()&&(this.pinType==="exec"||e.pinType==="exec")&&!this.getLinks().some(n=>i.equals(n))&&this.unlinkFromAll(),this.entity.linkTo(e.getNodeElement().getNodeName(),e.entity)&&(this.isLinked=this.entity.isLinked(),(s=this.nodeElement)==null||s.template.linksChanged(),this.entity.recomputesNodeTitleOnChange&&((r=this.nodeElement)==null||r.computeNodeDisplayName()))}unlinkFrom(e,i=!0){var s,r,n;this.entity.unlinkFrom(e.getNodeElement().getNodeName(),e.entity)&&(this.isLinked=this.entity.isLinked(),(s=this.nodeElement)==null||s.template.linksChanged(),i&&((r=this.blueprint.getLink(this,e))==null||r.remove()),this.entity.recomputesNodeTitleOnChange&&((n=this.nodeElement)==null||n.computeNodeDisplayName()))}unlinkFromAll(){var i;const e=this.getLinks().length;this.getLinks().map(s=>this.blueprint.getPin(s)).forEach(s=>this.unlinkFrom(s)),e&&((i=this.nodeElement)==null||i.template.linksChanged())}redirectLink(e,i){const s=this.getLinks().findIndex(r=>r.objectName.toString()==e.getNodeElement().getNodeName()&&r.pinGuid.toString()==e.entity.PinId.toString());return s>=0?(this.entity.LinkedTo[s]=i,!0):!1}};o(ps,"properties",{pinId:{type:J,converter:{fromAttribute:(e,i)=>e?J.grammar.parse(e):null,toAttribute:(e,i)=>e==null?void 0:e.toString()},attribute:"data-id",reflect:!0},pinType:{type:String,attribute:"data-type",reflect:!0},advancedView:{type:String,attribute:"data-advanced-view",reflect:!0},color:{type:se,converter:{fromAttribute:(e,i)=>e?se.getLinearColorFromAnyFormat().parse(e):null,toAttribute:(e,i)=>e?se.printLinearColor(e):null},attribute:"data-color",reflect:!0},defaultValue:{type:String,attribute:!1},isLinked:{type:Boolean,converter:k.booleanConverter,attribute:"data-linked",reflect:!0},pinDirection:{type:String,attribute:"data-direction",reflect:!0},connectable:{type:Boolean,converter:k.booleanConverter,attribute:"data-connectable",reflect:!0}});let Da=ps;class Hl{constructor(t=i=>i,e=null){this.array=new Uint32Array(e),this.comparisonValueSupplier=t,this.length=0,this.currentPosition=0}get(t){return t>=0&&t<this.length?this.array[t]:null}getArray(){return this.array}getPosition(t){let e=0,i=this.length;for(;e<i;){let s=Math.floor((e+i)/2);this.comparisonValueSupplier(this.array[s])<t?e=s+1:i=s}return e}reserve(t){if(this.array.length<t){let e=new Uint32Array(t);e.set(this.array),this.array=e}}insert(t,e=null){let i=this.getPosition(this.comparisonValueSupplier(t));return(i<this.currentPosition||e!=null&&i==this.currentPosition&&this.comparisonValueSupplier(t)<e)&&++this.currentPosition,this.shiftRight(i),this.array[i]=t,++this.length,i}remove(t){let e=this.getPosition(this.comparisonValueSupplier(t));this.array[e]==t&&this.removeAt(e)}removeAt(t){return t<this.currentPosition&&--this.currentPosition,this.shiftLeft(t),--this.length,t}getNext(){return this.currentPosition>=0&&this.currentPosition<this.length?this.get(this.currentPosition):null}getNextValue(){return this.currentPosition>=0&&this.currentPosition<this.length?this.comparisonValueSupplier(this.get(this.currentPosition)):Number.MAX_SAFE_INTEGER}getPrev(){return this.currentPosition>0?this.get(this.currentPosition-1):null}getPrevValue(){return this.currentPosition>0?this.comparisonValueSupplier(this.get(this.currentPosition-1)):Number.MIN_SAFE_INTEGER}shiftLeft(t,e=1){this.array.set(this.array.subarray(t+e),t)}shiftRight(t,e=1){this.array.set(this.array.subarray(t,-e),t+e)}}class Fu{constructor(t,e,i,s){this.initialPosition=t,this.finalPosition=t,this.metadata=new Array(e.length),this.primaryOrder=new Hl(r=>this.metadata[r].primaryBoundary),this.secondaryOrder=new Hl(r=>this.metadata[r].secondaryBoundary),this.selectFunc=s,this.rectangles=e,this.primaryOrder.reserve(this.rectangles.length),this.secondaryOrder.reserve(this.rectangles.length),e.forEach((r,n)=>{let c={primaryBoundary:this.initialPosition[0],secondaryBoundary:this.initialPosition[1],rectangle:n,onSecondaryAxis:!1};this.metadata[n]=c,s(r,!1);const h=i(r);this.initialPosition[1]<h.secondaryInf?c.secondaryBoundary=h.secondaryInf:h.secondarySup<this.initialPosition[1]?c.secondaryBoundary=h.secondarySup:c.onSecondaryAxis=!0,this.initialPosition[0]<h.primaryInf?(c.primaryBoundary=h.primaryInf,this.primaryOrder.insert(n)):h.primarySup<this.initialPosition[0]?(c.primaryBoundary=h.primarySup,this.primaryOrder.insert(n)):h.secondarySup<this.initialPosition[1]||this.initialPosition[1]<h.secondaryInf?this.secondaryOrder.insert(n):s(r,!0)}),this.primaryOrder.currentPosition=this.primaryOrder.getPosition(this.initialPosition[0]),this.secondaryOrder.currentPosition=this.secondaryOrder.getPosition(this.initialPosition[1]),this.computeBoundaries()}computeBoundaries(){this.boundaries={primaryN:{v:this.primaryOrder.getPrevValue(),i:this.primaryOrder.getPrev()},primaryP:{v:this.primaryOrder.getNextValue(),i:this.primaryOrder.getNext()},secondaryN:{v:this.secondaryOrder.getPrevValue(),i:this.secondaryOrder.getPrev()},secondaryP:{v:this.secondaryOrder.getNextValue(),i:this.secondaryOrder.getNext()}}}selectTo(t){const e=[Math.sign(t[0]-this.initialPosition[0]),Math.sign(t[1]-this.initialPosition[1])],i=(r,n)=>{if(this.metadata[r].onSecondaryAxis)this.selectFunc(this.rectangles[r],n);else if(n){this.secondaryOrder.insert(r,t[1]);const c=this.metadata[r].secondaryBoundary;Math.sign(t[1]-c)==e[1]&&Math.sign(c-this.initialPosition[1])==e[1]&&this.selectFunc(this.rectangles[r],!0)}else this.selectFunc(this.rectangles[r],!1),this.secondaryOrder.remove(r);this.computeBoundaries(),this.selectTo(t)};t[0]<this.boundaries.primaryN.v?(--this.primaryOrder.currentPosition,i(this.boundaries.primaryN.i,this.initialPosition[0]>this.boundaries.primaryN.v&&t[0]<this.initialPosition[0])):t[0]>this.boundaries.primaryP.v&&(++this.primaryOrder.currentPosition,i(this.boundaries.primaryP.i,this.initialPosition[0]<this.boundaries.primaryP.v&&this.initialPosition[0]<t[0]));const s=(r,n)=>{this.selectFunc(this.rectangles[r],n),this.computeBoundaries(),this.selectTo(t)};t[1]<this.boundaries.secondaryN.v?(--this.secondaryOrder.currentPosition,s(this.boundaries.secondaryN.i,this.initialPosition[1]>this.boundaries.secondaryN.v&&t[1]<this.initialPosition[1])):t[1]>this.boundaries.secondaryP.v&&(++this.secondaryOrder.currentPosition,s(this.boundaries.secondaryP.i,this.initialPosition[1]<this.boundaries.secondaryP.v&&this.initialPosition[1]<t[1])),this.finalPosition=t}}class zu extends Jl{}class Xa extends pn{constructor(){super();o(this,"selectionModel",null);super.initialize({},new zu)}static newObject(){return new Xa}initialize(){}beginSelect(e){const i=this.blueprint.constructor;this.blueprint.selecting=!0,this.setBothLocations(e),this.selectionModel=new Fu(e,this.blueprint.getNodes(),i.nodeBoundariesSupplier,i.nodeSelectToggleFunction)}selectTo(e){this.selectionModel.selectTo(e),this.toX=e[0],this.toY=e[1]}endSelect(){this.blueprint.selecting=!1,this.selectionModel=null,this.fromX=0,this.fromY=0,this.toX=0,this.toY=0}}var Yr;const gt=class gt extends Dt{static newObject(t={},e=t.type??new Wi){const i=new gt;return i.initialize(t,e),i}initialize(t={},e=t.type??new Wi){t.windowOptions??(t.windowOptions={}),this.type=t.type,this.windowOptions=t.windowOptions,super.initialize(t,e)}computeSizes(){const t=this.getBoundingClientRect();this.sizeX=t.width,this.sizeY=t.height}cleanup(){super.cleanup(),this.acknowledgeClose()}acknowledgeClose(){let t=new CustomEvent(l.windowCloseEventName);this.dispatchEvent(t)}};Yr=new WeakMap,p(gt,Yr,{window:Wi,"color-picker":co}),o(gt,"properties",{...Dt.properties,type:{type:Wi,attribute:"data-type",reflect:!0,converter:{fromAttribute:(t,e)=>a(gt,Yr)[t],toAttribute:(t,e)=>{var i;return(i=Object.entries(a(gt,Yr)).find(([s,r])=>t.constructor===r))==null?void 0:i[0]}}}});let Ga=gt;function ju(){const u=(t,e)=>{customElements.define(t,e),re.registerElement(t,e)};u("ueb-color-handler",ja),u("ueb-dropdown",Ba),u("ueb-input",Ia),u("ueb-link",Cs),u("ueb-node",bt),u("ueb-pin",Da),u("ueb-selector",Xa),u("ueb-ui-slider",Ya),u("ueb-window",Ga)}const ms=class ms extends O{static createGrammar(){return g.seq(g.reg(new RegExp(`(${N.Regex.Path.source}|${N.Regex.Symbol.source}\\s*)?\\(\\s*`),1),g.seq(N.attributeName,N.equalSeparation).map(([t,e])=>t).chain(t=>this.unknownEntityGrammar.map(e=>i=>i[t]=e)).sepBy(N.commaSeparation),g.reg(/\s*(?:,\s*)?\)/)).map(([t,e,i])=>{t??(t="");let s={};return t.length&&(s.lookbehind=t),e.forEach(r=>r(s)),new this(s)}).label("UnknownKeysEntity")}};o(ms,"grammar",ms.createGrammar()),O.unknownEntity=ms;let Va=ms;function Yu(){O.unknownEntityGrammar=g.alt(k.grammar,J.grammar,g.str("None").map(()=>G.createNoneInstance()),un.grammar,L.grammar,g.alt(G.fullReferenceGrammar,g.regArray(new RegExp(`"(${N.Regex.Path.source})'(${N.Regex.Path.source}|${N.symbol.getParser().regexp.source})'"`)).map(([u,t,e])=>new G(t,e,u))),M.grammar,ws.grammar,vs.grammar,on.grammar,Me.grammar,Ee.grammar,de.grammar,pe.grammar,ke.grammar,se.grammar,Va.grammar,H.grammar,K.of(Me).grammar,K.of(Xr.accepting(L,M,H)).grammar,g.lazy(()=>K.createGrammar(O.unknownEntityGrammar)))}Yu();ju();export{Oa as Blueprint,l as Configuration,Cs as LinkElement,bt as NodeElement,y as Utility};
